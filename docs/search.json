[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "TRABAJO BIGDATA",
    "section": "",
    "text": "Hola, somos Javier Belenguer Esteban y Juan Bosco Pujol Cerdá.\nEsta web sirve para presentar el trabajo en equipo para la asignatura “Programación y manejo de datos en la era Del Big Data”, optativa de GECO en la Facultad de Economía de la Universitat de València.\nLa web de la asignatura está aquí y los trabajos de mis compañeros de curso puedes verlos aquí.\nNuestro trabajo lleva por título : “El precio del alquiler en España”. El objetivo es hacer un análisis sobre la evolución del alquiler de la vivienda español, de la ley de viviendas, y de los problemas que afronta la población al respecto.\nEl trabajo puede verse aquí, y las slides aquí. También puedes clicar en la navbar (parte superior derecha) cualquiera de los dos iconos para acceder a estos."
  },
  {
    "objectID": "posts/post-with-code/index.html",
    "href": "posts/post-with-code/index.html",
    "title": "Trabajo sobre la evolución de los alquileres en España",
    "section": "",
    "text": "This is a post with executable code.\n\n\nCódigo\n1 + 1\n\n\n[1] 2"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this blog"
  },
  {
    "objectID": "posts/welcome/index.html",
    "href": "posts/welcome/index.html",
    "title": "Welcome To My Blog",
    "section": "",
    "text": "This is the first post in a Quarto blog. Welcome!\n\nSince this post doesn’t specify an explicit image, the first image in the post will be used in the listing page of posts."
  },
  {
    "objectID": "web_alquileres.html",
    "href": "web_alquileres.html",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "",
    "text": "El tema del precio de la vivienda, en especial de los alquileres, es de gran preocupación para una gran parte de la población y más aún para los jóvenes. Son incontables las veces que hemos escuchado a la gente por la calle quejarse de lo caro que es permitirse una vivienda y más aún independizarse, son cada vez más el número de adultos jóvenes (entre 18 y 30 años) los que deciden quedarse viviendo en casa de sus padres aún cobrando un salario. Esto no es sorpresa alguna, pensemos que para un individuo el hecho de vivir con plena independencia de sus padres requiere la capacidad de costearse una serie de bienes y servicios imprescindibles tales como:\n\nSu cesta de compra habitual.\nCostes de carburante o transportes públicos.\nEl coste de la hipoteca o el alquiler de la vivienda en la que habita.\nCoste de servicios recurrentes como el gimnasio, peluquero/barbero…\nGastos en ocio (como el consumo de bebidas alcohólicas o refrescos, cine, festivales o discotecas, viajes…)\n\nEn la siguiente gráfica podemos visualizar el grave empeoramiento de la tasa de emancipación a medida que han pasado los años.\n\n\nCódigo\nlibrary(tidyverse)\nDf_eman &lt;- rio::import(\"./datos/TASA DE EMANCIPACION.csv\")\n\nDf_good &lt;- Df_eman %&gt;%\n  mutate(Year = as.factor(Year)) %&gt;%\n  select(Year, Tasa)\n\nplot_eman &lt;-ggplot(Df_good, aes(Year, Tasa)) + geom_line(group = 1) +\n  labs(\n    title = \"Tasa de emancipación para jóvenes de 18 -34 años.\",\n    x = \"Año\",\n    y = \"Tasa de emancipación\",\n    caption = \"Fuente: datos.gob.es (Gobierno de España).\"\n  ) +\n  ggthemes::theme_stata()\n\nplot_eman\n\n\n\n\n\n\n\n\n\n\n\nVamos a tomar como referencia el salario promedio en España y su evolución a lo largo de una serie temporal ( en este caso 2006 -2020).\n\n\nCódigo\nlibrary(gganimate)\nlibrary(tidyverse)\nlibrary(plotly)\nlibrary(patchwork)\n\nSALARIOS &lt;- rio::import(\"./datos/datos_salariomedio.csv\") %&gt;%\n  select(Año, Salariomedio) %&gt;%\n  drop_na() %&gt;%\n  mutate(Variacion =((Salariomedio - lag(Salariomedio))/lag(Salariomedio))*100)\n\n\nEvo_salarios &lt;- ggplot(SALARIOS, aes(Año, Salariomedio)) + geom_line(aes(group = 1), color = \"aquamarine4\", size = 0.95) + ggthemes:: theme_stata()\n\n  \nEvo_salarios + labs(\n  title = \"Evolución del salario medio anual.\",\n  subtitle = \"Serie 2006-2020.\",\n  y = \"Salario medio (miles de euros)\",\n  caption = \"Fuente: Epdata\")\n\n\n\n\n\n\n\n\n\nComo se puede observar en la gráfica de arriba, podemos identificar 2 etapas de fuerte crecimiento del salario promedio:\n\nDe 2006 a 2008\nDe 2014 a 2019\n\nLa primera es atribuile al periodo de fuerte expansión económica que experimentó la economía española durante el principio de los 2000 junto con el boom del ladrillo, mientras que la segunda se debe al periodo de fuerte recuperación económica tras los años de crisis.\nPor otro lado, se puede observar una caída durante el periodo 2011 - 2014 debido al estallido de la crisis de 2008, se puede remarcar en ese mismo periodo (2008-2011) el estancamiento del salario promedio. No obstante, conviene visualizar estos datos también en tasas de crecimiento:\n\n\nCódigo\n\nVar_Salarios &lt;- ggplot(SALARIOS, aes(Año, Variacion)) + geom_line(aes(group = 1), color = \"#53868B\", size = 0.95) + ggthemes:: theme_stata()\n\nVar_Salarios + labs(\n  title = \"Crecimiento del salario medio.\",\n  subtitle = \"Serie 2006-2020.\",\n  y = \"Variación en porcentaje\",\n  caption = \"Fuente: Epdata\")\n\n\n\n\n\n\n\n\n\nTeniendo en cuenta la evolución en tasas podemos fijarnos que la primera etapa de crecimiento del salario español mostraba una tendencia decreciente mientras que la segunda todo lo contrario. Las razones de este comportamiento son las mismas, ya que en el boom la economía española estaba creciendo por encima de su potencial y comenzaba a estancarse mientras que en un periodo de recuperación al estar alejados de nuestro potencial la tasa de crecimiento muestra tendencia creciente. Consideramos que es bastante obvia la caída del salario en 2020 debido a la pandemia covid, no es necesario desarrollar en este aspecto.\nVolviendo a la pregunta principal con lo que hemos visto, si el crecimiento del salario medio español a lo largo de los últimos 20 años es similar o superior al del IPC, podemos afirmar que será capaz de cubrir los gastos necesarios para un individuo mencionados al principio. Sin embargo, no podemos asegurar esto último sin informarnos acerca del crecimiento de los precios de dichos bienes y servicios.\n\n\nCódigo\nlibrary(gganimate)\nlibrary(tidyverse)\nIPC&lt;- rio::import(\"./datos/ipc_bueno.csv\")\n\ndf_IPC &lt;- IPC %&gt;%\n  rename(IPC = indice_precios_consumo_tasas_variacion) %&gt;%\n  select(indicadores,grupos_coicop_nombre,provincias_nombre,periodos_id,IPC) %&gt;%\n  filter(periodos_id %in% c(\"2002M01\",\"2003M01\",\"2004M01\",\"2005M01\",\"2006M01\",\"2007M01\",\"2008M01\",\"2009M01\",\"2010M01\",\"2011M01\",\"2012M01\",\"2013M01\",\"2014M01\",\"2015M01\",\"2016M01\"))\n\n\ndf_IPC_valores &lt;- df_IPC %&gt;%\n  filter(indicadores == \"Índices\") %&gt;%\n  filter(provincias_nombre == \"España\") %&gt;%\n  mutate(periodos_id = as.Date(paste0(substr(periodos_id, 1, 4), substr(periodos_id, 6, 7), \"-01\"), format = \"%Y%m-%d\"))\n\nplot_IPC_valores &lt;- ggplot(df_IPC_valores, aes(periodos_id, IPC, group = grupos_coicop_nombre, color = grupos_coicop_nombre)) + \n  geom_line(size = 0.9) +\n  ggthemes::theme_stata() +\n  theme(\n    axis.text.x = element_text(\n      angle = 75, hjust = 1, vjust = 1, size = 5, margin = margin(\n        r = 5, b = 5, l = 5)),\n    axis.text.y = element_text(size = 5),\n    panel.spacing = unit(0.75, \"lines\"),\n    legend.title = element_text(size = 8),\n    legend.key.size = unit(1, \"cm\"),\n    legend.key.height = unit(1, \"cm\"),\n    legend.key.width = unit(0.1,\"cm\"),\n    legend.direction = \"vertical\",\n    legend.position = \"none\") +\n  labs(\n    title = \"Evolución IPC por grupos COICOP\",\n    subtitle = \"Serie 2002 - 2016\",\n    x = \"Periodo\",\n    y = \"IPC\",\n    caption = \"Fuente: datos.gob.es (Gobierno de España)\",\n    color = \"Grupos COICOP\"\n  ) +\n  facet_wrap(\n    vars(grupos_coicop_nombre),\n    nrow = 4,\n    ncol = 4,\n    labeller = labeller(grupos_coicop_nombre = function(label) str_wrap(label, width = 20))) +\n  theme(strip.text = element_text(size = 8))\n\nplot_animado &lt;- plot_IPC_valores + transition_reveal(periodos_id) + view_follow(fixed_y = TRUE)\n\nplot_animado\n\n\n\n\n\n\n\n\n\nEn la gráfica animada de arriba se nos ilustra el crecimiento del IPC en distintos grupos de bienes/servicios de consumo. Al mostrar una evolución de precios a lo largo de un periodo de 14 años, lo normal es que haya un crecimiento en el nivel de precios sostenido y a un ritmo bajo. No obstante, llama la atención el acusado crecimiento de los precios para las bebidas alcohólicas y tabaco (cuyas demandas se caracterizan por ser inelásticas) Y la enseñanza y la vivienda, debido a que su crecimiento se acelera al final del periodo. Para ser más precisos, observémos el comportamiento en tasas de crecimiento:\n\n\nCódigo\nlibrary(gganimate)\nlibrary(tidyverse)\nIPC&lt;- rio::import(\"./datos/ipc_bueno.csv\")\n\ndf_IPC &lt;- IPC %&gt;%\n  rename(IPC = indice_precios_consumo_tasas_variacion) %&gt;%\n  select(indicadores,grupos_coicop_nombre,provincias_nombre,periodos_id,IPC) %&gt;%\n  filter(periodos_id %in% c(\"2002M01\",\"2003M01\",\"2004M01\",\"2005M01\",\"2006M01\",\"2007M01\",\"2008M01\",\"2009M01\",\"2010M01\",\"2011M01\",\"2012M01\",\"2013M01\",\"2014M01\",\"2015M01\",\"2016M01\"))\n\n\ndf_IPC_valores &lt;- df_IPC %&gt;%\n  filter(indicadores == \"Índices\") %&gt;%\n  filter(provincias_nombre == \"España\") %&gt;%\n  mutate(periodos_id = as.Date(paste0(substr(periodos_id, 1, 4), substr(periodos_id, 6, 7), \"-01\"), format = \"%Y%m-%d\"))\n\ndf_IPC_tasas &lt;- df_IPC %&gt;%\n  filter(indicadores == \"Tasas de variación anual\") %&gt;%\n  filter(provincias_nombre == \"España\") %&gt;%\n  mutate(periodos_id = as.Date(paste0(substr(periodos_id, 1, 4), substr(periodos_id, 6, 7), \"-01\"), format = \"%Y%m-%d\"))\n\n\nplot_IPC_tasas &lt;- ggplot(df_IPC_tasas, aes(periodos_id, IPC, group = grupos_coicop_nombre, color = grupos_coicop_nombre)) + \n  geom_line(size = 0.9) +\n  ggthemes::theme_stata() +\n  theme(\n    axis.text.x = element_text(\n      angle = 75, hjust = 1, vjust = 1, size = 5, margin = margin(\n        r = 5, b = 5, l = 5)),\n    axis.text.y = element_text(size = 5),\n    panel.spacing = unit(0.75, \"lines\"),\n    legend.title = element_text(size = 8),\n    legend.key.size = unit(1, \"cm\"),\n    legend.key.height = unit(1, \"cm\"),\n    legend.key.width = unit(0.1,\"cm\"),\n    legend.direction = \"vertical\",\n    legend.position = \"none\") +\n  labs(\n    title = \"Evolución IPC en tasas por grupos COICOP\",\n    subtitle = \"Serie 2002 - 2016\",\n    x = NULL,\n    y = \"Var. IPC\",\n    caption = \"Fuente: datos.gob.es (Gobierno de España)\",\n    color = \"Grupos COICOP\"\n  ) +\n  facet_wrap(\n    vars(grupos_coicop_nombre),\n    nrow = 4,\n    ncol = 4,\n    labeller = labeller(grupos_coicop_nombre = function(label) str_wrap(label, width = 20))) +\n  theme(strip.text = element_text(size = 8))\n\nplot_IPC_tasas_animado &lt;- plot_IPC_tasas + transition_reveal(periodos_id) + view_follow(fixed_y = TRUE)\n\nplot_IPC_tasas_animado\n\n\n\n\n\n\n\n\n\nLos grupos que presentan una mayor volatilidad son el transporte y las bebidas alcohólicas y el tabaco. El comportamiento para la enseñanza y la medicina ha sido similar. Podemos resaltar que el grupo de alimentos y bebidas no alcohólicas han mostrado una evolución con fuertes caídas. El resto de grupos han mostrado una evolución adecuada en sus niveles de precios (crecimiento constante a tasas bajas).\nCOMPARATIVA EVOLUCIÓN SALARIO - PRECIOS\nEn primer lugar, el crecimiento del salario medio se ha ido estancando hasta llegar al crecimiento negativo (es decir, su reducción) pasando de tener una tasa del 7,5% a su punto más bajo de -2,5%. Una vez llega a ese suelo, se recupera hasta el 3,8% aproximadamente. Si a continuación nos fijamos en las tasas de crecimiento del IPC tanto general como por grupos, veremos que el crecimiento de los precios ha sido mayor que el de los salarios en términos relativos pues podemos observar cómo a lo largo del periodo el crecimiento ha oscilado entre bandas de 0 a 10%. En resumidas cuentas, el crecimiento del salario se ha ido estancando y ha tenido una leve recuperación a posteriori, la cual no es suficiente para soportar la evolución de los precios, resultando en una pérdida de poder adquisitivo para el ciudadanio promedio y por tanto dificultando la emancipación de los jóvenes."
  },
  {
    "objectID": "web_alquileres.html#intro",
    "href": "web_alquileres.html#intro",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "",
    "text": "##PARTE1\nHola esrtkfgskfsdjsf\n##PARTE2\nAFDKNdkjdsnsdfkkjsf\n##PARTE3\ndfsdkmfndkjfkjg\n##CONCLUSION"
  },
  {
    "objectID": "web_alquileres.html#chocho-de-vaca",
    "href": "web_alquileres.html#chocho-de-vaca",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "Chocho de vaca",
    "text": "Chocho de vaca"
  },
  {
    "objectID": "web_alquileres.html#chocho-de-calamar",
    "href": "web_alquileres.html#chocho-de-calamar",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "Chocho de calamar",
    "text": "Chocho de calamar"
  },
  {
    "objectID": "web_alquileres.html#uretra-de-tigre",
    "href": "web_alquileres.html#uretra-de-tigre",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "Uretra de tigre",
    "text": "Uretra de tigre"
  },
  {
    "objectID": "web_alquileres.html#parte-1",
    "href": "web_alquileres.html#parte-1",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "Parte 1",
    "text": "Parte 1"
  },
  {
    "objectID": "web_alquileres.html#parte-2",
    "href": "web_alquileres.html#parte-2",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "Parte 2",
    "text": "Parte 2"
  },
  {
    "objectID": "web_alquileres.html#parte-3",
    "href": "web_alquileres.html#parte-3",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "Parte 3",
    "text": "Parte 3"
  },
  {
    "objectID": "web_alquileres.html#por-qué-este-tema-y-para-qué",
    "href": "web_alquileres.html#por-qué-este-tema-y-para-qué",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "",
    "text": "El tema del precio de la vivienda, en especial de los alquileres, es de gran preocupación para una gran parte de la población y más aún para los jóvenes. Son incontables las veces que hemos escuchado a la gente por la calle quejarse de lo caro que es permitirse una vivienda y más aún independizarse, son cada vez más el número de adultos jóvenes (entre 18 y 30 años) los que deciden quedarse viviendo en casa de sus padres aún cobrando un salario. Esto no es sorpresa alguna, pensemos que para un individuo el hecho de vivir con plena independencia de sus padres requiere la capacidad de costearse una serie de bienes y servicios imprescindibles tales como:\n\nSu cesta de compra habitual.\nCostes de carburante o transportes públicos.\nEl coste de la hipoteca o el alquiler de la vivienda en la que habita.\nCoste de servicios recurrentes como el gimnasio, peluquero/barbero…\nGastos en ocio (como el consumo de bebidas alcohólicas o refrescos, cine, festivales o discotecas, viajes…)\n\nEn la siguiente gráfica podemos visualizar el grave empeoramiento de la tasa de emancipación a medida que han pasado los años.\n\n\nCódigo\nlibrary(tidyverse)\nDf_eman &lt;- rio::import(\"./datos/TASA DE EMANCIPACION.csv\")\n\nDf_good &lt;- Df_eman %&gt;%\n  mutate(Year = as.factor(Year)) %&gt;%\n  select(Year, Tasa)\n\nplot_eman &lt;-ggplot(Df_good, aes(Year, Tasa)) + geom_line(group = 1) +\n  labs(\n    title = \"Tasa de emancipación para jóvenes de 18 -34 años.\",\n    x = \"Año\",\n    y = \"Tasa de emancipación\",\n    caption = \"Fuente: datos.gob.es (Gobierno de España).\"\n  ) +\n  ggthemes::theme_stata()\n\nplot_eman\n\n\n\n\n\n\n\n\n\n\n\nVamos a tomar como referencia el salario promedio en España y su evolución a lo largo de una serie temporal ( en este caso 2006 -2020).\n\n\nCódigo\nlibrary(gganimate)\nlibrary(tidyverse)\nlibrary(plotly)\nlibrary(patchwork)\n\nSALARIOS &lt;- rio::import(\"./datos/datos_salariomedio.csv\") %&gt;%\n  select(Año, Salariomedio) %&gt;%\n  drop_na() %&gt;%\n  mutate(Variacion =((Salariomedio - lag(Salariomedio))/lag(Salariomedio))*100)\n\n\nEvo_salarios &lt;- ggplot(SALARIOS, aes(Año, Salariomedio)) + geom_line(aes(group = 1), color = \"aquamarine4\", size = 0.95) + ggthemes:: theme_stata()\n\n  \nEvo_salarios + labs(\n  title = \"Evolución del salario medio anual.\",\n  subtitle = \"Serie 2006-2020.\",\n  y = \"Salario medio (miles de euros)\",\n  caption = \"Fuente: Epdata\")\n\n\n\n\n\n\n\n\n\nComo se puede observar en la gráfica de arriba, podemos identificar 2 etapas de fuerte crecimiento del salario promedio:\n\nDe 2006 a 2008\nDe 2014 a 2019\n\nLa primera es atribuile al periodo de fuerte expansión económica que experimentó la economía española durante el principio de los 2000 junto con el boom del ladrillo, mientras que la segunda se debe al periodo de fuerte recuperación económica tras los años de crisis.\nPor otro lado, se puede observar una caída durante el periodo 2011 - 2014 debido al estallido de la crisis de 2008, se puede remarcar en ese mismo periodo (2008-2011) el estancamiento del salario promedio. No obstante, conviene visualizar estos datos también en tasas de crecimiento:\n\n\nCódigo\n\nVar_Salarios &lt;- ggplot(SALARIOS, aes(Año, Variacion)) + geom_line(aes(group = 1), color = \"#53868B\", size = 0.95) + ggthemes:: theme_stata()\n\nVar_Salarios + labs(\n  title = \"Crecimiento del salario medio.\",\n  subtitle = \"Serie 2006-2020.\",\n  y = \"Variación en porcentaje\",\n  caption = \"Fuente: Epdata\")\n\n\n\n\n\n\n\n\n\nTeniendo en cuenta la evolución en tasas podemos fijarnos que la primera etapa de crecimiento del salario español mostraba una tendencia decreciente mientras que la segunda todo lo contrario. Las razones de este comportamiento son las mismas, ya que en el boom la economía española estaba creciendo por encima de su potencial y comenzaba a estancarse mientras que en un periodo de recuperación al estar alejados de nuestro potencial la tasa de crecimiento muestra tendencia creciente. Consideramos que es bastante obvia la caída del salario en 2020 debido a la pandemia covid, no es necesario desarrollar en este aspecto.\nVolviendo a la pregunta principal con lo que hemos visto, si el crecimiento del salario medio español a lo largo de los últimos 20 años es similar o superior al del IPC, podemos afirmar que será capaz de cubrir los gastos necesarios para un individuo mencionados al principio. Sin embargo, no podemos asegurar esto último sin informarnos acerca del crecimiento de los precios de dichos bienes y servicios.\n\n\nCódigo\nlibrary(gganimate)\nlibrary(tidyverse)\nIPC&lt;- rio::import(\"./datos/ipc_bueno.csv\")\n\ndf_IPC &lt;- IPC %&gt;%\n  rename(IPC = indice_precios_consumo_tasas_variacion) %&gt;%\n  select(indicadores,grupos_coicop_nombre,provincias_nombre,periodos_id,IPC) %&gt;%\n  filter(periodos_id %in% c(\"2002M01\",\"2003M01\",\"2004M01\",\"2005M01\",\"2006M01\",\"2007M01\",\"2008M01\",\"2009M01\",\"2010M01\",\"2011M01\",\"2012M01\",\"2013M01\",\"2014M01\",\"2015M01\",\"2016M01\"))\n\n\ndf_IPC_valores &lt;- df_IPC %&gt;%\n  filter(indicadores == \"Índices\") %&gt;%\n  filter(provincias_nombre == \"España\") %&gt;%\n  mutate(periodos_id = as.Date(paste0(substr(periodos_id, 1, 4), substr(periodos_id, 6, 7), \"-01\"), format = \"%Y%m-%d\"))\n\nplot_IPC_valores &lt;- ggplot(df_IPC_valores, aes(periodos_id, IPC, group = grupos_coicop_nombre, color = grupos_coicop_nombre)) + \n  geom_line(size = 0.9) +\n  ggthemes::theme_stata() +\n  theme(\n    axis.text.x = element_text(\n      angle = 75, hjust = 1, vjust = 1, size = 5, margin = margin(\n        r = 5, b = 5, l = 5)),\n    axis.text.y = element_text(size = 5),\n    panel.spacing = unit(0.75, \"lines\"),\n    legend.title = element_text(size = 8),\n    legend.key.size = unit(1, \"cm\"),\n    legend.key.height = unit(1, \"cm\"),\n    legend.key.width = unit(0.1,\"cm\"),\n    legend.direction = \"vertical\",\n    legend.position = \"none\") +\n  labs(\n    title = \"Evolución IPC por grupos COICOP\",\n    subtitle = \"Serie 2002 - 2016\",\n    x = \"Periodo\",\n    y = \"IPC\",\n    caption = \"Fuente: datos.gob.es (Gobierno de España)\",\n    color = \"Grupos COICOP\"\n  ) +\n  facet_wrap(\n    vars(grupos_coicop_nombre),\n    nrow = 4,\n    ncol = 4,\n    labeller = labeller(grupos_coicop_nombre = function(label) str_wrap(label, width = 20))) +\n  theme(strip.text = element_text(size = 8))\n\nplot_animado &lt;- plot_IPC_valores + transition_reveal(periodos_id) + view_follow(fixed_y = TRUE)\n\nplot_animado\n\n\n\n\n\n\n\n\n\nEn la gráfica animada de arriba se nos ilustra el crecimiento del IPC en distintos grupos de bienes/servicios de consumo. Al mostrar una evolución de precios a lo largo de un periodo de 14 años, lo normal es que haya un crecimiento en el nivel de precios sostenido y a un ritmo bajo. No obstante, llama la atención el acusado crecimiento de los precios para las bebidas alcohólicas y tabaco (cuyas demandas se caracterizan por ser inelásticas) Y la enseñanza y la vivienda, debido a que su crecimiento se acelera al final del periodo. Para ser más precisos, observémos el comportamiento en tasas de crecimiento:\n\n\nCódigo\nlibrary(gganimate)\nlibrary(tidyverse)\nIPC&lt;- rio::import(\"./datos/ipc_bueno.csv\")\n\ndf_IPC &lt;- IPC %&gt;%\n  rename(IPC = indice_precios_consumo_tasas_variacion) %&gt;%\n  select(indicadores,grupos_coicop_nombre,provincias_nombre,periodos_id,IPC) %&gt;%\n  filter(periodos_id %in% c(\"2002M01\",\"2003M01\",\"2004M01\",\"2005M01\",\"2006M01\",\"2007M01\",\"2008M01\",\"2009M01\",\"2010M01\",\"2011M01\",\"2012M01\",\"2013M01\",\"2014M01\",\"2015M01\",\"2016M01\"))\n\n\ndf_IPC_valores &lt;- df_IPC %&gt;%\n  filter(indicadores == \"Índices\") %&gt;%\n  filter(provincias_nombre == \"España\") %&gt;%\n  mutate(periodos_id = as.Date(paste0(substr(periodos_id, 1, 4), substr(periodos_id, 6, 7), \"-01\"), format = \"%Y%m-%d\"))\n\ndf_IPC_tasas &lt;- df_IPC %&gt;%\n  filter(indicadores == \"Tasas de variación anual\") %&gt;%\n  filter(provincias_nombre == \"España\") %&gt;%\n  mutate(periodos_id = as.Date(paste0(substr(periodos_id, 1, 4), substr(periodos_id, 6, 7), \"-01\"), format = \"%Y%m-%d\"))\n\n\nplot_IPC_tasas &lt;- ggplot(df_IPC_tasas, aes(periodos_id, IPC, group = grupos_coicop_nombre, color = grupos_coicop_nombre)) + \n  geom_line(size = 0.9) +\n  ggthemes::theme_stata() +\n  theme(\n    axis.text.x = element_text(\n      angle = 75, hjust = 1, vjust = 1, size = 5, margin = margin(\n        r = 5, b = 5, l = 5)),\n    axis.text.y = element_text(size = 5),\n    panel.spacing = unit(0.75, \"lines\"),\n    legend.title = element_text(size = 8),\n    legend.key.size = unit(1, \"cm\"),\n    legend.key.height = unit(1, \"cm\"),\n    legend.key.width = unit(0.1,\"cm\"),\n    legend.direction = \"vertical\",\n    legend.position = \"none\") +\n  labs(\n    title = \"Evolución IPC en tasas por grupos COICOP\",\n    subtitle = \"Serie 2002 - 2016\",\n    x = NULL,\n    y = \"Var. IPC\",\n    caption = \"Fuente: datos.gob.es (Gobierno de España)\",\n    color = \"Grupos COICOP\"\n  ) +\n  facet_wrap(\n    vars(grupos_coicop_nombre),\n    nrow = 4,\n    ncol = 4,\n    labeller = labeller(grupos_coicop_nombre = function(label) str_wrap(label, width = 20))) +\n  theme(strip.text = element_text(size = 8))\n\nplot_IPC_tasas_animado &lt;- plot_IPC_tasas + transition_reveal(periodos_id) + view_follow(fixed_y = TRUE)\n\nplot_IPC_tasas_animado\n\n\n\n\n\n\n\n\n\nLos grupos que presentan una mayor volatilidad son el transporte y las bebidas alcohólicas y el tabaco. El comportamiento para la enseñanza y la medicina ha sido similar. Podemos resaltar que el grupo de alimentos y bebidas no alcohólicas han mostrado una evolución con fuertes caídas. El resto de grupos han mostrado una evolución adecuada en sus niveles de precios (crecimiento constante a tasas bajas).\nCOMPARATIVA EVOLUCIÓN SALARIO - PRECIOS\nEn primer lugar, el crecimiento del salario medio se ha ido estancando hasta llegar al crecimiento negativo (es decir, su reducción) pasando de tener una tasa del 7,5% a su punto más bajo de -2,5%. Una vez llega a ese suelo, se recupera hasta el 3,8% aproximadamente. Si a continuación nos fijamos en las tasas de crecimiento del IPC tanto general como por grupos, veremos que el crecimiento de los precios ha sido mayor que el de los salarios en términos relativos pues podemos observar cómo a lo largo del periodo el crecimiento ha oscilado entre bandas de 0 a 10%. En resumidas cuentas, el crecimiento del salario se ha ido estancando y ha tenido una leve recuperación a posteriori, la cual no es suficiente para soportar la evolución de los precios, resultando en una pérdida de poder adquisitivo para el ciudadanio promedio y por tanto dificultando la emancipación de los jóvenes."
  },
  {
    "objectID": "web_alquileres.html#evolucion-de-los-alquileres-características",
    "href": "web_alquileres.html#evolucion-de-los-alquileres-características",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "EVOLUCION DE LOS ALQUILERES: CARACTERÍSTICAS",
    "text": "EVOLUCION DE LOS ALQUILERES: CARACTERÍSTICAS\n\n\nCódigo\ndatos &lt;- \"./datos/DATOS_VIVIENDA.xlsx\"\ninfo &lt;- rio::import(datos)\n\ndf3 &lt;- info %&gt;%\n  filter(COMUNIDAD == \"Total nacional\")\n\n\np&lt;- ggplot(df3,\n       aes(\n  AÑO, \n  ÍNDICE,\n  color = TAMAÑO)) +\n  geom_line(size = 0.95) +\n  ggthemes::theme_stata() + \n  labs(\n  title = \"Evolución del Índice general de precios de alquiler por tamaño de vivienda (2015 = 100).\",\n  subtitle = \"serie 2011 - 2021\")\n\npp &lt;- ggplotly(p)\n\n\np_plotly &lt;- pp %&gt;%\n  layout(\n    legend = list(\n      title = \"Tamaño\",\n      font = list(\n        family = \"Arial\", \n        size = 12\n      ),\n      bgcolor = \"white\",\n      bordercolor = \"black\",\n      borderwidth = 1,\n      itemsizing = \"constant\"  \n    )\n  )\n\np_plotly &lt;- p_plotly %&gt;%\n  layout(\n    annotations = list(\n      list(\n        text = \"Fuente: INE\",\n        font = list(\n          family = \"Arial\",\n          size = 10\n        ),\n        x = 1,\n        y = -0.15,\n        showarrow = FALSE,\n        xref = \"paper\",\n        yref = \"paper\",\n        xanchor = \"right\",\n        yanchor = \"auto\"\n      )\n    )\n  )\n\np_plotly\n\n\n\n\n\n\n\n\nCódigo\n\ndatos4&lt;- \"./datos/datos4.csv\"\ndatos4&lt;- rio::import(datos4)\n\np4&lt;- ggplot(datos4, aes(x = reorder(Parámetro, -Cuantia_media), y = Cuantia_media)) + geom_bar(stat = \"identity\", fill = \"skyblue\") +  \n  labs(title = \"Precio del Alquiler por provincia (2018)\",\n       x = \"Ciudad\",\n       y = \"Precio medio Alquiler\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\np4\n\n\n\n\n\n\n\n\n\nEn este contexto, el gráfico proporciona una visión detallada del precio medio del alquiler en diferentes provincias, destacando variaciones significativas en el coste mensual. En la provincia de Madrid, por ejemplo, se registra el precio más elevado, alcanzando los 819 euros mensuales, seguido de cerca por Barcelona con un promedio de 769 euros al mes. Por otro lado, en la provincia de Lugo se observa el precio más bajo, situándose en 336 euros al mes.\n\n\nCódigo\ndatos_europa&lt;- \"./datos/datos_europa.csv\"\ndatos_europa&lt;- rio::import(datos_europa)\ndatos_europa&lt;- datos_europa %&gt;% select(tenure,geo,OBS_VALUE)\n\ncategorias&lt;- c(\"OWN_L\" = \"Propietario,\\n con hipoteca o préstamo\", \"OWN_NL\" = \"Propietario,\\n sin hipoteca ni préstamo de vivienda pendiente\", \"RENT_FR\" = \"Inquilino,\\n alquiler a precio reducido o gratis\", \"RENT_MKT\" = \"Inquilino,\\n alquiler a precio de mercado\")\n\np&lt;- ggplot(datos_europa, aes(x = geo, y = OBS_VALUE,  fill = tenure)) +\n  geom_col( position = \"stack\", color = \"white\") +\n  labs(title = \"Distribución de la población por régimen de tenencia(2018)\", \n       x = \"País\", y = \"%\", caption = \"Fuente:Eurostat\") +\n  ggthemes::theme_stata() +\n  theme(\n    plot.title = element_text(size = 16, hjust = 0.5, face = \"bold\"),\n    legend.key.size = unit(0.2,\"cm\"),\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    legend.title = element_text(face = \"bold\"),\n    legend.position = \"bottom\",\n    panel.grid.major.y = element_blank(),\n    panel.grid.minor.y = element_blank()) +\n  scale_fill_brewer(palette = \"Set3\") \np + scale_fill_manual(values = c(\"OWN_L\" = \"blue\", \"OWN_NL\" = \"red\", \"RENT_FR\" = \"yellow\", \"RENT_MKT\" =\"green\" ), labels = categorias) + guides(fill = guide_legend( keywidth = 0.5, keyheight = 0.5, title.theme = element_text(size = 5), label.theme = element_text(size = 5)))\n\n\n\n\n\n\n\n\n\nEn 2018, la distribución de viviendas en los Estados miembros de la Unión Europea mostró variaciones significativas. La mayoría de la población residía en propiedades, con tasas que iban desde el 51,4% en Alemania hasta el 96,4% en Rumanía. Curiosamente, Suiza destacó como una excepción, con un notable 57,5% de la población optando por el alquiler. En países como los Países Bajos (60,5%) y Suecia (51,7%), así como en Islandia (63,9%) y Noruega (60,1%), más del 50% de la población vivía en propiedades financiadas mediante préstamos o hipotecas. En cuanto al alquiler a precio de mercado, en 2018, menos del 10% de la población en once Estados miembros de la UE optaba por esta opción. Alemania (40,8%) y Dinamarca (39,4%) presentaban tasas significativamente más altas, mientras que Suiza lideraba con un notable 51,1%. A nivel general, la proporción de población que residía en viviendas de alquiler protegido o disfrutaba de viviendas gratuitas fue inferior al 20% en todos los Estados miembros de la UE y en los ocho países no miembros para los cuales se disponía de datos, sugiriendo una preferencia generalizada por la propiedad o formas de alquiler más estables.\n\n\nCódigo\n######gráfico pastel\n\n##Cargamos los datos \nd_tenencia&lt;- \"./datos/regimen_tenencia.csv\"\nd_tenencia&lt;- rio::import(d_tenencia)\n\n##Cambiamos la coma por el punto en la columna Total\nd_tenencia &lt;- d_tenencia%&gt;% mutate(Total = stringr::str_replace(Total, \",\" , \".\" ))\nstr(d_tenencia)\n#&gt; 'data.frame':    1120 obs. of  4 variables:\n#&gt;  $ CCAA            : chr  \"Total Nacional\" \"Total Nacional\" \"Total Nacional\" \"Total Nacional\" ...\n#&gt;  $ Regimen_tenencia: chr  \"Propiedad\" \"Propiedad\" \"Propiedad\" \"Propiedad\" ...\n#&gt;  $ Periodo         : int  2017 2016 2015 2014 2013 2012 2011 2010 2009 2008 ...\n#&gt;  $ Total           : chr  \"76.7\" \"77.1\" \"77.3\" \"78\" ...\n\nd_tenencia$Total &lt;- as.numeric(d_tenencia$Total)\n\nPropiedad &lt;- d_tenencia%&gt;%\n  filter (Regimen_tenencia == \"Propiedad\") %&gt;%\n  filter (CCAA == \"Total Nacional\") %&gt;%\n  group_by(Periodo, Regimen_tenencia) \n\nAlquiler_precio_mercado&lt;- d_tenencia %&gt;%\n  filter(Regimen_tenencia == \"Alquiler a precio de mercado\") %&gt;%\n  group_by(Periodo, Regimen_tenencia)\n\nAlquiler_inferior_precio&lt;- d_tenencia %&gt;%\n  filter(Regimen_tenencia == \"Alquiler inferior al precio de mercado\") %&gt;%\n  group_by(Periodo, Regimen_tenencia)\n\nCesion&lt;- d_tenencia %&gt;% \n  filter(Regimen_tenencia == \"Cesión\") %&gt;%\n  group_by(Periodo, Regimen_tenencia)\n\ndf_combined &lt;- Propiedad %&gt;%\n  full_join(Alquiler_precio_mercado) %&gt;%\n  full_join(Alquiler_inferior_precio) %&gt;%\n  full_join(Cesion) %&gt;% filter(CCAA==\"Total Nacional\") \n\ndf_ordenado &lt;- df_combined %&gt;% \n  arrange(Periodo)\n\ndf_04 &lt;- df_ordenado %&gt;%\n  filter (Periodo == 2004)%&gt;%\n  filter(CCAA ==\"Total Nacional\") %&gt;%\n  mutate(Total_2decimales = round(Total, 2),\n         csum = rev(cumsum(rev(Total_2decimales))),\n         posicion = Total_2decimales/2 + lead(csum, 1))%&gt;%\n  mutate(posicion = ifelse(is.na(posicion), Total_2decimales/2, posicion))\n\ndf_08 &lt;- df_ordenado %&gt;%\n  filter (Periodo == 2008)%&gt;%\n  filter(CCAA== \"Total Nacional\") %&gt;%\n  mutate(Total_2decimales = round(Total, 2),\n         csum = rev(cumsum(rev(Total_2decimales))),\n         posicion = Total_2decimales/2 + lead(csum, 1))%&gt;%\n  mutate(posicion = ifelse(is.na(posicion), Total_2decimales/2, posicion))\n\ndf_10 &lt;- df_ordenado %&gt;%\n  filter (Periodo == 2010)%&gt;%\n  filter(CCAA == \"Total Nacional\") %&gt;%\n  mutate(Total_2decimales = round(Total, 2),\n         csum = rev(cumsum(rev(Total_2decimales))),\n         posicion = Total_2decimales/2 + lead(csum, 1))%&gt;%\n  mutate(posicion = ifelse(is.na(posicion), Total_2decimales/2, posicion))\n\ndf_17 &lt;- df_ordenado %&gt;%\n  filter (Periodo == 2017)%&gt;%\n  filter(CCAA== \"Total Nacional\")%&gt;%\n  mutate(Total_2decimales = round(Total, 2),\n         csum = rev(cumsum(rev(Total_2decimales))),\n         posicion = Total_2decimales/2 + lead(csum, 1))%&gt;%\n  mutate(posicion = ifelse(is.na(posicion), Total_2decimales/2, posicion))\n\nlibrary(ggrepel)\n\np_2004 &lt;- ggplot(df_04, aes(x = \"\", y = Total, fill = fct_inorder(Regimen_tenencia))) +\n  geom_col(width = 1) +\n  labs(fill = NULL) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"Set3\") +\n  geom_text(data = df_04,\n            aes(y = Total, label = paste0(Total, \"%\")),\n            position = position_stack(vjust = 0.5),\n            size = 4, show.legend = FALSE) + \n  theme_void() +\n  theme(legend.position = \"none\")\n\n\np_2008 &lt;- ggplot(df_08, aes(x = \"\", y = Total, fill = fct_inorder(Regimen_tenencia))) +\n  geom_col(width = 1) +\n  labs(fill = NULL) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"Set3\")  +\n  geom_text(data = df_08,\n            aes(y = Total, label = paste0(Total, \"%\")),\n            position = position_stack(vjust = 0.5),  # Ajuste vertical\n            size = 4, show.legend = FALSE) +\n  theme_void()\n\np_2010 &lt;- ggplot(df_10, aes(x = \"\", y = Total, fill = fct_inorder(Regimen_tenencia))) +\n  geom_col(width = 1) +\n  labs(fill = NULL) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"Set3\") +\n  geom_text(data = df_10,\n            aes(y = Total, label = paste0(Total, \"%\")),\n            position = position_stack(vjust = 0.5),  # Ajuste vertical\n            size = 4, show.legend = FALSE) +\n  theme_void() +\n  theme(legend.position = \"none\")\n\np_2017&lt;- ggplot(df_17, aes(x = \"\", y = Total, fill = fct_inorder(Regimen_tenencia))) +\n  geom_col(width = 1) +\n  labs(fill = NULL) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"Set3\") +\n  geom_text(data = df_17,\n            aes(y = Total, label = paste0(Total, \"%\")),\n            position = position_stack(vjust = 0.5),\n            size = 4, show.legend = FALSE) +\n  theme_void() +\n  theme(legend.position = \"none\")\n\nlibrary(patchwork)\n\ncombined_plot &lt;- p_2004 + p_2008 + p_2010 + p_2017 +\n  plot_annotation(\n    title = \"Hogares por régmien de tenencia de la vivienda (%)\",\n    subtitle = \"(2004,2008,2010,2017)\",\n    caption = \"Fuente: INE\"\n  )\n\ncombined_plot\n\n\n\n\n\n\n\n\n\nEn el siguiente gráfico, se presenta una representación visual de la evolución de los regímenes de tenencia de viviendas a lo largo de los años, abarcando desde el año 2004 hasta el año 2017. Durante este período temporal, se observa una tendencia marcada en la dinámica de los distintos tipos de tenencia. En particular, se destaca la disminución progresiva de las viviendas en propiedad, a la par que se registra un aumento significativo en las viviendas en régimen de alquiler a precio de mercado. Asimismo, se observa una disminución tanto en las viviendas en alquiler a precio inferior al de mercado como en las cesiones de viviendas a lo largo de los años. Es relevante señalar que, a pesar de estas variaciones, las viviendas en propiedad continúan representando la gran mayoría del total de viviendas a lo largo de los años, consolidándose como la opción dominante. En contraste, los alquileres de viviendas a precio inferior al de mercado constituyen una minoría, indicando una preferencia generalizada por la tenencia en propiedad."
  },
  {
    "objectID": "web_alquileres.html#análisis-por-comunidades",
    "href": "web_alquileres.html#análisis-por-comunidades",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "ANÁLISIS POR COMUNIDADES",
    "text": "ANÁLISIS POR COMUNIDADES\n\n\nCódigo\ncoloresg1 &lt;- c(\"#66CDAA\",\"#A52A2A\",\"#53868B\",\"#458B00\")\ncoloresg2 &lt;- c(\"darkgoldenrod3\",\"#9A32CD\", \"deeppink3\", \"#EEEE00\")\ncoloresg3 &lt;- c(\"#8B7E66\", \"#00FF7F\", \"#7FFF00\",\"#00BFFF\",\"#FF3030\", \"darkslategray\")\ncoloresg4 &lt;- c(\"#EEC900\",\"darkseagreen4\", \"#CD5555\", \"#EEA2AD\")\n\n\ndf_cca1 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO, values_from = ÍNDICE) %&gt;%\n  filter(COMUNIDAD %in% c(\"06 Cantabria\", \"02 Aragón\", \"03 Principado de Asturias\", \"12 Galicia\"))\n\ndf_cca2 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO, values_from = ÍNDICE) %&gt;%\n  filter(COMUNIDAD %in% c(\"07 Castilla y León\", \"08 Castilla La Mancha\", \"15 La Rioja\", \"11 Extremadura\"))\n\ndf_cca3 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO, values_from = ÍNDICE) %&gt;%\n  filter(COMUNIDAD %in% c(\"10 Comunitat Valenciana\", \"01 Andalucía\", \"13 Comunidad de Madrid\", \"14 Región de Murcia\", \"09 Cataluña\"))\n\ndf_cca4 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO, values_from = ÍNDICE) %&gt;%\n  filter(COMUNIDAD %in% c(\"16 Ceuta\", \"17 Melilla\", \"04 Illes Balears\", \"05 Canarias\"))\n\n\nCCAAg1&lt;- ggplot(df_cca1,\n              aes(\n                AÑO,\n                General,\n                color = COMUNIDAD)) +\n  geom_line(size = 0.95) +\n  scale_color_manual(values = coloresg1) + \n  labs(\n    y = \"IPC\") +\n  ggthemes::theme_stata() \n  \nCCAAg2&lt;- ggplot(df_cca2,\n                aes(\n                  AÑO,\n                  General,\n                  color = COMUNIDAD)) +\n  geom_line(size = 0.95) +\n  scale_color_manual(values = coloresg2) + \n  labs(\n    color = NULL,\n    y = \"IPC\") +\n  ggthemes::theme_stata()\n\nCCAAg3&lt;- ggplot(df_cca3,\n                aes(\n                  AÑO,\n                  General,\n                  color = COMUNIDAD)) +\n  geom_line(size = 0.95) +\n  scale_color_manual(values = coloresg3) + \n  labs(\n  color = NULL,\n  y = \"IPC\") +\n  ggthemes::theme_stata() \n\nCCAAg4&lt;- ggplot(df_cca4,\n                aes(\n                  AÑO,\n                  General,\n                  color = COMUNIDAD)) +\n  geom_line(size = 0.95) +\n  scale_color_manual(values = coloresg4) + \n  labs(\n  color = NULL,\n  y = \"IPC\") +\n  ggthemes::theme_stata() \n\nPLOT_CONJUNTO &lt;- ((CCAAg1 + CCAAg2) / (CCAAg3 + CCAAg4)) +\n  plot_layout(guides = \"collect\") +\n  theme(\n    plot.title.position = \"collect\")  +\n  plot_annotation(\n    title = \"Evolución del ÍPC general de \\n precios de alquiler por CCAA agrupadas (2015 = 100)\",\n    caption = \"Fuente: INE\") & ggthemes::theme_stata() & theme(\n      legend.position = \"right\",\n      legend.direction = \"vertical\",\n      legend.text = element_text(size = 5) ,\n      legend.key.size = unit(0.5,\"cm\"),\n      legend.title = element_text(size = 5),\n      plot.title = element_text(size = 12, hjust = 0.05))\n\nPLOT_CONJUNTO\n\n\n\n\n\n\n\n\n\n\n\nCódigo\n#######MAPA\nlibrary(sf)\nlibrary(tidyverse)\nlibrary(pjpv.curso.R.2022)\n\n\n###cargamos los datos \ndatos_c&lt;- \"./datos/prueba.csv\"\ndatos_c&lt;- rio::import(datos_c)\n\n### En la columna Total queremos poner un punto en vez de una coma \n\ndatos_c &lt;- datos_c%&gt;% mutate(Total = stringr::str_replace(Total, \",\" , \".\" ))\n\n#- Cambiamos el nombre de las columnas \n\ndf_c&lt;- datos_c %&gt;% rename(Indice_precio = Total) %&gt;% rename(CCAA = Comunidades_Autonomas)\n\n###Separamos la columna de CCAA en dos Columnas, una que muestre el código y otra el nombre de la Comunidad Autonoma  \n\ndf_c &lt;- df_c %&gt;%\n  tidyr::separate(CCAA, sep = \" \",\n                  into = c(\"ine_ccaa\", \"ine_ccaa.n\"), extra = \"merge\")\ndf_c&lt;-  drop_na(df_c) #quitamos el total nacional, ya que no se van a utilizar\n\ndf_c&lt;- df_c %&gt;% filter(General == \"General\") %&gt;% filter( Índices_tasas ==\"Media anual\") %&gt;% filter(Periodo == \"2022\") ##cogemos las viviendas generales, la media anual y elegimos el año más reciente que es 2022\n\n\n###Cargamos las geometrías y elegimos las variables que nos interesan\ndf_geo_prov &lt;- pjpv.curso.R.2022::LAU2_prov_2020_canarias\ndf_geo_prov &lt;- df_geo_prov %&gt;% select(ine_prov, ine_prov.n, ine_ccaa, ine_ccaa.n)\n\n##Agregamos geometrías de las Comunidades Autonomas \n\ndf_geo_ccaa &lt;- df_geo_prov %&gt;% group_by(ine_ccaa, ine_ccaa.n) %&gt;% summarize()\ndf_ok &lt;- left_join(df_geo_ccaa, df_c, by = c(\"ine_ccaa\" = \"ine_ccaa\"))\nnames(df_ok)\n#&gt; [1] \"ine_ccaa\"      \"ine_ccaa.n.x\"  \"geometry\"      \"ine_ccaa.n.y\" \n#&gt; [5] \"General\"       \"Índices_tasas\" \"Periodo\"       \"Indice_precio\"\n\n##Calculamos los Centroides\nlibrary(sf)\ndf_geo_ccaa &lt;- cbind(df_geo_ccaa, st_coordinates(st_centroid(df_geo_ccaa$geometry)))\n\n##Juntamos los datos de los precios de los alquileres con las geometrías \ndf_ok &lt;- left_join(df_geo_ccaa, df_c, by = c(\"ine_ccaa\" = \"ine_ccaa\"))\ndf_ok$Indice_precio &lt;- as.numeric(df_ok$Indice_precio)\np &lt;- ggplot() + \n  geom_sf(data = df_ok, \n          aes(geometry = geometry, fill = Indice_precio), \n          color = \"white\", size = 0.09) + \n  coord_sf(xlim = c(-10.00, 5.00), ylim = c(35, NA), expand = TRUE) +\n  scale_fill_continuous(low=\"white\",\n                        high=\"navyblue\",\n                        limits = c(100,160)) +\n  theme_minimal() + \n  theme(panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank()) +\n  theme(axis.title.x=element_blank(),\n        axis.text.x=element_blank(),\n        axis.ticks.x=element_blank(),\n        axis.title.y=element_blank(),\n        axis.text.y=element_blank(),\n        axis.ticks.y=element_blank()) + \n  labs(title = \"Índice de Precios de la Vivienda por Comunidades Autónomas\", \n       subtitle = \"(2022)\",\n       fill = \"Índice\")\np\n\n\n\n\n\n\n\n\n\nEn el análisis gráfico previo (evolución de los regímenes de tenencia), hemos observado una marcada tendencia a lo largo de los años: La proporción de viviendas en propiedad ha disminuido a la par que las viviendas en alquiler han experimentado un aumento significativo. Esta transformación puede atribuirse principalmente al vertiginoso incremento de los precios de la vivienda, que ha afectado negativamente nuestro poder adquisitivo. La consecuencia directa de este fenómeno es la dificultad creciente para adquirir una vivienda propia, obligando a un número cada vez mayor de personas a optar por la alternativa del alquiler. Con el objetivo de profundizar en estas disparidades, hemos confeccionado un mapa que ilustra el Índice de Precios de la Vivienda por Comunidades para el año 2022. Este enfoque nos brinda la oportunidad de examinar las divergencias en los precios de la vivienda a nivel regional. En la observación detallada del mapa, se destaca que las Comunidades Autónomas con los precios de vivienda más elevados son la Comunidad de Madrid, Islas Baleares y Cataluña, las. Por otro lado, aquellas regiones donde el coste de la vivienda es más bajo incluyen Extremadura, Castilla-La Mancha y Navarra. Este análisis geográfico proporciona una visión más completa de las disparidades en los precios de la vivienda, destacando las áreas donde la propiedad se presenta como una inversión más onerosa y aquellas donde la adquisición de una vivienda podría ser más accesible. La información recopilada sugiere una correlación entre el aumento de los precios de la vivienda y el cambio en la tendencia hacia el alquiler, reflejando las complejidades económicas y sociales que inciden en las decisiones de vivienda de la población.\n\n\nCódigo\n##Otro Mapa pero ahora del Indice de Precios de Alquiler \ndatos_alquiler&lt;- \"./datos/59057.csv\"\ndatos_alquiler&lt;- rio::import(datos_alquiler)\n\n##Cambiamos la coma por el punto en la columna Total\ndatos_alquiler&lt;- datos_alquiler%&gt;% mutate(Total = stringr::str_replace(Total, \",\" , \".\" ))\n\n##Separamos la columna de CCAA en dos Columnas, una que muestre el código y otra el nombre de la Comunidad Autonoma  \n\ndatos_alquiler &lt;- datos_alquiler %&gt;%\n  tidyr::separate(CCAA, sep = \" \",\n                  into = c(\"ine_ccaa\", \"ine_ccaa.n\"), extra = \"merge\") \n\n##Quitamos Total Nacional (que no lo necesitamos)\n\ndatos_alquiler&lt;- drop_na(datos_alquiler)\n\n##Cogemos las variables que nos interesan, filtramos por Indice y filtramos por el año 2021(es el más reciente)\n\ndatos_alquiler&lt;- datos_alquiler %&gt;%\n  filter(Tamaño == \"Total\") %&gt;%\n  filter(Dato ==\"Índice\") %&gt;% \n  filter(Periodo == 2021) %&gt;%\n  select(ine_ccaa, ine_ccaa.n, Total)\n\n###Cargamos las geometrías y elegimos las variables que nos interesan\ndf_geo_prov &lt;- pjpv.curso.R.2022::LAU2_prov_2020_canarias\ndf_geo_prov &lt;- df_geo_prov %&gt;% select(ine_prov, ine_prov.n, ine_ccaa, ine_ccaa.n)\n\n##Agregamos geometrías de las Comunidades Autonomas \n\ndf_geo_ccaa &lt;- df_geo_prov %&gt;% group_by(ine_ccaa, ine_ccaa.n) %&gt;% summarize() \ndf_ok &lt;- left_join(df_geo_ccaa, datos_alquiler, by = c(\"ine_ccaa\" = \"ine_ccaa\"))\nnames(df_ok)\n#&gt; [1] \"ine_ccaa\"     \"ine_ccaa.n.x\" \"geometry\"     \"ine_ccaa.n.y\" \"Total\"\n\n##Calculamos los Centroides\nlibrary(sf)\ndf_geo_ccaa &lt;- cbind(df_geo_ccaa, st_coordinates(st_centroid(df_geo_ccaa$geometry)))\n\n##Juntamos los datos de los precios de los alquileres con las geometrías \ndf_ok &lt;- left_join(df_geo_ccaa, datos_alquiler, by = c(\"ine_ccaa\" = \"ine_ccaa\"))\n\n##Gráfico\ndf_ok$Total &lt;- as.numeric(df_ok$Total)\np &lt;- ggplot() + \n  geom_sf(data = df_ok, \n          aes(geometry = geometry, fill = Total), \n          color = \"white\", size = 0.09) + \n  coord_sf(xlim = c(-10.00, 5.00), ylim = c(35, NA), expand = TRUE) +\n  scale_fill_continuous(low=\"white\",high=\"orange\") +\n  theme_minimal() + \n  theme(panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank()) +\n  theme(axis.title.x=element_blank(),\n        axis.text.x=element_blank(),\n        axis.ticks.x=element_blank(),\n        axis.title.y=element_blank(),\n        axis.text.y=element_blank(),\n        axis.ticks.y=element_blank()) + \n  labs(title = \"Índice de Precios del Alquiler  por Comunidades Autónomas\", \n       subtitle = \"(2021)\",\n       fill = \"Índice\")\np\n\n\n\n\n\n\n\n\n\nEn la actualidad, la disparidad en los precios de alquiler entre distintas Comunidades Autónomas ha emergido como un tema de gran controversia. Con el objetivo de visualizar y comprender estas divergencias, hemos desarrollado un mapa interactivo que exhibe el Índice de Precio de Alquiler por Comunidades Autónomas durante el año 2021. Los resultados del análisis revelan que existen notables variaciones en los costes de alquiler a lo largo y ancho de España. En particular, Comunidades Autónomas como Asturias, Castilla y León, Galicia y Extremadura destacan por presentar precios de alquiler más accesibles. Este fenómeno podría estar vinculado a factores como una menor demanda relativa, una oferta más abundante o características socioeconómicas específicas de estas regiones. Contrastando con esta tendencia, las Comunidades Autónomas de las Islas Baleares, la Comunidad Valenciana, Cataluña, las Islas Canarias, Castilla La Mancha y la Comunidad Madrid se posicionan como las zonas con precios de alquiler más elevados. En estos casos, factores como la alta demanda derivada de zonas turísticas, una robusta actividad económica, y la concentración de empleo y servicios urbanos podrían estar contribuyendo a esta tendencia al alza en los precios."
  },
  {
    "objectID": "web_alquileres.html#la-ley-de-alquileres",
    "href": "web_alquileres.html#la-ley-de-alquileres",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "LA LEY DE ALQUILERES",
    "text": "LA LEY DE ALQUILERES"
  },
  {
    "objectID": "web_alquileres.html#esto-ocurre-sólo-en-españa",
    "href": "web_alquileres.html#esto-ocurre-sólo-en-españa",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "¿ESTO OCURRE SÓLO EN ESPAÑA?",
    "text": "¿ESTO OCURRE SÓLO EN ESPAÑA?"
  },
  {
    "objectID": "web_alquileres.html#conclusión",
    "href": "web_alquileres.html#conclusión",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "CONCLUSIÓN",
    "text": "CONCLUSIÓN\nEn conclusión, la dificultad para acceder a una vivienda independiente se ha convertido en un problema creciente, evidenciado por el aumento de adultos jóvenes que optan por quedarse en casa de sus padres a pesar de tener un salario.\nAl analizar la evolución del salario promedio en España a lo largo de las últimas dos décadas, se observa que, aunque ha experimentado periodos de crecimiento, este crecimiento no ha sido suficiente para mantener el ritmo de los aumentos en los precios de bienes y servicios esenciales. En particular, los precios de la vivienda y otros elementos importantes, como la educación, han experimentado aumentos notables superando el crecimiento de los salarios.\nEn cuanto al tema de la vivienda destaca la preferencia generalizada por la propiedad en España, pero se observa una tendencia al alza en la proporción de personas que optan por el alquiler. Esta transformación se atribuye en gran medida al aumento vertiginoso de los precios de la vivienda, lo que ha afectado negativamente el poder adquisitivo y ha llevado a un número creciente de personas a elegir la opción del alquiler.\nEl análisis de la evolución de los precios de alquiler por regiones revela disparidades significativas, con ciertas Comunidades Autónomas presentando precios mucho más elevados que otras. Este fenómeno puede estar relacionado con factores como la demanda relativa, la oferta de viviendas y características socioeconómicas específicas de cada región.\nEn resumen, la dificultad para acceder a una vivienda independiente en España se ve exacerbada por el desajuste entre el crecimiento de los salarios y el aumento de los precios de la vivienda y otros servicios esenciales. La preferencia por la propiedad persiste, pero el alquiler se ha vuelto más relevante, especialmente en ciertas regiones con precios elevados. Este panorama presenta desafíos significativos para la emancipación de los jóvenes y plantea interrogantes sobre la eficiencia del mercado de viviendas en el país."
  },
  {
    "objectID": "web_alquileres.html#evolucion-de-los-alquileres-característicasç",
    "href": "web_alquileres.html#evolucion-de-los-alquileres-característicasç",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "EVOLUCION DE LOS ALQUILERES: CARACTERÍSTICASç",
    "text": "EVOLUCION DE LOS ALQUILERES: CARACTERÍSTICASç\n\n\nCódigo\ndatos &lt;- \"./datos/DATOS_VIVIENDA.xlsx\"\ninfo &lt;- rio::import(datos)\ndf2 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO,\n              values_from = ÍNDICE)\ndf &lt;- info %&gt;%\n  pivot_wider(names_from = AÑO,\n              values_from = ÍNDICE)\n\ndf3 &lt;- info %&gt;%\n  filter(COMUNIDAD == \"Total nacional\")\n\np&lt;- ggplot(df3,\n       aes(\n  AÑO, \n  ÍNDICE,\n  color = TAMAÑO)) +\n  geom_line(size = 0.95) +\n  ggthemes::theme_stata()\n  \np + labs(\n  title = \"Evolución del Índice general de precios de alquiler por tamaño de vivienda (2015 = 100).\",\n  subtitle = \"serie 2011 - 2021\")"
  },
  {
    "objectID": "srgtdbgxbgfxcbxn.html",
    "href": "srgtdbgxbgfxcbxn.html",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "",
    "text": "El tema del precio de la vivienda, en especial de los alquileres, es de gran preocupación para una gran parte de la población y más aún para los jóvenes. Son incontables las veces que hemos escuchado a la gente por la calle quejarse de lo caro que es permitirse una vivienda y más aún independizarse, son cada vez más el número de adultos jóvenes (entre 18 y 30 años) los que deciden quedarse viviendo en casa de sus padres aún cobrando un salario. Esto no es sorpresa alguna, pensemos que para un individuo el hecho de vivir con plena independencia de sus padres requiere la capacidad de costearse una serie de bienes y servicios imprescindibles tales como:\n\nSu cesta de compra habitual.\nCostes de carburante o transportes públicos.\nEl coste de la hipoteca o el alquiler de la vivienda en la que habita.\nCoste de servicios recurrentes como el gimnasio, peluquero/barbero…\nGastos en ocio (como el consumo de bebidas alcohólicas o refrescos, cine, festivales o discotecas, viajes…)\n\n\n\nVamos a tomar como referencia el salario promedio en España y su evolución a lo largo de una serie temporal ( en este caso 2006 -2020).\n\n\nCódigo\nlibrary(gganimate)\nlibrary(tidyverse)\nlibrary(plotly)\nlibrary(patchwork)\n\nSALARIOS &lt;- rio::import(\"./datos/datos_salariomedio.csv\") %&gt;%\n  select(Año, Salariomedio) %&gt;%\n  drop_na() %&gt;%\n  mutate(Variacion =((Salariomedio - lag(Salariomedio))/lag(Salariomedio))*100)\n\n\nEvo_salarios &lt;- ggplot(SALARIOS, aes(Año, Salariomedio)) + geom_line(aes(group = 1), color = \"aquamarine4\", size = 0.95) + ggthemes:: theme_stata()\n\n  \nEvo_salarios + labs(\n  title = \"Evolución del salario medio anual.\",\n  subtitle = \"Serie 2006-2020.\",\n  y = \"Salario medio (miles de euros)\",\n  caption = \"Fuente: Epdata\")\n\n\n\n\n\n\n\n\n\nComo se puede observar en la gráfica de arriba, podemos identificar 2 etapas de fuerte crecimiento del salario promedio:\n\nDe 2006 a 2008\nDe 2014 a 2019\n\nLa primera es atribuile al periodo de fuerte expansión económica que experimentó la economía española durante el principio de los 2000 junto con el boom del ladrillo, mientras que la segunda se debe al periodo de fuerte recuperación económica tras los años de crisis.\nPor otro lado, se puede observar una caída durante el periodo 2011 - 2014 debido al estallido de la crisis de 2008, se puede remarcar en ese mismo periodo (2008-2011) el estancamiento del salario promedio. No obstante, conviene visualizar estos datos también en tasas de crecimiento:\n\n\nCódigo\n\nVar_Salarios &lt;- ggplot(SALARIOS, aes(Año, Variacion)) + geom_line(aes(group = 1), color = \"#53868B\", size = 0.95) + ggthemes:: theme_stata()\n\nVar_Salarios + labs(\n  title = \"Crecimiento del salario medio.\",\n  subtitle = \"Serie 2006-2020.\",\n  y = \"Variación en porcentaje\",\n  caption = \"Fuente: Epdata\")\n\n\n\n\n\n\n\n\n\nTeniendo en cuenta la evolución en tasas podemos fijarnos que la primera etapa de crecimiento del salario español mostraba una tendencia decreciente mientras que la segunda todo lo contrario. Las razones de este comportamiento son las mismas, ya que en el boom la economía española estaba creciendo por encima de su potencial y comenzaba a estancarse mientras que en un periodo de recuperación al estar alejados de nuestro potencial la tasa de crecimiento muestra tendencia creciente. Consideramos que es bastante obvia la caída del salario en 2020 debido a la pandemia covid, no es necesario desarrollar en este aspecto.\nVolviendo a la pregunta principal con lo que hemos visto, si el crecimiento del salario medio español a lo largo de los últimos 20 años es similar o superior al del IPC, podemos afirmar que será capaz de cubrir los gastos necesarios para un individuo mencionados al principio. Sin embargo, no podemos asegurar esto último sin informarnos acerca del crecimiento de los precios de dichos bienes y servicios.\n\n\nCódigo\n\nIPC&lt;- rio::import(\"./datos/ipc_bueno.csv\")\n\ndf_IPC &lt;- IPC %&gt;%\n  rename(IPC = indice_precios_consumo_tasas_variacion) %&gt;%\n  select(indicadores,grupos_coicop_nombre,provincias_nombre,periodos_id,IPC) %&gt;%\n  filter(periodos_id %in% c(\"2002M01\",\"2003M01\",\"2004M01\",\"2005M01\",\"2006M01\",\"2007M01\",\"2008M01\",\"2009M01\",\"2010M01\",\"2011M01\",\"2012M01\",\"2013M01\",\"2014M01\",\"2015M01\",\"2016M01\"))\n\n\ndf_IPC_valores &lt;- df_IPC %&gt;%\n  filter(indicadores == \"Índices\") %&gt;%\n  filter(provincias_nombre == \"España\") %&gt;%\n  mutate(periodos_id = as.Date(paste0(substr(periodos_id, 1, 4), substr(periodos_id, 6, 7), \"-01\"), format = \"%Y%m-%d\"))\n\ndf_IPC_tasas &lt;- df_IPC %&gt;%\n  filter(indicadores == \"Tasas de variación anual\") %&gt;%\n  filter(provincias_nombre == \"España\")\n\nplot_IPC_valores &lt;- ggplot(df_IPC_valores, aes(periodos_id, IPC, group = grupos_coicop_nombre, color = grupos_coicop_nombre)) + \n  geom_line(size = 0.9) +\n  ggthemes::theme_stata() +\n  theme(\n    axis.text.x = element_text(\n      angle = 75, hjust = 1, vjust = 1, size = 5, margin = margin(\n        r = 5, b = 5, l = 5)),\n    axis.text.y = element_text(size = 5),\n    panel.spacing = unit(0.75, \"lines\"),\n    legend.text = element_text(size = 5),\n    legend.title = element_text(size = 8),\n    legend.key.size = unit(1, \"cm\"),\n    legend.key.height = unit(1, \"cm\"),\n    legend.key.width = unit(0.1,\"cm\"),\n    legend.direction = \"vertical\",\n    legend.position = \"none\") +\n  labs(\n    title = \"Evolución IPC por grupos COICOP\",\n    subtitle = \"Serie 2002 - 2016\",\n    x = \"Periodo\",\n    y = \"IPC\",\n    caption = \"Fuente: datos.gob.es (Gobierno de España)\",\n    color = \"Grupos COICOP\"\n  ) +\n  facet_wrap(\n    vars(grupos_coicop_nombre),\n    nrow = 4,\n    ncol = 4,\n    labeller = labeller(grupos_coicop_nombre = function(label) str_wrap(label, width = 20))) +\n  theme(strip.text = element_text(size = 8))\n  \nplot_animado &lt;- plot_IPC_valores + transition_reveal(periodos_id) + view_follow(fixed_y = TRUE)\n\nplot_animado\n\n\n\n\n\n\n\n\n\nEn la gráfica animada de arriba se nos ilustra el crecimiento del IPC en distintos grupos de bienes/servicios de consumo. Al mostrar una evolución de precios a lo largo de un periodo de 14 años, lo normal es que haya un crecimiento en el nivel de precios sostenido y a un ritmo bajo. No obstante, llama la atención el acusado crecimiento de los precios para las bebidas alcohólicas y tabaco (cuyas demandas se caracterizan por ser inelásticas) Y la enseñanza y la vivienda, debido a que su crecimiento se acelera al final del periodo. Para ser más precisos, observémos el comportamiento en tasas de crecimiento:\n\n\nCódigo\nlibrary(gganimate)\nlibrary(tidyverse)\nIPC&lt;- rio::import(\"./datos/ipc_bueno.csv\")\n\ndf_IPC &lt;- IPC %&gt;%\n  rename(IPC = indice_precios_consumo_tasas_variacion) %&gt;%\n  select(indicadores,grupos_coicop_nombre,provincias_nombre,periodos_id,IPC) %&gt;%\n  filter(periodos_id %in% c(\"2002M01\",\"2003M01\",\"2004M01\",\"2005M01\",\"2006M01\",\"2007M01\",\"2008M01\",\"2009M01\",\"2010M01\",\"2011M01\",\"2012M01\",\"2013M01\",\"2014M01\",\"2015M01\",\"2016M01\"))\n\n\ndf_IPC_valores &lt;- df_IPC %&gt;%\n  filter(indicadores == \"Índices\") %&gt;%\n  filter(provincias_nombre == \"España\") %&gt;%\n  mutate(periodos_id = as.Date(paste0(substr(periodos_id, 1, 4), substr(periodos_id, 6, 7), \"-01\"), format = \"%Y%m-%d\"))\n\ndf_IPC_tasas &lt;- df_IPC %&gt;%\n  filter(indicadores == \"Tasas de variación anual\") %&gt;%\n  filter(provincias_nombre == \"España\") %&gt;%\n  mutate(periodos_id = as.Date(paste0(substr(periodos_id, 1, 4), substr(periodos_id, 6, 7), \"-01\"), format = \"%Y%m-%d\"))\n\n\nplot_IPC_tasas &lt;- ggplot(df_IPC_tasas, aes(periodos_id, IPC, group = grupos_coicop_nombre, color = grupos_coicop_nombre)) + \n  geom_line(size = 0.9) +\n  ggthemes::theme_stata() +\n  theme(\n    axis.text.x = element_text(\n      angle = 75, hjust = 1, vjust = 1, size = 5, margin = margin(\n        r = 5, b = 5, l = 5)),\n    axis.text.y = element_text(size = 5),\n    panel.spacing = unit(0.75, \"lines\"),\n    legend.title = element_text(size = 8),\n    legend.key.size = unit(1, \"cm\"),\n    legend.key.height = unit(1, \"cm\"),\n    legend.key.width = unit(0.1,\"cm\"),\n    legend.direction = \"vertical\",\n    legend.position = \"right\") +\n  labs(\n    title = \"Evolución IPC en tasas por grupos COICOP\",\n    subtitle = \"Serie 2002 - 2016\",\n    x = \"Periodo\",\n    y = \"Var. IPC\",\n    caption = \"Fuente: datos.gob.es (Gobierno de España)\",\n    color = \"Grupos COICOP\"\n  ) +\n  facet_wrap(\n    vars(grupos_coicop_nombre),\n    nrow = 4,\n    ncol = 4,\n    labeller = labeller(grupos_coicop_nombre = function(label) str_wrap(label, width = 20))) +\n  theme(strip.text = element_text(size = 8))\n\nplot_IPC_tasas_animado &lt;- plot_IPC_tasas + transition_reveal(periodos_id) + view_follow(fixed_y = TRUE)\n\nplot_IPC_tasas_animado"
  },
  {
    "objectID": "srgtdbgxbgfxcbxn.html#por-qué-este-tema-y-para-qué",
    "href": "srgtdbgxbgfxcbxn.html#por-qué-este-tema-y-para-qué",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "",
    "text": "El tema del precio de la vivienda, en especial de los alquileres, es de gran preocupación para una gran parte de la población y más aún para los jóvenes. Son incontables las veces que hemos escuchado a la gente por la calle quejarse de lo caro que es permitirse una vivienda y más aún independizarse, son cada vez más el número de adultos jóvenes (entre 18 y 30 años) los que deciden quedarse viviendo en casa de sus padres aún cobrando un salario. Esto no es sorpresa alguna, pensemos que para un individuo el hecho de vivir con plena independencia de sus padres requiere la capacidad de costearse una serie de bienes y servicios imprescindibles tales como:\n\nSu cesta de compra habitual.\nCostes de carburante o transportes públicos.\nEl coste de la hipoteca o el alquiler de la vivienda en la que habita.\nCoste de servicios recurrentes como el gimnasio, peluquero/barbero…\nGastos en ocio (como el consumo de bebidas alcohólicas o refrescos, cine, festivales o discotecas, viajes…)\n\n\n\nVamos a tomar como referencia el salario promedio en España y su evolución a lo largo de una serie temporal ( en este caso 2006 -2020).\n\n\nCódigo\nlibrary(gganimate)\nlibrary(tidyverse)\nlibrary(plotly)\nlibrary(patchwork)\n\nSALARIOS &lt;- rio::import(\"./datos/datos_salariomedio.csv\") %&gt;%\n  select(Año, Salariomedio) %&gt;%\n  drop_na() %&gt;%\n  mutate(Variacion =((Salariomedio - lag(Salariomedio))/lag(Salariomedio))*100)\n\n\nEvo_salarios &lt;- ggplot(SALARIOS, aes(Año, Salariomedio)) + geom_line(aes(group = 1), color = \"aquamarine4\", size = 0.95) + ggthemes:: theme_stata()\n\n  \nEvo_salarios + labs(\n  title = \"Evolución del salario medio anual.\",\n  subtitle = \"Serie 2006-2020.\",\n  y = \"Salario medio (miles de euros)\",\n  caption = \"Fuente: Epdata\")\n\n\n\n\n\n\n\n\n\nComo se puede observar en la gráfica de arriba, podemos identificar 2 etapas de fuerte crecimiento del salario promedio:\n\nDe 2006 a 2008\nDe 2014 a 2019\n\nLa primera es atribuile al periodo de fuerte expansión económica que experimentó la economía española durante el principio de los 2000 junto con el boom del ladrillo, mientras que la segunda se debe al periodo de fuerte recuperación económica tras los años de crisis.\nPor otro lado, se puede observar una caída durante el periodo 2011 - 2014 debido al estallido de la crisis de 2008, se puede remarcar en ese mismo periodo (2008-2011) el estancamiento del salario promedio. No obstante, conviene visualizar estos datos también en tasas de crecimiento:\n\n\nCódigo\n\nVar_Salarios &lt;- ggplot(SALARIOS, aes(Año, Variacion)) + geom_line(aes(group = 1), color = \"#53868B\", size = 0.95) + ggthemes:: theme_stata()\n\nVar_Salarios + labs(\n  title = \"Crecimiento del salario medio.\",\n  subtitle = \"Serie 2006-2020.\",\n  y = \"Variación en porcentaje\",\n  caption = \"Fuente: Epdata\")\n\n\n\n\n\n\n\n\n\nTeniendo en cuenta la evolución en tasas podemos fijarnos que la primera etapa de crecimiento del salario español mostraba una tendencia decreciente mientras que la segunda todo lo contrario. Las razones de este comportamiento son las mismas, ya que en el boom la economía española estaba creciendo por encima de su potencial y comenzaba a estancarse mientras que en un periodo de recuperación al estar alejados de nuestro potencial la tasa de crecimiento muestra tendencia creciente. Consideramos que es bastante obvia la caída del salario en 2020 debido a la pandemia covid, no es necesario desarrollar en este aspecto.\nVolviendo a la pregunta principal con lo que hemos visto, si el crecimiento del salario medio español a lo largo de los últimos 20 años es similar o superior al del IPC, podemos afirmar que será capaz de cubrir los gastos necesarios para un individuo mencionados al principio. Sin embargo, no podemos asegurar esto último sin informarnos acerca del crecimiento de los precios de dichos bienes y servicios.\n\n\nCódigo\n\nIPC&lt;- rio::import(\"./datos/ipc_bueno.csv\")\n\ndf_IPC &lt;- IPC %&gt;%\n  rename(IPC = indice_precios_consumo_tasas_variacion) %&gt;%\n  select(indicadores,grupos_coicop_nombre,provincias_nombre,periodos_id,IPC) %&gt;%\n  filter(periodos_id %in% c(\"2002M01\",\"2003M01\",\"2004M01\",\"2005M01\",\"2006M01\",\"2007M01\",\"2008M01\",\"2009M01\",\"2010M01\",\"2011M01\",\"2012M01\",\"2013M01\",\"2014M01\",\"2015M01\",\"2016M01\"))\n\n\ndf_IPC_valores &lt;- df_IPC %&gt;%\n  filter(indicadores == \"Índices\") %&gt;%\n  filter(provincias_nombre == \"España\") %&gt;%\n  mutate(periodos_id = as.Date(paste0(substr(periodos_id, 1, 4), substr(periodos_id, 6, 7), \"-01\"), format = \"%Y%m-%d\"))\n\ndf_IPC_tasas &lt;- df_IPC %&gt;%\n  filter(indicadores == \"Tasas de variación anual\") %&gt;%\n  filter(provincias_nombre == \"España\")\n\nplot_IPC_valores &lt;- ggplot(df_IPC_valores, aes(periodos_id, IPC, group = grupos_coicop_nombre, color = grupos_coicop_nombre)) + \n  geom_line(size = 0.9) +\n  ggthemes::theme_stata() +\n  theme(\n    axis.text.x = element_text(\n      angle = 75, hjust = 1, vjust = 1, size = 5, margin = margin(\n        r = 5, b = 5, l = 5)),\n    axis.text.y = element_text(size = 5),\n    panel.spacing = unit(0.75, \"lines\"),\n    legend.text = element_text(size = 5),\n    legend.title = element_text(size = 8),\n    legend.key.size = unit(1, \"cm\"),\n    legend.key.height = unit(1, \"cm\"),\n    legend.key.width = unit(0.1,\"cm\"),\n    legend.direction = \"vertical\",\n    legend.position = \"none\") +\n  labs(\n    title = \"Evolución IPC por grupos COICOP\",\n    subtitle = \"Serie 2002 - 2016\",\n    x = \"Periodo\",\n    y = \"IPC\",\n    caption = \"Fuente: datos.gob.es (Gobierno de España)\",\n    color = \"Grupos COICOP\"\n  ) +\n  facet_wrap(\n    vars(grupos_coicop_nombre),\n    nrow = 4,\n    ncol = 4,\n    labeller = labeller(grupos_coicop_nombre = function(label) str_wrap(label, width = 20))) +\n  theme(strip.text = element_text(size = 8))\n  \nplot_animado &lt;- plot_IPC_valores + transition_reveal(periodos_id) + view_follow(fixed_y = TRUE)\n\nplot_animado\n\n\n\n\n\n\n\n\n\nEn la gráfica animada de arriba se nos ilustra el crecimiento del IPC en distintos grupos de bienes/servicios de consumo. Al mostrar una evolución de precios a lo largo de un periodo de 14 años, lo normal es que haya un crecimiento en el nivel de precios sostenido y a un ritmo bajo. No obstante, llama la atención el acusado crecimiento de los precios para las bebidas alcohólicas y tabaco (cuyas demandas se caracterizan por ser inelásticas) Y la enseñanza y la vivienda, debido a que su crecimiento se acelera al final del periodo. Para ser más precisos, observémos el comportamiento en tasas de crecimiento:\n\n\nCódigo\nlibrary(gganimate)\nlibrary(tidyverse)\nIPC&lt;- rio::import(\"./datos/ipc_bueno.csv\")\n\ndf_IPC &lt;- IPC %&gt;%\n  rename(IPC = indice_precios_consumo_tasas_variacion) %&gt;%\n  select(indicadores,grupos_coicop_nombre,provincias_nombre,periodos_id,IPC) %&gt;%\n  filter(periodos_id %in% c(\"2002M01\",\"2003M01\",\"2004M01\",\"2005M01\",\"2006M01\",\"2007M01\",\"2008M01\",\"2009M01\",\"2010M01\",\"2011M01\",\"2012M01\",\"2013M01\",\"2014M01\",\"2015M01\",\"2016M01\"))\n\n\ndf_IPC_valores &lt;- df_IPC %&gt;%\n  filter(indicadores == \"Índices\") %&gt;%\n  filter(provincias_nombre == \"España\") %&gt;%\n  mutate(periodos_id = as.Date(paste0(substr(periodos_id, 1, 4), substr(periodos_id, 6, 7), \"-01\"), format = \"%Y%m-%d\"))\n\ndf_IPC_tasas &lt;- df_IPC %&gt;%\n  filter(indicadores == \"Tasas de variación anual\") %&gt;%\n  filter(provincias_nombre == \"España\") %&gt;%\n  mutate(periodos_id = as.Date(paste0(substr(periodos_id, 1, 4), substr(periodos_id, 6, 7), \"-01\"), format = \"%Y%m-%d\"))\n\n\nplot_IPC_tasas &lt;- ggplot(df_IPC_tasas, aes(periodos_id, IPC, group = grupos_coicop_nombre, color = grupos_coicop_nombre)) + \n  geom_line(size = 0.9) +\n  ggthemes::theme_stata() +\n  theme(\n    axis.text.x = element_text(\n      angle = 75, hjust = 1, vjust = 1, size = 5, margin = margin(\n        r = 5, b = 5, l = 5)),\n    axis.text.y = element_text(size = 5),\n    panel.spacing = unit(0.75, \"lines\"),\n    legend.title = element_text(size = 8),\n    legend.key.size = unit(1, \"cm\"),\n    legend.key.height = unit(1, \"cm\"),\n    legend.key.width = unit(0.1,\"cm\"),\n    legend.direction = \"vertical\",\n    legend.position = \"right\") +\n  labs(\n    title = \"Evolución IPC en tasas por grupos COICOP\",\n    subtitle = \"Serie 2002 - 2016\",\n    x = \"Periodo\",\n    y = \"Var. IPC\",\n    caption = \"Fuente: datos.gob.es (Gobierno de España)\",\n    color = \"Grupos COICOP\"\n  ) +\n  facet_wrap(\n    vars(grupos_coicop_nombre),\n    nrow = 4,\n    ncol = 4,\n    labeller = labeller(grupos_coicop_nombre = function(label) str_wrap(label, width = 20))) +\n  theme(strip.text = element_text(size = 8))\n\nplot_IPC_tasas_animado &lt;- plot_IPC_tasas + transition_reveal(periodos_id) + view_follow(fixed_y = TRUE)\n\nplot_IPC_tasas_animado"
  },
  {
    "objectID": "web_alquileres.html#centrándonos-en-el-tema-de-la-vivienda",
    "href": "web_alquileres.html#centrándonos-en-el-tema-de-la-vivienda",
    "title": "Evolución y análisis del precio del alquiler en España.",
    "section": "CENTRÁNDONOS EN EL TEMA DE LA VIVIENDA",
    "text": "CENTRÁNDONOS EN EL TEMA DE LA VIVIENDA\nA la hora de hablar de la vivienda, es muy importante distinguir qué tipos de régimen de tenencia de la vivienda existen y en cuáles vamos a centrar para estudiar la evolución de sus precios. Vamos a exponer en el siguiente gráfico la distribución de la propiedad de la vivienda en sus distintos formatos para un conjunto de países europeos.\n\nDistribución del régimen de tenencia de la vivienda en Europa.\n\n\nCódigo\ndatos_europa&lt;- \"./datos/datos_europa.csv\"\ndatos_europa&lt;- rio::import(datos_europa)\ndatos_europa&lt;- datos_europa %&gt;% select(tenure,geo,OBS_VALUE)\n\ncategorias&lt;- c(\"OWN_L\" = \"Propietario,\\n con hipoteca o préstamo\", \"OWN_NL\" = \"Propietario,\\n sin hipoteca ni préstamo de vivienda pendiente\", \"RENT_FR\" = \"Inquilino,\\n alquiler a precio reducido o gratis\", \"RENT_MKT\" = \"Inquilino,\\n alquiler a precio de mercado\")\n\np&lt;- ggplot(datos_europa, aes(x = geo, y = OBS_VALUE,  fill = tenure)) +\n  geom_col( position = \"stack\", color = \"white\") +\n  labs(title = \"Distribución de la tenencia  de vivienda por países europeos (2018)\", \n       x = \"País\", y = \"%\", caption = \"Fuente:Eurostat\") +\n  ggthemes::theme_stata() +\n  theme(\n    plot.title = element_text(size = 16, hjust = 0.5, face = \"bold\"),\n    legend.key.size = unit(0.2,\"cm\"),\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    legend.title = element_text(face = \"bold\"),\n    legend.position = \"bottom\",\n    panel.grid.major.y = element_blank(),\n    panel.grid.minor.y = element_blank()) +\n  scale_fill_brewer(palette = \"Set3\") \np + scale_fill_manual(values = c(\"OWN_L\" = \"blue\", \"OWN_NL\" = \"red\", \"RENT_FR\" = \"yellow\", \"RENT_MKT\" =\"green\" ), labels = categorias) + guides(fill = guide_legend( keywidth = 0.5, keyheight = 0.5, title.theme = element_text(size = 5), label.theme = element_text(size = 5)))\n\n\n\n\n\n\n\n\n\nComo podemos observar para el año 2018, la distribución de viviendas en los Estados miembros de la Unión Europea mostró variaciones significativas. La mayoría de la población residía en propiedades, con tasas que iban desde el 51,4% en Alemania hasta el 96,4% en Rumanía. Curiosamente, Suiza destacó como una excepción, con un notable 57,5% de la población optando por el alquiler. En países como los Países Bajos (60,5%) y Suecia (51,7%), así como en Islandia (63,9%) y Noruega (60,1%), más del 50% de la población vivía en propiedades financiadas mediante préstamos o hipotecas. En cuanto al alquiler a precio de mercado, en 2018, menos del 10% de la población en once Estados miembros de la UE optaba por esta opción. Alemania (40,8%) y Dinamarca (39,4%) presentaban tasas significativamente más altas, mientras que Suiza lideraba con un notable 51,1%. A nivel general, la proporción de población que residía en viviendas de alquiler protegido o disfrutaba de viviendas gratuitas fue inferior al 20% en todos los Estados miembros de la UE y en los ocho países no miembros para los cuales se disponía de datos, sugiriendo una preferencia generalizada por la propiedad o formas de alquiler más estables.\nEn el caso de España, podemos observar como en su gran mayoría la ciudadanía es propietaria de vivienda, dentro de esta categoría los propietarios hipotecados no llegan a alcanzar la mitad. Sin embargo, el monto total de inquilinos es significativo llegando a representar un 25% del total aproximadamente.\n\n\nCódigo\n######gráfico pastel\n\n##Cargamos los datos \nd_tenencia&lt;- \"./datos/regimen_tenencia.csv\"\nd_tenencia&lt;- rio::import(d_tenencia)\n\n##Cambiamos la coma por el punto en la columna Total\nd_tenencia &lt;- d_tenencia%&gt;% mutate(Total = stringr::str_replace(Total, \",\" , \".\" ))\nstr(d_tenencia)\n#&gt; 'data.frame':    1120 obs. of  4 variables:\n#&gt;  $ CCAA            : chr  \"Total Nacional\" \"Total Nacional\" \"Total Nacional\" \"Total Nacional\" ...\n#&gt;  $ Regimen_tenencia: chr  \"Propiedad\" \"Propiedad\" \"Propiedad\" \"Propiedad\" ...\n#&gt;  $ Periodo         : int  2017 2016 2015 2014 2013 2012 2011 2010 2009 2008 ...\n#&gt;  $ Total           : chr  \"76.7\" \"77.1\" \"77.3\" \"78\" ...\n\nd_tenencia$Total &lt;- as.numeric(d_tenencia$Total)\n\nPropiedad &lt;- d_tenencia%&gt;%\n  filter (Regimen_tenencia == \"Propiedad\") %&gt;%\n  filter (CCAA == \"Total Nacional\") %&gt;%\n  group_by(Periodo, Regimen_tenencia) \n\nAlquiler_precio_mercado&lt;- d_tenencia %&gt;%\n  filter(Regimen_tenencia == \"Alquiler a precio de mercado\") %&gt;%\n  group_by(Periodo, Regimen_tenencia)\n\nAlquiler_inferior_precio&lt;- d_tenencia %&gt;%\n  filter(Regimen_tenencia == \"Alquiler inferior al precio de mercado\") %&gt;%\n  group_by(Periodo, Regimen_tenencia)\n\nCesion&lt;- d_tenencia %&gt;% \n  filter(Regimen_tenencia == \"Cesión\") %&gt;%\n  group_by(Periodo, Regimen_tenencia)\n\ndf_combined &lt;- Propiedad %&gt;%\n  full_join(Alquiler_precio_mercado) %&gt;%\n  full_join(Alquiler_inferior_precio) %&gt;%\n  full_join(Cesion) %&gt;% filter(CCAA==\"Total Nacional\") \n\ndf_ordenado &lt;- df_combined %&gt;% \n  arrange(Periodo)\n\ndf_04 &lt;- df_ordenado %&gt;%\n  filter (Periodo == 2004)%&gt;%\n  filter(CCAA ==\"Total Nacional\") %&gt;%\n  mutate(Total_2decimales = round(Total, 2),\n         csum = rev(cumsum(rev(Total_2decimales))),\n         posicion = Total_2decimales/2 + lead(csum, 1))%&gt;%\n  mutate(posicion = ifelse(is.na(posicion), Total_2decimales/2, posicion))\n\ndf_08 &lt;- df_ordenado %&gt;%\n  filter (Periodo == 2008)%&gt;%\n  filter(CCAA== \"Total Nacional\") %&gt;%\n  mutate(Total_2decimales = round(Total, 2),\n         csum = rev(cumsum(rev(Total_2decimales))),\n         posicion = Total_2decimales/2 + lead(csum, 1))%&gt;%\n  mutate(posicion = ifelse(is.na(posicion), Total_2decimales/2, posicion))\n\ndf_10 &lt;- df_ordenado %&gt;%\n  filter (Periodo == 2010)%&gt;%\n  filter(CCAA == \"Total Nacional\") %&gt;%\n  mutate(Total_2decimales = round(Total, 2),\n         csum = rev(cumsum(rev(Total_2decimales))),\n         posicion = Total_2decimales/2 + lead(csum, 1))%&gt;%\n  mutate(posicion = ifelse(is.na(posicion), Total_2decimales/2, posicion))\n\ndf_17 &lt;- df_ordenado %&gt;%\n  filter (Periodo == 2017)%&gt;%\n  filter(CCAA== \"Total Nacional\")%&gt;%\n  mutate(Total_2decimales = round(Total, 2),\n         csum = rev(cumsum(rev(Total_2decimales))),\n         posicion = Total_2decimales/2 + lead(csum, 1))%&gt;%\n  mutate(posicion = ifelse(is.na(posicion), Total_2decimales/2, posicion))\n\nlibrary(ggrepel)\n\np_2004 &lt;- ggplot(df_04, aes(x = \"\", y = Total, fill = fct_inorder(Regimen_tenencia))) +\n  geom_col(width = 1) +\n  labs(fill = NULL) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"Set3\") +\n  geom_text(data = df_04,\n            aes(y = Total, label = paste0(Total, \"%\")),\n            position = position_stack(vjust = 0.5),\n            size = 4, show.legend = FALSE) + \n  theme_void() +\n  theme(legend.position = \"none\")\n\n\np_2008 &lt;- ggplot(df_08, aes(x = \"\", y = Total, fill = fct_inorder(Regimen_tenencia))) +\n  geom_col(width = 1) +\n  labs(fill = NULL) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"Set3\")  +\n  geom_text(data = df_08,\n            aes(y = Total, label = paste0(Total, \"%\")),\n            position = position_stack(vjust = 0.5),  # Ajuste vertical\n            size = 4, show.legend = FALSE) +\n  theme_void()\n\np_2010 &lt;- ggplot(df_10, aes(x = \"\", y = Total, fill = fct_inorder(Regimen_tenencia))) +\n  geom_col(width = 1) +\n  labs(fill = NULL) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"Set3\") +\n  geom_text(data = df_10,\n            aes(y = Total, label = paste0(Total, \"%\")),\n            position = position_stack(vjust = 0.5),  # Ajuste vertical\n            size = 4, show.legend = FALSE) +\n  theme_void() +\n  theme(legend.position = \"none\")\n\np_2017&lt;- ggplot(df_17, aes(x = \"\", y = Total, fill = fct_inorder(Regimen_tenencia))) +\n  geom_col(width = 1) +\n  labs(fill = NULL) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"Set3\") +\n  geom_text(data = df_17,\n            aes(y = Total, label = paste0(Total, \"%\")),\n            position = position_stack(vjust = 0.5),\n            size = 4, show.legend = FALSE) +\n  theme_void() +\n  theme(legend.position = \"none\")\n\nlibrary(patchwork)\n\ncombined_plot &lt;- p_2004 + p_2008 + p_2010 + p_2017 +\n  plot_annotation(\n    title = \" Evolución de  la tenencia de la vivienda en España (%).\",\n    subtitle = \"(2004,2008,2010,2017)\",\n    caption = \"Fuente: INE\"\n  )\n\ncombined_plot\n\n\n\n\n\n\n\n\n\nPodemos observar la evolución de la distribución para España en años anteriores, destacando una reducción de la proporción de propietarios de vivienda que deriva en un aumento en la proporción de inquilinos. También podemos observar cómo en la proporción de inquilinos aumentan los que pagan el alquiler a precio de mercado. Es relevante señalar que, a pesar de estas variaciones, las viviendas en propiedad continúan representando la gran mayoría del total de viviendas a lo largo de los años, consolidándose como la opción dominante. En contraste, los alquileres de viviendas a precio inferior al de mercado constituyen una minoría, indicando una preferencia generalizada por la tenencia en propiedad.\n\n\nAnálisis de la vivienda en España\nYa tenemos una pequeña idea de cómo se distribuye la tenencia de viviendas en los países UE y de entre ellos España. Ahora vamos a hacer un análisis no muy extenso de la evolución de los precios tanto del alquiler como de la vivienda en términos de provincias y CCAA.\n\n\nEvolución de los alquileres.\nA la hora de estudiar el precio del alquiler, hemos tenido en consideración 2 factores: - EL TAMAÑO DE LAS VIVIENDAS - EL ÍNDICE GENERAL DE PRECIOS DEL ALQUILER DEL INE\nComenzando por el primero:\n\n\nCódigo\ndatos &lt;- \"./datos/DATOS_VIVIENDA.xlsx\"\ninfo &lt;- rio::import(datos)\n\ndf3 &lt;- info %&gt;%\n  filter(COMUNIDAD == \"Total nacional\")\n\n\np&lt;- ggplot(df3,\n       aes(\n  AÑO, \n  ÍNDICE,\n  color = TAMAÑO)) +\n  geom_line(size = 0.95) +\n  ggthemes::theme_stata() + \n  labs(\n  title = \"Evolución del Índice general de precios de alquiler por tamaño de vivienda (2015 = 100).\",\n  subtitle = \"serie 2011 - 2021\",\n  caption = \"Fuente: INE\")\n\npp &lt;- ggplotly(p)\n\n\np_plotly &lt;- pp %&gt;%\n  layout(\n    legend = list(\n      title = \"Tamaño\",\n      font = list(\n        family = \"Arial\", \n        size = 12\n      ),\n      bgcolor = \"white\",\n      bordercolor = \"black\",\n      borderwidth = 1,\n      itemsizing = \"constant\"  \n    )\n  )\n\np_plotly &lt;- p_plotly %&gt;%\n  layout(\n    annotations = list(\n      list(\n        text = \"Fuente: INE\",\n        font = list(\n          family = \"Arial\",\n          size = 10\n        ),\n        x = 1,\n        y = -0.15,\n        showarrow = FALSE,\n        xref = \"paper\",\n        yref = \"paper\",\n        xanchor = \"right\",\n        yanchor = \"auto\"\n      )\n    )\n  )\n\np_plotly\n\n\n\n\n\n\nEn la gráfica interactiva presente se nos presenta una relación muy peculiar entre el tamaño de la vivienda y el Índice de precios:\n\nLas viviendas de menor tamaño han sufrido un crecimiento en sus precios muy superior al de las de mayor tamaño.\n\nEsto a simple vista puede resultar sorprendente. ¿cómo es posible que las viviendas más pequeñas, que por tanto tienen menos habitaciones, baños y espacio en general, sean cada vez más caras a un ritmo mayor que las más grandes?. Debemos tener en cuenta que las viviendas de menor tamaño en España son generalmente edificios residenciales de pisos que están ubicados normalmente en zonas céntricas de las ciudades o en barrios que normalmente están bien conectados. Las viviendas de mayores tamaños requieren parcelas mayores las cuales se edifican en zonas más alejadas o zonas que están en plena construcción, las cuales tienen peor conexión con la ciudad y por tanto mayor dificultad de acceso a supermercados, colegios e institutos, hospitales… La demanda de viviendas de menor tamaño es mucho mayor que las de tamaños grandes debido a esto último y sobre todo a que la población general no cuenta con un poder adquisitivo tal que le permita la adquisición o el alquiler de viviendas de tamaños grandes.\nSi ahora pasamos al análisis por CCAA y provincias…\n\n\nCódigo\n\ndatos4&lt;- \"./datos/datos4.csv\"\ndatos4&lt;- rio::import(datos4)\n\np4&lt;- ggplot(datos4, aes(x = reorder(Parámetro, -Cuantia_media), y = Cuantia_media)) + geom_bar(stat = \"identity\", fill = \"skyblue\") +  \n  labs(title = \"Precio del Alquiler por provincia (2018)\",\n       x = \"Provincia\",\n       y = \"Precio medio Alquiler\",\n       caption = \"Ministerio de Fomento, Gobierno de España\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\np4\n\n\n\n\n\n\n\n\n\nEn este contexto, el gráfico proporciona una visión detallada del precio medio del alquiler en diferentes provincias, destacando variaciones significativas en el coste mensual. En la provincia de Madrid, por ejemplo, se registra el precio más elevado, alcanzando los 819 euros mensuales, seguido de cerca por Barcelona con un promedio de 769 euros al mes. Por otro lado, en la provincia de Lugo se observa el precio más bajo, situándose en 336 euros al mes. Llama bastante la atención el fuerte salto en el precio del alquiler que se produce a medida que nos acercamos a las ciudades principales de España. Podemos comprobar que aquellas ciudades con menor población cuentan con precios más bajos de alquiler puesto que la mayoría de la demanda de viviendas se concentra en las ciudades grandes que cuentan con mayor variedad de servicios, oportunidades académicas y laborales, entre otros…\n\n\nCódigo\ncoloresg1 &lt;- c(\"#66CDAA\",\"#A52A2A\",\"#53868B\",\"#458B00\")\ncoloresg2 &lt;- c(\"darkgoldenrod3\",\"#9A32CD\", \"deeppink3\", \"#EEEE00\")\ncoloresg3 &lt;- c(\"#8B7E66\", \"#00FF7F\", \"#7FFF00\",\"#00BFFF\",\"#FF3030\", \"darkslategray\")\ncoloresg4 &lt;- c(\"#EEC900\",\"darkseagreen4\", \"#CD5555\", \"#EEA2AD\")\n\n\ndf_cca1 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO, values_from = ÍNDICE) %&gt;%\n  filter(COMUNIDAD %in% c(\"06 Cantabria\", \"02 Aragón\", \"03 Principado de Asturias\", \"12 Galicia\"))\n\ndf_cca2 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO, values_from = ÍNDICE) %&gt;%\n  filter(COMUNIDAD %in% c(\"07 Castilla y León\", \"08 Castilla La Mancha\", \"15 La Rioja\", \"11 Extremadura\"))\n\ndf_cca3 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO, values_from = ÍNDICE) %&gt;%\n  filter(COMUNIDAD %in% c(\"10 Comunitat Valenciana\", \"01 Andalucía\", \"13 Comunidad de Madrid\", \"14 Región de Murcia\", \"09 Cataluña\"))\n\ndf_cca4 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO, values_from = ÍNDICE) %&gt;%\n  filter(COMUNIDAD %in% c(\"16 Ceuta\", \"17 Melilla\", \"04 Illes Balears\", \"05 Canarias\"))\n\n\nCCAAg1&lt;- ggplot(df_cca1,\n              aes(\n                AÑO,\n                General,\n                color = COMUNIDAD)) +\n  geom_line(size = 0.95) +\n  scale_color_manual(values = coloresg1) + \n  labs(\n    y = \"IPC\") +\n  ggthemes::theme_stata() \n  \nCCAAg2&lt;- ggplot(df_cca2,\n                aes(\n                  AÑO,\n                  General,\n                  color = COMUNIDAD)) +\n  geom_line(size = 0.95) +\n  scale_color_manual(values = coloresg2) + \n  labs(\n    color = NULL,\n    y = \"IPC\") +\n  ggthemes::theme_stata()\n\nCCAAg3&lt;- ggplot(df_cca3,\n                aes(\n                  AÑO,\n                  General,\n                  color = COMUNIDAD)) +\n  geom_line(size = 0.95) +\n  scale_color_manual(values = coloresg3) + \n  labs(\n  color = NULL,\n  y = \"IPC\") +\n  ggthemes::theme_stata() \n\nCCAAg4&lt;- ggplot(df_cca4,\n                aes(\n                  AÑO,\n                  General,\n                  color = COMUNIDAD)) +\n  geom_line(size = 0.95) +\n  scale_color_manual(values = coloresg4) + \n  labs(\n  color = NULL,\n  y = \"IPC\") +\n  ggthemes::theme_stata() \n\nPLOT_CONJUNTO &lt;- ((CCAAg1 + CCAAg2) / (CCAAg3 + CCAAg4)) +\n  plot_layout(guides = \"collect\") +\n  theme(\n    plot.title.position = \"collect\")  +\n  plot_annotation(\n    title = \"Evolución del IPC general de \\n precios de alquiler por CCAA agrupadas (2015 = 100)\",\n    caption = \"Fuente: INE\") & ggthemes::theme_stata() & theme(\n      legend.position = \"right\",\n      legend.direction = \"vertical\",\n      legend.text = element_text(size = 5) ,\n      legend.key.size = unit(0.5,\"cm\"),\n      legend.title = element_text(size = 5),\n      plot.title = element_text(size = 12, hjust = 0.05))\n\nPLOT_CONJUNTO\n\n\n\n\n\n\n\n\n\nEn esta otra gráfica se nos presenta una forma distinta de observar los datos sobre la evolución del IPC general de precios del alquiler, hemos distinguido entre 4 grupos:\n\nEl primero, que trata de reunir regiones más ubicadas al norte incluyendo Aragón. Siendo esta última comunidad la que ha presentado mayor crecimiento en su índice, hecho que podría atribuirse a la contribución en los precios agregados del alquiler de Aragón por parte de Zaragoza, una de las ciudades principales del país. El resto de CCAA que integran el grupo muestran un patrón similar pero con un crecimiento menor.\nEl segundo grupo reúne las CCAA más orientadas al centro de la península, destaca como la evolución para Extremadura y Castilla y León ha sido prácticamente igual.\nEl tercero reúne las CCAA que consideramos más relevantes. No nos esperábamos que la Comunidad Valenciana fuera la región cuyos alquileres fueran más elevados al final del periodo superando a Cataluña y Madrid.\nFinalmente el último grupo contiene las islas y las ciudades autónomas. podemos destacar como el comportamiento tanto en Baleares como en Canarias es similar, pero los alquileres son más elevados en la primera debido probablemente a que percibe turistas de mayor poder adquisitivo en las temporadas de verano. Los alquileres en Ceuta y Melilla presentan los índices más bajos de todos.\n\n\n\nEvolución de los precios de la vivienda.\n\n\nCódigo\n#######MAPA\nlibrary(sf)\nlibrary(tidyverse)\nlibrary(pjpv.curso.R.2022)\n\n\n###cargamos los datos \ndatos_c&lt;- \"./datos/prueba.csv\"\ndatos_c&lt;- rio::import(datos_c)\n\n### En la columna Total queremos poner un punto en vez de una coma \n\ndatos_c &lt;- datos_c%&gt;% mutate(Total = stringr::str_replace(Total, \",\" , \".\" ))\n\n#- Cambiamos el nombre de las columnas \n\ndf_c&lt;- datos_c %&gt;% rename(Indice_precio = Total) %&gt;% rename(CCAA = Comunidades_Autonomas)\n\n###Separamos la columna de CCAA en dos Columnas, una que muestre el código y otra el nombre de la Comunidad Autonoma  \n\ndf_c &lt;- df_c %&gt;%\n  tidyr::separate(CCAA, sep = \" \",\n                  into = c(\"ine_ccaa\", \"ine_ccaa.n\"), extra = \"merge\")\ndf_c&lt;-  drop_na(df_c) #quitamos el total nacional, ya que no se van a utilizar\n\ndf_c&lt;- df_c %&gt;% filter(General == \"General\") %&gt;% filter( Índices_tasas ==\"Media anual\") %&gt;% filter(Periodo == \"2022\") ##cogemos las viviendas generales, la media anual y elegimos el año más reciente que es 2022\n\n\n###Cargamos las geometrías y elegimos las variables que nos interesan\ndf_geo_prov &lt;- pjpv.curso.R.2022::LAU2_prov_2020_canarias\ndf_geo_prov &lt;- df_geo_prov %&gt;% select(ine_prov, ine_prov.n, ine_ccaa, ine_ccaa.n)\n\n##Agregamos geometrías de las Comunidades Autonomas \n\ndf_geo_ccaa &lt;- df_geo_prov %&gt;% group_by(ine_ccaa, ine_ccaa.n) %&gt;% summarize()\ndf_ok &lt;- left_join(df_geo_ccaa, df_c, by = c(\"ine_ccaa\" = \"ine_ccaa\"))\nnames(df_ok)\n#&gt; [1] \"ine_ccaa\"      \"ine_ccaa.n.x\"  \"geometry\"      \"ine_ccaa.n.y\" \n#&gt; [5] \"General\"       \"Índices_tasas\" \"Periodo\"       \"Indice_precio\"\n\n##Calculamos los Centroides\nlibrary(sf)\ndf_geo_ccaa &lt;- cbind(df_geo_ccaa, st_coordinates(st_centroid(df_geo_ccaa$geometry)))\n\n##Juntamos los datos de los precios de los alquileres con las geometrías \ndf_ok &lt;- left_join(df_geo_ccaa, df_c, by = c(\"ine_ccaa\" = \"ine_ccaa\"))\ndf_ok$Indice_precio &lt;- as.numeric(df_ok$Indice_precio)\np &lt;- ggplot() + \n  geom_sf(data = df_ok, \n          aes(geometry = geometry, fill = Indice_precio), \n          color = \"white\", size = 0.09) + \n  coord_sf(xlim = c(-10.00, 5.00), ylim = c(35, NA), expand = TRUE) +\n  scale_fill_continuous(low=\"white\",\n                        high=\"navyblue\",\n                        limits = c(100,160)) +\n  theme_minimal() + \n  theme(panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank()) +\n  theme(axis.title.x=element_blank(),\n        axis.text.x=element_blank(),\n        axis.ticks.x=element_blank(),\n        axis.title.y=element_blank(),\n        axis.text.y=element_blank(),\n        axis.ticks.y=element_blank()) + \n  labs(title = \"Índice de Precios de la Vivienda por Comunidades Autónomas\", \n       subtitle = \"(2022)\",\n       fill = \"Índice\",\n       caption = \"Fuente: INE\")\np\n\n\n\n\n\n\n\n\n\nEn el análisis gráfico previo (evolución de los regímenes de tenencia), hemos observado una marcada tendencia a lo largo de los años: La proporción de viviendas en propiedad ha disminuido a la par que las viviendas en alquiler han experimentado un aumento significativo. Esta transformación puede atribuirse principalmente al vertiginoso incremento de los precios de la vivienda, que ha afectado negativamente nuestro poder adquisitivo. La consecuencia directa de este fenómeno es la dificultad creciente para adquirir una vivienda propia, obligando a un número cada vez mayor de personas a optar por la alternativa del alquiler. Con el objetivo de profundizar en estas disparidades, hemos confeccionado un mapa que ilustra el Índice de Precios de la Vivienda por Comunidades para el año 2022. Este enfoque nos brinda la oportunidad de examinar las divergencias en los precios de la vivienda a nivel regional. En la observación detallada del mapa, se destaca que las Comunidades Autónomas con los precios de vivienda más elevados son la Comunidad de Madrid, Islas Baleares y Cataluña, las. Por otro lado, aquellas regiones donde el coste de la vivienda es más bajo incluyen Extremadura, Castilla-La Mancha y Navarra. Este análisis geográfico proporciona una visión más completa de las disparidades en los precios de la vivienda, destacando las áreas donde la propiedad se presenta como una inversión más onerosa y aquellas donde la adquisición de una vivienda podría ser más accesible. La información recopilada sugiere una correlación entre el aumento de los precios de la vivienda y el cambio en la tendencia hacia el alquiler, reflejando las complejidades económicas y sociales que inciden en las decisiones de vivienda de la población.\n\n\nCódigo\n##Otro Mapa pero ahora del Indice de Precios de Alquiler \ndatos_alquiler&lt;- \"./datos/59057.csv\"\ndatos_alquiler&lt;- rio::import(datos_alquiler)\n\n##Cambiamos la coma por el punto en la columna Total\ndatos_alquiler&lt;- datos_alquiler%&gt;% mutate(Total = stringr::str_replace(Total, \",\" , \".\" ))\n\n##Separamos la columna de CCAA en dos Columnas, una que muestre el código y otra el nombre de la Comunidad Autonoma  \n\ndatos_alquiler &lt;- datos_alquiler %&gt;%\n  tidyr::separate(CCAA, sep = \" \",\n                  into = c(\"ine_ccaa\", \"ine_ccaa.n\"), extra = \"merge\") \n\n##Quitamos Total Nacional (que no lo necesitamos)\n\ndatos_alquiler&lt;- drop_na(datos_alquiler)\n\n##Cogemos las variables que nos interesan, filtramos por Indice y filtramos por el año 2021(es el más reciente)\n\ndatos_alquiler&lt;- datos_alquiler %&gt;%\n  filter(Tamaño == \"Total\") %&gt;%\n  filter(Dato ==\"Índice\") %&gt;% \n  filter(Periodo == 2021) %&gt;%\n  select(ine_ccaa, ine_ccaa.n, Total)\n\n###Cargamos las geometrías y elegimos las variables que nos interesan\ndf_geo_prov &lt;- pjpv.curso.R.2022::LAU2_prov_2020_canarias\ndf_geo_prov &lt;- df_geo_prov %&gt;% select(ine_prov, ine_prov.n, ine_ccaa, ine_ccaa.n)\n\n##Agregamos geometrías de las Comunidades Autonomas \n\ndf_geo_ccaa &lt;- df_geo_prov %&gt;% group_by(ine_ccaa, ine_ccaa.n) %&gt;% summarize() \ndf_ok &lt;- left_join(df_geo_ccaa, datos_alquiler, by = c(\"ine_ccaa\" = \"ine_ccaa\"))\nnames(df_ok)\n#&gt; [1] \"ine_ccaa\"     \"ine_ccaa.n.x\" \"geometry\"     \"ine_ccaa.n.y\" \"Total\"\n\n##Calculamos los Centroides\nlibrary(sf)\ndf_geo_ccaa &lt;- cbind(df_geo_ccaa, st_coordinates(st_centroid(df_geo_ccaa$geometry)))\n\n##Juntamos los datos de los precios de los alquileres con las geometrías \ndf_ok &lt;- left_join(df_geo_ccaa, datos_alquiler, by = c(\"ine_ccaa\" = \"ine_ccaa\"))\n\n##Gráfico\ndf_ok$Total &lt;- as.numeric(df_ok$Total)\np &lt;- ggplot() + \n  geom_sf(data = df_ok, \n          aes(geometry = geometry, fill = Total), \n          color = \"white\", size = 0.09) + \n  coord_sf(xlim = c(-10.00, 5.00), ylim = c(35, NA), expand = TRUE) +\n  scale_fill_continuous(low=\"white\",high=\"orange\") +\n  theme_minimal() + \n  theme(panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank()) +\n  theme(axis.title.x=element_blank(),\n        axis.text.x=element_blank(),\n        axis.ticks.x=element_blank(),\n        axis.title.y=element_blank(),\n        axis.text.y=element_blank(),\n        axis.ticks.y=element_blank()) + \n  labs(title = \"Índice de Precios del Alquiler  por Comunidades Autónomas\", \n       subtitle = \"(2021)\",\n       fill = \"Índice\",\n       caption = \"Fuente: INE\")\np\n\n\n\n\n\n\n\n\n\nEn la actualidad, la disparidad en los precios de alquiler entre distintas Comunidades Autónomas ha emergido como un tema de gran controversia. Con el objetivo de visualizar y comprender estas divergencias, hemos desarrollado un mapa interactivo que exhibe el Índice de Precio de Alquiler por Comunidades Autónomas durante el año 2021. Los resultados del análisis revelan que existen notables variaciones en los costes de alquiler a lo largo y ancho de España. En particular, Comunidades Autónomas como Asturias, Castilla y León, Galicia y Extremadura destacan por presentar precios de alquiler más accesibles. Este fenómeno podría estar vinculado a factores como una menor demanda relativa, una oferta más abundante o características socioeconómicas específicas de estas regiones. Contrastando con esta tendencia, las Comunidades Autónomas de las Islas Baleares, la Comunidad Valenciana, Cataluña, las Islas Canarias, Castilla La Mancha y la Comunidad Madrid se posicionan como las zonas con precios de alquiler más elevados. En estos casos, factores como la alta demanda derivada de zonas turísticas, una robusta actividad económica, y la concentración de empleo y servicios urbanos podrían estar contribuyendo a esta tendencia al alza en los precios."
  },
  {
    "objectID": "slides_trabajo.html#temática-del-trabajo",
    "href": "slides_trabajo.html#temática-del-trabajo",
    "title": "Análisis del coste de vida",
    "section": "TEMÁTICA DEL TRABAJO",
    "text": "TEMÁTICA DEL TRABAJO\nVIVIR Es más caro –&gt; 🤑🤑🤑🤑 ¿¿¿¿¿Por qué????? –&gt; 😭😭🤬🤬\nMuy sencillo: aumento de precios a mayor ritmo que el crecimiento salarial.\n💸 PRECIOS 💸\nHemos usado datos sobre índices de precios tanto generales como por grupos COICOP.\nTambién nos hemos centrado mucho en el tema de:\n🏡VIVIENDA Y ALQUILER🏡 (tema de gran preocupación para los adultos jóvenes🙋️)\n¿¿De dónde los sacamos??\nPrincipalmente de páginas conocidas como INE, Eurostat, OCDE…\nTruquito: Google dataset search : De TODO hay aquí"
  },
  {
    "objectID": "slides_trabajo.html#precios",
    "href": "slides_trabajo.html#precios",
    "title": "Análisis del coste de vida",
    "section": "💸 PRECIOS 💸",
    "text": "💸 PRECIOS 💸\nHemos usado datos sobre índices de precios tanto generales como por grupos COICOP. También nos hemos centrado mucho en el tema de la vivienda y el alquiler (tema de gran preocupación para los adultos jóvenes🙋️)"
  },
  {
    "objectID": "slides_trabajo.html#algunos-de-nuestros-gráficos",
    "href": "slides_trabajo.html#algunos-de-nuestros-gráficos",
    "title": "Análisis del coste de vida",
    "section": "Algunos de nuestros gráficos",
    "text": "Algunos de nuestros gráficos\n\n\nCódigo\nlibrary(gganimate)\nlibrary(tidyverse)\nIPC&lt;- rio::import(\"./datos/ipc_bueno.csv\")\n\ndf_IPC &lt;- IPC %&gt;%\n  rename(IPC = indice_precios_consumo_tasas_variacion) %&gt;%\n  select(indicadores,grupos_coicop_nombre,provincias_nombre,periodos_id,IPC) %&gt;%\n  filter(periodos_id %in% c(\"2002M01\",\"2003M01\",\"2004M01\",\"2005M01\",\"2006M01\",\"2007M01\",\"2008M01\",\"2009M01\",\"2010M01\",\"2011M01\",\"2012M01\",\"2013M01\",\"2014M01\",\"2015M01\",\"2016M01\"))\n\n\ndf_IPC_valores &lt;- df_IPC %&gt;%\n  filter(indicadores == \"Índices\") %&gt;%\n  filter(provincias_nombre == \"España\") %&gt;%\n  mutate(periodos_id = as.Date(paste0(substr(periodos_id, 1, 4), substr(periodos_id, 6, 7), \"-01\"), format = \"%Y%m-%d\"))\n\nplot_IPC_valores &lt;- ggplot(df_IPC_valores, aes(periodos_id, IPC, group = grupos_coicop_nombre, color = grupos_coicop_nombre)) + \n  geom_line(size = 0.9) +\n  ggthemes::theme_stata() +\n  theme(\n    axis.text.x = element_text(\n      angle = 75, hjust = 1, vjust = 1, size = 5, margin = margin(\n        r = 5, b = 5, l = 5)),\n    axis.text.y = element_text(size = 5),\n    panel.spacing = unit(0.75, \"lines\"),\n    legend.title = element_text(size = 8),\n    legend.key.size = unit(1, \"cm\"),\n    legend.key.height = unit(1, \"cm\"),\n    legend.key.width = unit(0.1,\"cm\"),\n    legend.direction = \"vertical\",\n    legend.position = \"none\") +\n  labs(\n    title = \"Evolución IPC por grupos COICOP\",\n    subtitle = \"Serie 2002 - 2016\",\n    x = NULL,\n    y = \"IPC\",\n    caption = \"Fuente: datos.gob.es (Gobierno de España)\",\n    color = \"Grupos COICOP\"\n  ) +\n  facet_wrap(\n    vars(grupos_coicop_nombre),\n    nrow = 4,\n    ncol = 4,\n    labeller = labeller(grupos_coicop_nombre = function(label) str_wrap(label, width = 20))) +\n  theme(strip.text = element_text(size = 8))\n\nplot_animado &lt;- plot_IPC_valores + transition_reveal(periodos_id) + view_follow(fixed_y = TRUE)\n\nplot_animado"
  },
  {
    "objectID": "slides_trabajo.html#section",
    "href": "slides_trabajo.html#section",
    "title": "Análisis del coste de vida",
    "section": "2",
    "text": "2\n\n\nCódigo\nlibrary(patchwork)\ndatos &lt;- \"./datos/DATOS_VIVIENDA.xlsx\"\ninfo &lt;- rio::import(datos)\n\ncoloresg1 &lt;- c(\"#66CDAA\",\"#A52A2A\",\"#53868B\",\"#458B00\")\ncoloresg2 &lt;- c(\"darkgoldenrod3\",\"#9A32CD\", \"deeppink3\", \"#EEEE00\")\ncoloresg3 &lt;- c(\"#8B7E66\", \"#00FF7F\", \"#7FFF00\",\"#00BFFF\",\"#FF3030\", \"darkslategray\")\ncoloresg4 &lt;- c(\"#EEC900\",\"darkseagreen4\", \"#CD5555\", \"#EEA2AD\")\n\n\ndf_cca1 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO, values_from = ÍNDICE) %&gt;%\n  filter(COMUNIDAD %in% c(\"06 Cantabria\", \"02 Aragón\", \"03 Principado de Asturias\", \"12 Galicia\"))\n\ndf_cca2 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO, values_from = ÍNDICE) %&gt;%\n  filter(COMUNIDAD %in% c(\"07 Castilla y León\", \"08 Castilla La Mancha\", \"15 La Rioja\", \"11 Extremadura\"))\n\ndf_cca3 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO, values_from = ÍNDICE) %&gt;%\n  filter(COMUNIDAD %in% c(\"10 Comunitat Valenciana\", \"01 Andalucía\", \"13 Comunidad de Madrid\", \"14 Región de Murcia\", \"09 Cataluña\"))\n\ndf_cca4 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO, values_from = ÍNDICE) %&gt;%\n  filter(COMUNIDAD %in% c(\"16 Ceuta\", \"17 Melilla\", \"04 Illes Balears\", \"05 Canarias\"))\n\n\nCCAAg1&lt;- ggplot(df_cca1,\n              aes(\n                AÑO,\n                General,\n                color = COMUNIDAD)) +\n  geom_line(size = 0.95) +\n  scale_color_manual(values = coloresg1) + \n  labs(\n    y = \"IPC\") +\n  ggthemes::theme_stata() \n  \nCCAAg2&lt;- ggplot(df_cca2,\n                aes(\n                  AÑO,\n                  General,\n                  color = COMUNIDAD)) +\n  geom_line(size = 0.95) +\n  scale_color_manual(values = coloresg2) + \n  labs(\n    color = NULL,\n    y = \"IPC\") +\n  ggthemes::theme_stata()\n\nCCAAg3&lt;- ggplot(df_cca3,\n                aes(\n                  AÑO,\n                  General,\n                  color = COMUNIDAD)) +\n  geom_line(size = 0.95) +\n  scale_color_manual(values = coloresg3) + \n  labs(\n  color = NULL,\n  y = \"IPC\") +\n  ggthemes::theme_stata() \n\nCCAAg4&lt;- ggplot(df_cca4,\n                aes(\n                  AÑO,\n                  General,\n                  color = COMUNIDAD)) +\n  geom_line(size = 0.95) +\n  scale_color_manual(values = coloresg4) + \n  labs(\n  color = NULL,\n  y = \"IPC\") +\n  ggthemes::theme_stata() \n\nPLOT_CONJUNTO &lt;- ((CCAAg1 + CCAAg2) / (CCAAg3 + CCAAg4)) +\n  plot_layout(guides = \"collect\") +\n  theme(\n    plot.title.position = \"collect\")  +\n  plot_annotation(\n    title = \"Evolución del IPC general de \\n precios de alquiler por CCAA agrupadas (2015 = 100)\",\n    caption = \"Fuente: INE\") & ggthemes::theme_stata() & theme(\n      legend.position = \"right\",\n      legend.direction = \"vertical\",\n      legend.text = element_text(size = 5) ,\n      legend.key.size = unit(0.5,\"cm\"),\n      legend.title = element_text(size = 5),\n      plot.title = element_text(size = 12, hjust = 0.05))\n\nPLOT_CONJUNTO"
  },
  {
    "objectID": "slides_trabajo.html#section-1",
    "href": "slides_trabajo.html#section-1",
    "title": "Análisis del coste de vida",
    "section": "3",
    "text": "3\n\n\nCódigo\nlibrary(plotly)\ndatos &lt;- \"./datos/DATOS_VIVIENDA.xlsx\"\ninfo &lt;- rio::import(datos)\n\ndf3 &lt;- info %&gt;%\n  filter(COMUNIDAD == \"Total nacional\")\n\n\np&lt;- ggplot(df3,\n       aes(\n  AÑO, \n  ÍNDICE,\n  color = TAMAÑO)) +\n  geom_line(size = 0.95) +\n  ggthemes::theme_stata() + \n  labs(\n  title = \"Evolución del Índice general de precios de alquiler por tamaño de vivienda (2015 = 100).\",\n  subtitle = \"serie 2011 - 2021\",\n  caption = \"Fuente: INE\")\n\npp &lt;- ggplotly(p)\n\n\np_plotly &lt;- pp %&gt;%\n  layout(\n    legend = list(\n      title = \"Tamaño\",\n      font = list(\n        family = \"Arial\", \n        size = 12\n      ),\n      bgcolor = \"white\",\n      bordercolor = \"black\",\n      borderwidth = 1,\n      itemsizing = \"constant\"  \n    )\n  )\n\np_plotly &lt;- p_plotly %&gt;%\n  layout(\n    annotations = list(\n      list(\n        text = \"Fuente: INE\",\n        font = list(\n          family = \"Arial\",\n          size = 10\n        ),\n        x = 1,\n        y = -0.15,\n        showarrow = FALSE,\n        xref = \"paper\",\n        yref = \"paper\",\n        xanchor = \"right\",\n        yanchor = \"auto\"\n      )\n    )\n  )\n\np_plotly"
  },
  {
    "objectID": "slides_trabajo.html#section-2",
    "href": "slides_trabajo.html#section-2",
    "title": "Análisis del coste de vida",
    "section": "4",
    "text": "4\n\n\nCódigo\nlibrary(tidyverse)\nDf_eman &lt;- rio::import(\"./datos/TASA DE EMANCIPACION.csv\")\n\nDf_good &lt;- Df_eman %&gt;%\n  mutate(Year = as.factor(Year)) %&gt;%\n  select(Year, Tasa)\n\nplot_eman &lt;-ggplot(Df_good, aes(Year, Tasa)) + geom_line(group = 1) +\n  labs(\n    title = \"Tasa de emancipación para jóvenes de 18 -34 años.\",\n    x = \"Año\",\n    y = \"Tasa de emancipación\",\n    caption = \"Fuente: datos.gob.es (Gobierno de España).\"\n  ) +\n  ggthemes::theme_stata()\n\nplot_eman"
  },
  {
    "objectID": "slides_trabajo.html#section-3",
    "href": "slides_trabajo.html#section-3",
    "title": "Análisis del coste de vida",
    "section": "5",
    "text": "5\n\n\nCódigo\ndatos_europa&lt;- \"./datos/datos_europa.csv\"\ndatos_europa&lt;- rio::import(datos_europa)\ndatos_europa&lt;- datos_europa %&gt;% select(tenure,geo,OBS_VALUE)\n\ncategorias&lt;- c(\"OWN_L\" = \"Propietario,\\n con hipoteca o préstamo\", \"OWN_NL\" = \"Propietario,\\n sin hipoteca ni préstamo de vivienda pendiente\", \"RENT_FR\" = \"Inquilino,\\n alquiler a precio reducido o gratis\", \"RENT_MKT\" = \"Inquilino,\\n alquiler a precio de mercado\")\n\np&lt;- ggplot(datos_europa, aes(x = geo, y = OBS_VALUE,  fill = tenure)) +\n  geom_col( position = \"stack\", color = \"white\") +\n  labs(title = \"Distribución de la población por régimen de tenencia (2018)\", \n       x = \"País\", y = \"%\", caption = \"Fuente:Eurostat\") +\n  ggthemes::theme_stata() +\n  theme(\n    plot.title = element_text(size = 16, hjust = 0.5, face = \"bold\"),\n    legend.key.size = unit(0.2,\"cm\"),\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    legend.title = element_text(face = \"bold\"),\n    legend.position = \"bottom\",\n    panel.grid.major.y = element_blank(),\n    panel.grid.minor.y = element_blank()) +\n  scale_fill_brewer(palette = \"Set3\") \np + scale_fill_manual(values = c(\"OWN_L\" = \"blue\", \"OWN_NL\" = \"red\", \"RENT_FR\" = \"yellow\", \"RENT_MKT\" =\"green\" ), labels = categorias) + guides(fill = guide_legend( keywidth = 0.5, keyheight = 0.5, title.theme = element_text(size = 5), label.theme = element_text(size = 5)))"
  },
  {
    "objectID": "slides_trabajo.html#section-4",
    "href": "slides_trabajo.html#section-4",
    "title": "Análisis del coste de vida",
    "section": "6",
    "text": "6\n\n\nCódigo\n######gráfico pastel\n\n##Cargamos los datos \nd_tenencia&lt;- \"./datos/regimen_tenencia.csv\"\nd_tenencia&lt;- rio::import(d_tenencia)\n\n##Cambiamos la coma por el punto en la columna Total\nd_tenencia &lt;- d_tenencia%&gt;% mutate(Total = stringr::str_replace(Total, \",\" , \".\" ))\nstr(d_tenencia)\n#&gt; 'data.frame':    1120 obs. of  4 variables:\n#&gt;  $ CCAA            : chr  \"Total Nacional\" \"Total Nacional\" \"Total Nacional\" \"Total Nacional\" ...\n#&gt;  $ Regimen_tenencia: chr  \"Propiedad\" \"Propiedad\" \"Propiedad\" \"Propiedad\" ...\n#&gt;  $ Periodo         : int  2017 2016 2015 2014 2013 2012 2011 2010 2009 2008 ...\n#&gt;  $ Total           : chr  \"76.7\" \"77.1\" \"77.3\" \"78\" ...\n\nd_tenencia$Total &lt;- as.numeric(d_tenencia$Total)\n\nPropiedad &lt;- d_tenencia%&gt;%\n  filter (Regimen_tenencia == \"Propiedad\") %&gt;%\n  filter (CCAA == \"Total Nacional\") %&gt;%\n  group_by(Periodo, Regimen_tenencia) \n\nAlquiler_precio_mercado&lt;- d_tenencia %&gt;%\n  filter(Regimen_tenencia == \"Alquiler a precio de mercado\") %&gt;%\n  group_by(Periodo, Regimen_tenencia)\n\nAlquiler_inferior_precio&lt;- d_tenencia %&gt;%\n  filter(Regimen_tenencia == \"Alquiler inferior al precio de mercado\") %&gt;%\n  group_by(Periodo, Regimen_tenencia)\n\nCesion&lt;- d_tenencia %&gt;% \n  filter(Regimen_tenencia == \"Cesión\") %&gt;%\n  group_by(Periodo, Regimen_tenencia)\n\ndf_combined &lt;- Propiedad %&gt;%\n  full_join(Alquiler_precio_mercado) %&gt;%\n  full_join(Alquiler_inferior_precio) %&gt;%\n  full_join(Cesion) %&gt;% filter(CCAA==\"Total Nacional\") \n\ndf_ordenado &lt;- df_combined %&gt;% \n  arrange(Periodo)\n\ndf_04 &lt;- df_ordenado %&gt;%\n  filter (Periodo == 2004)%&gt;%\n  filter(CCAA ==\"Total Nacional\") %&gt;%\n  mutate(Total_2decimales = round(Total, 2),\n         csum = rev(cumsum(rev(Total_2decimales))),\n         posicion = Total_2decimales/2 + lead(csum, 1))%&gt;%\n  mutate(posicion = ifelse(is.na(posicion), Total_2decimales/2, posicion))\n\ndf_08 &lt;- df_ordenado %&gt;%\n  filter (Periodo == 2008)%&gt;%\n  filter(CCAA== \"Total Nacional\") %&gt;%\n  mutate(Total_2decimales = round(Total, 2),\n         csum = rev(cumsum(rev(Total_2decimales))),\n         posicion = Total_2decimales/2 + lead(csum, 1))%&gt;%\n  mutate(posicion = ifelse(is.na(posicion), Total_2decimales/2, posicion))\n\ndf_10 &lt;- df_ordenado %&gt;%\n  filter (Periodo == 2010)%&gt;%\n  filter(CCAA == \"Total Nacional\") %&gt;%\n  mutate(Total_2decimales = round(Total, 2),\n         csum = rev(cumsum(rev(Total_2decimales))),\n         posicion = Total_2decimales/2 + lead(csum, 1))%&gt;%\n  mutate(posicion = ifelse(is.na(posicion), Total_2decimales/2, posicion))\n\ndf_17 &lt;- df_ordenado %&gt;%\n  filter (Periodo == 2017)%&gt;%\n  filter(CCAA== \"Total Nacional\")%&gt;%\n  mutate(Total_2decimales = round(Total, 2),\n         csum = rev(cumsum(rev(Total_2decimales))),\n         posicion = Total_2decimales/2 + lead(csum, 1))%&gt;%\n  mutate(posicion = ifelse(is.na(posicion), Total_2decimales/2, posicion))\n\nlibrary(ggrepel)\n\np_2004 &lt;- ggplot(df_04, aes(x = \"\", y = Total, fill = fct_inorder(Regimen_tenencia))) +\n  geom_col(width = 1) +\n  labs(fill = NULL) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"Set3\") +\n  geom_text(data = df_04,\n            aes(y = Total, label = paste0(Total, \"%\")),\n            position = position_stack(vjust = 0.5),\n            size = 4, show.legend = FALSE) + \n  theme_void() +\n  theme(legend.position = \"none\")\n\n\np_2008 &lt;- ggplot(df_08, aes(x = \"\", y = Total, fill = fct_inorder(Regimen_tenencia))) +\n  geom_col(width = 1) +\n  labs(fill = NULL) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"Set3\")  +\n  geom_text(data = df_08,\n            aes(y = Total, label = paste0(Total, \"%\")),\n            position = position_stack(vjust = 0.5),  # Ajuste vertical\n            size = 4, show.legend = FALSE) +\n  theme_void()\n\np_2010 &lt;- ggplot(df_10, aes(x = \"\", y = Total, fill = fct_inorder(Regimen_tenencia))) +\n  geom_col(width = 1) +\n  labs(fill = NULL) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"Set3\") +\n  geom_text(data = df_10,\n            aes(y = Total, label = paste0(Total, \"%\")),\n            position = position_stack(vjust = 0.5),  # Ajuste vertical\n            size = 4, show.legend = FALSE) +\n  theme_void() +\n  theme(legend.position = \"none\")\n\np_2017&lt;- ggplot(df_17, aes(x = \"\", y = Total, fill = fct_inorder(Regimen_tenencia))) +\n  geom_col(width = 1) +\n  labs(fill = NULL) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"Set3\") +\n  geom_text(data = df_17,\n            aes(y = Total, label = paste0(Total, \"%\")),\n            position = position_stack(vjust = 0.5),\n            size = 4, show.legend = FALSE) +\n  theme_void() +\n  theme(legend.position = \"none\")\n\nlibrary(patchwork)\n\ncombined_plot &lt;- p_2004 + p_2008 + p_2010 + p_2017 +\n  plot_annotation(\n    title = \"Hogares por régimen de tenencia de la vivienda (%)\",\n    subtitle = \"(2004,2008,2010,2017)\",\n    caption = \"Fuente: INE\"\n  )\n\ncombined_plot"
  },
  {
    "objectID": "slides_trabajo.html#section-5",
    "href": "slides_trabajo.html#section-5",
    "title": "Análisis del coste de vida",
    "section": "7",
    "text": "7\n\n\nCódigo\ndatos &lt;- \"./datos/DATOS_VIVIENDA.xlsx\"\ninfo &lt;- rio::import(datos)\n\ndf3 &lt;- info %&gt;%\n  filter(COMUNIDAD == \"Total nacional\")\n\n\np&lt;- ggplot(df3,\n       aes(\n  AÑO, \n  ÍNDICE,\n  color = TAMAÑO)) +\n  geom_line(size = 0.95) +\n  ggthemes::theme_stata() + \n  labs(\n  title = \"Evolución del Índice general de precios de alquiler por tamaño de vivienda (2015 = 100).\",\n  subtitle = \"serie 2011 - 2021\",\n  caption = \"Fuente: INE\")\n\npp &lt;- ggplotly(p)\n\n\np_plotly &lt;- pp %&gt;%\n  layout(\n    legend = list(\n      title = \"Tamaño\",\n      font = list(\n        family = \"Arial\", \n        size = 12\n      ),\n      bgcolor = \"white\",\n      bordercolor = \"black\",\n      borderwidth = 1,\n      itemsizing = \"constant\"  \n    )\n  )\n\np_plotly &lt;- p_plotly %&gt;%\n  layout(\n    annotations = list(\n      list(\n        text = \"Fuente: INE\",\n        font = list(\n          family = \"Arial\",\n          size = 10\n        ),\n        x = 1,\n        y = -0.15,\n        showarrow = FALSE,\n        xref = \"paper\",\n        yref = \"paper\",\n        xanchor = \"right\",\n        yanchor = \"auto\"\n      )\n    )\n  )\n\np_plotly"
  },
  {
    "objectID": "slides_trabajo.html#section-6",
    "href": "slides_trabajo.html#section-6",
    "title": "Análisis del coste de vida",
    "section": "8",
    "text": "8\n\n\nCódigo\n\ndatos4&lt;- \"./datos/datos4.csv\"\ndatos4&lt;- rio::import(datos4)\n\np4&lt;- ggplot(datos4, aes(x = reorder(Parámetro, -Cuantia_media), y = Cuantia_media)) + geom_bar(stat = \"identity\", fill = \"skyblue\") +  \n  labs(title = \"Precio del Alquiler por provincia (2018)\",\n       x = \"Provincia\",\n       y = \"Precio medio Alquiler\",\n       caption = \"Ministerio de Fomento, Gobierno de España\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\np4"
  },
  {
    "objectID": "slides_trabajo.html#section-7",
    "href": "slides_trabajo.html#section-7",
    "title": "Análisis del coste de vida",
    "section": "9",
    "text": "9\n\n\nCódigo\n#######MAPA\nlibrary(sf)\nlibrary(tidyverse)\nlibrary(pjpv.curso.R.2022)\n\n\n###cargamos los datos \ndatos_c&lt;- \"./datos/prueba.csv\"\ndatos_c&lt;- rio::import(datos_c)\n\n### En la columna Total queremos poner un punto en vez de una coma \n\ndatos_c &lt;- datos_c%&gt;% mutate(Total = stringr::str_replace(Total, \",\" , \".\" ))\n\n#- Cambiamos el nombre de las columnas \n\ndf_c&lt;- datos_c %&gt;% rename(Indice_precio = Total) %&gt;% rename(CCAA = Comunidades_Autonomas)\n\n###Separamos la columna de CCAA en dos Columnas, una que muestre el código y otra el nombre de la Comunidad Autonoma  \n\ndf_c &lt;- df_c %&gt;%\n  tidyr::separate(CCAA, sep = \" \",\n                  into = c(\"ine_ccaa\", \"ine_ccaa.n\"), extra = \"merge\")\ndf_c&lt;-  drop_na(df_c) #quitamos el total nacional, ya que no se van a utilizar\n\ndf_c&lt;- df_c %&gt;% filter(General == \"General\") %&gt;% filter( Índices_tasas ==\"Media anual\") %&gt;% filter(Periodo == \"2022\") ##cogemos las viviendas generales, la media anual y elegimos el año más reciente que es 2022\n\n\n###Cargamos las geometrías y elegimos las variables que nos interesan\ndf_geo_prov &lt;- pjpv.curso.R.2022::LAU2_prov_2020_canarias\ndf_geo_prov &lt;- df_geo_prov %&gt;% select(ine_prov, ine_prov.n, ine_ccaa, ine_ccaa.n)\n\n##Agregamos geometrías de las Comunidades Autonomas \n\ndf_geo_ccaa &lt;- df_geo_prov %&gt;% group_by(ine_ccaa, ine_ccaa.n) %&gt;% summarize()\ndf_ok &lt;- left_join(df_geo_ccaa, df_c, by = c(\"ine_ccaa\" = \"ine_ccaa\"))\nnames(df_ok)\n#&gt; [1] \"ine_ccaa\"      \"ine_ccaa.n.x\"  \"geometry\"      \"ine_ccaa.n.y\" \n#&gt; [5] \"General\"       \"Índices_tasas\" \"Periodo\"       \"Indice_precio\"\n\n##Calculamos los Centroides\nlibrary(sf)\ndf_geo_ccaa &lt;- cbind(df_geo_ccaa, st_coordinates(st_centroid(df_geo_ccaa$geometry)))\n\n##Juntamos los datos de los precios de los alquileres con las geometrías \ndf_ok &lt;- left_join(df_geo_ccaa, df_c, by = c(\"ine_ccaa\" = \"ine_ccaa\"))\ndf_ok$Indice_precio &lt;- as.numeric(df_ok$Indice_precio)\np &lt;- ggplot() + \n  geom_sf(data = df_ok, \n          aes(geometry = geometry, fill = Indice_precio), \n          color = \"white\", size = 0.09) + \n  coord_sf(xlim = c(-10.00, 5.00), ylim = c(35, NA), expand = TRUE) +\n  scale_fill_continuous(low=\"white\",\n                        high=\"navyblue\",\n                        limits = c(100,160)) +\n  theme_minimal() + \n  theme(panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank()) +\n  theme(axis.title.x=element_blank(),\n        axis.text.x=element_blank(),\n        axis.ticks.x=element_blank(),\n        axis.title.y=element_blank(),\n        axis.text.y=element_blank(),\n        axis.ticks.y=element_blank()) + \n  labs(title = \"Índice de Precios de la Vivienda por Comunidades Autónomas\", \n       subtitle = \"(2022)\",\n       fill = \"Índice\",\n       caption = \"Fuente: INE\")\np"
  },
  {
    "objectID": "slides_trabajo.html#section-8",
    "href": "slides_trabajo.html#section-8",
    "title": "Análisis del coste de vida",
    "section": "10",
    "text": "10\n\n\nCódigo\n##Otro Mapa pero ahora del Indice de Precios de Alquiler \ndatos_alquiler&lt;- \"./datos/59057.csv\"\ndatos_alquiler&lt;- rio::import(datos_alquiler)\n\n##Cambiamos la coma por el punto en la columna Total\ndatos_alquiler&lt;- datos_alquiler%&gt;% mutate(Total = stringr::str_replace(Total, \",\" , \".\" ))\n\n##Separamos la columna de CCAA en dos Columnas, una que muestre el código y otra el nombre de la Comunidad Autonoma  \n\ndatos_alquiler &lt;- datos_alquiler %&gt;%\n  tidyr::separate(CCAA, sep = \" \",\n                  into = c(\"ine_ccaa\", \"ine_ccaa.n\"), extra = \"merge\") \n\n##Quitamos Total Nacional (que no lo necesitamos)\n\ndatos_alquiler&lt;- drop_na(datos_alquiler)\n\n##Cogemos las variables que nos interesan, filtramos por Indice y filtramos por el año 2021(es el más reciente)\n\ndatos_alquiler&lt;- datos_alquiler %&gt;%\n  filter(Tamaño == \"Total\") %&gt;%\n  filter(Dato ==\"Índice\") %&gt;% \n  filter(Periodo == 2021) %&gt;%\n  select(ine_ccaa, ine_ccaa.n, Total)\n\n###Cargamos las geometrías y elegimos las variables que nos interesan\ndf_geo_prov &lt;- pjpv.curso.R.2022::LAU2_prov_2020_canarias\ndf_geo_prov &lt;- df_geo_prov %&gt;% select(ine_prov, ine_prov.n, ine_ccaa, ine_ccaa.n)\n\n##Agregamos geometrías de las Comunidades Autonomas \n\ndf_geo_ccaa &lt;- df_geo_prov %&gt;% group_by(ine_ccaa, ine_ccaa.n) %&gt;% summarize() \ndf_ok &lt;- left_join(df_geo_ccaa, datos_alquiler, by = c(\"ine_ccaa\" = \"ine_ccaa\"))\nnames(df_ok)\n#&gt; [1] \"ine_ccaa\"     \"ine_ccaa.n.x\" \"geometry\"     \"ine_ccaa.n.y\" \"Total\"\n\n##Calculamos los Centroides\nlibrary(sf)\ndf_geo_ccaa &lt;- cbind(df_geo_ccaa, st_coordinates(st_centroid(df_geo_ccaa$geometry)))\n\n##Juntamos los datos de los precios de los alquileres con las geometrías \ndf_ok &lt;- left_join(df_geo_ccaa, datos_alquiler, by = c(\"ine_ccaa\" = \"ine_ccaa\"))\n\n##Gráfico\ndf_ok$Total &lt;- as.numeric(df_ok$Total)\np &lt;- ggplot() + \n  geom_sf(data = df_ok, \n          aes(geometry = geometry, fill = Total), \n          color = \"white\", size = 0.09) + \n  coord_sf(xlim = c(-10.00, 5.00), ylim = c(35, NA), expand = TRUE) +\n  scale_fill_continuous(low=\"white\",high=\"orange\") +\n  theme_minimal() + \n  theme(panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank()) +\n  theme(axis.title.x=element_blank(),\n        axis.text.x=element_blank(),\n        axis.ticks.x=element_blank(),\n        axis.title.y=element_blank(),\n        axis.text.y=element_blank(),\n        axis.ticks.y=element_blank()) + \n  labs(title = \"Índice de Precios del Alquiler  por Comunidades Autónomas\", \n       subtitle = \"(2021)\",\n       fill = \"Índice\",\n       caption = \"Fuente: INE\")\np\n\n\n\n\n\nSlides hechas con Quarto"
  },
  {
    "objectID": "slides_trabajo.html#evolución-del-ipc-general-de-precios-de-alquiler-por-ccaa",
    "href": "slides_trabajo.html#evolución-del-ipc-general-de-precios-de-alquiler-por-ccaa",
    "title": "Análisis del coste de vida",
    "section": "Evolución del IPC general de precios de alquiler por CCAA",
    "text": "Evolución del IPC general de precios de alquiler por CCAA\n\n\nCódigo\nlibrary(patchwork)\ndatos &lt;- \"./datos/DATOS_VIVIENDA.xlsx\"\ninfo &lt;- rio::import(datos)\n\ncoloresg1 &lt;- c(\"#66CDAA\",\"#A52A2A\",\"#53868B\",\"#458B00\")\ncoloresg2 &lt;- c(\"darkgoldenrod3\",\"#9A32CD\", \"deeppink3\", \"#EEEE00\")\ncoloresg3 &lt;- c(\"#8B7E66\", \"#00FF7F\", \"#7FFF00\",\"#00BFFF\",\"#FF3030\", \"darkslategray\")\ncoloresg4 &lt;- c(\"#EEC900\",\"darkseagreen4\", \"#CD5555\", \"#EEA2AD\")\n\n\ndf_cca1 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO, values_from = ÍNDICE) %&gt;%\n  filter(COMUNIDAD %in% c(\"06 Cantabria\", \"02 Aragón\", \"03 Principado de Asturias\", \"12 Galicia\"))\n\ndf_cca2 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO, values_from = ÍNDICE) %&gt;%\n  filter(COMUNIDAD %in% c(\"07 Castilla y León\", \"08 Castilla La Mancha\", \"15 La Rioja\", \"11 Extremadura\"))\n\ndf_cca3 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO, values_from = ÍNDICE) %&gt;%\n  filter(COMUNIDAD %in% c(\"10 Comunitat Valenciana\", \"01 Andalucía\", \"13 Comunidad de Madrid\", \"14 Región de Murcia\", \"09 Cataluña\"))\n\ndf_cca4 &lt;- info %&gt;%\n  pivot_wider(names_from = TAMAÑO, values_from = ÍNDICE) %&gt;%\n  filter(COMUNIDAD %in% c(\"16 Ceuta\", \"17 Melilla\", \"04 Illes Balears\", \"05 Canarias\"))\n\n\nCCAAg1&lt;- ggplot(df_cca1,\n              aes(\n                AÑO,\n                General,\n                color = COMUNIDAD)) +\n  geom_line(size = 0.95) +\n  scale_color_manual(values = coloresg1) + \n  labs(\n    y = \"IPC\") +\n  ggthemes::theme_stata() \n  \nCCAAg2&lt;- ggplot(df_cca2,\n                aes(\n                  AÑO,\n                  General,\n                  color = COMUNIDAD)) +\n  geom_line(size = 0.95) +\n  scale_color_manual(values = coloresg2) + \n  labs(\n    color = NULL,\n    y = \"IPC\") +\n  ggthemes::theme_stata()\n\nCCAAg3&lt;- ggplot(df_cca3,\n                aes(\n                  AÑO,\n                  General,\n                  color = COMUNIDAD)) +\n  geom_line(size = 0.95) +\n  scale_color_manual(values = coloresg3) + \n  labs(\n  color = NULL,\n  y = \"IPC\") +\n  ggthemes::theme_stata() \n\nCCAAg4&lt;- ggplot(df_cca4,\n                aes(\n                  AÑO,\n                  General,\n                  color = COMUNIDAD)) +\n  geom_line(size = 0.95) +\n  scale_color_manual(values = coloresg4) + \n  labs(\n  color = NULL,\n  y = \"IPC\") +\n  ggthemes::theme_stata() \n\nPLOT_CONJUNTO &lt;- ((CCAAg1 + CCAAg2) / (CCAAg3 + CCAAg4)) +\n  plot_layout(guides = \"collect\") +\n  theme(\n    plot.title.position = \"collect\")  +\n  plot_annotation(\n    title = \"Evolución del IPC general de \\n precios de alquiler por CCAA agrupadas (2015 = 100)\",\n    caption = \"Fuente: INE\") & ggthemes::theme_stata() & theme(\n      legend.position = \"right\",\n      legend.direction = \"vertical\",\n      legend.text = element_text(size = 5) ,\n      legend.key.size = unit(0.5,\"cm\"),\n      legend.title = element_text(size = 5),\n      plot.title = element_text(size = 12, hjust = 0.05))\n\nPLOT_CONJUNTO"
  },
  {
    "objectID": "slides_trabajo.html#evolución-del-índice-general-de-precios-por-tamaño-de-la-vivienda",
    "href": "slides_trabajo.html#evolución-del-índice-general-de-precios-por-tamaño-de-la-vivienda",
    "title": "Análisis del coste de vida",
    "section": "Evolución del Índice general de precios por tamaño de la vivienda",
    "text": "Evolución del Índice general de precios por tamaño de la vivienda\n\n\nCódigo\nlibrary(plotly)\ndatos &lt;- \"./datos/DATOS_VIVIENDA.xlsx\"\ninfo &lt;- rio::import(datos)\n\ndf3 &lt;- info %&gt;%\n  filter(COMUNIDAD == \"Total nacional\")\n\n\np&lt;- ggplot(df3,\n       aes(\n  AÑO, \n  ÍNDICE,\n  color = TAMAÑO)) +\n  geom_line(size = 0.95) +\n  ggthemes::theme_stata() + \n  labs(\n  title = \"Evolución del Índice general de precios de alquiler por tamaño de vivienda (2015 = 100).\",\n  subtitle = \"serie 2011 - 2021\",\n  caption = \"Fuente: INE\")\n\npp &lt;- ggplotly(p)\n\n\np_plotly &lt;- pp %&gt;%\n  layout(\n    legend = list(\n      title = \"Tamaño\",\n      font = list(\n        family = \"Arial\", \n        size = 12\n      ),\n      bgcolor = \"white\",\n      bordercolor = \"black\",\n      borderwidth = 1,\n      itemsizing = \"constant\"  \n    )\n  )\n\np_plotly &lt;- p_plotly %&gt;%\n  layout(\n    annotations = list(\n      list(\n        text = \"Fuente: INE\",\n        font = list(\n          family = \"Arial\",\n          size = 10\n        ),\n        x = 1,\n        y = -0.15,\n        showarrow = FALSE,\n        xref = \"paper\",\n        yref = \"paper\",\n        xanchor = \"right\",\n        yanchor = \"auto\"\n      )\n    )\n  )\n\np_plotly"
  },
  {
    "objectID": "slides_trabajo.html#precio-del-alquiler-por-provincias",
    "href": "slides_trabajo.html#precio-del-alquiler-por-provincias",
    "title": "Análisis del coste de vida",
    "section": "Precio del Alquiler por provincias",
    "text": "Precio del Alquiler por provincias\n\n\nCódigo\n\ndatos4&lt;- \"./datos/datos4.csv\"\ndatos4&lt;- rio::import(datos4)\n\np4&lt;- ggplot(datos4, aes(x = reorder(Parámetro, -Cuantia_media), y = Cuantia_media)) + geom_bar(stat = \"identity\", fill = \"skyblue\") +  \n  labs(title = \"Precio del Alquiler por provincia (2018)\",\n       x = \"Provincia\",\n       y = \"Precio medio Alquiler\",\n       caption = \"Ministerio de Fomento, Gobierno de España\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\np4"
  },
  {
    "objectID": "slides_trabajo.html#índice-de-precios-de-la-vivienda-por-ccaa",
    "href": "slides_trabajo.html#índice-de-precios-de-la-vivienda-por-ccaa",
    "title": "Análisis del coste de vida",
    "section": "Índice de Precios de la Vivienda por CCAA",
    "text": "Índice de Precios de la Vivienda por CCAA\n\n\nCódigo\n#######MAPA\nlibrary(sf)\nlibrary(tidyverse)\nlibrary(pjpv.curso.R.2022)\n\n\n###cargamos los datos \ndatos_c&lt;- \"./datos/prueba.csv\"\ndatos_c&lt;- rio::import(datos_c)\n\n### En la columna Total queremos poner un punto en vez de una coma \n\ndatos_c &lt;- datos_c%&gt;% mutate(Total = stringr::str_replace(Total, \",\" , \".\" ))\n\n#- Cambiamos el nombre de las columnas \n\ndf_c&lt;- datos_c %&gt;% rename(Indice_precio = Total) %&gt;% rename(CCAA = Comunidades_Autonomas)\n\n###Separamos la columna de CCAA en dos Columnas, una que muestre el código y otra el nombre de la Comunidad Autonoma  \n\ndf_c &lt;- df_c %&gt;%\n  tidyr::separate(CCAA, sep = \" \",\n                  into = c(\"ine_ccaa\", \"ine_ccaa.n\"), extra = \"merge\")\ndf_c&lt;-  drop_na(df_c) #quitamos el total nacional, ya que no se van a utilizar\n\ndf_c&lt;- df_c %&gt;% filter(General == \"General\") %&gt;% filter( Índices_tasas ==\"Media anual\") %&gt;% filter(Periodo == \"2022\") ##cogemos las viviendas generales, la media anual y elegimos el año más reciente que es 2022\n\n\n###Cargamos las geometrías y elegimos las variables que nos interesan\ndf_geo_prov &lt;- pjpv.curso.R.2022::LAU2_prov_2020_canarias\ndf_geo_prov &lt;- df_geo_prov %&gt;% select(ine_prov, ine_prov.n, ine_ccaa, ine_ccaa.n)\n\n##Agregamos geometrías de las Comunidades Autonomas \n\ndf_geo_ccaa &lt;- df_geo_prov %&gt;% group_by(ine_ccaa, ine_ccaa.n) %&gt;% summarize()\ndf_ok &lt;- left_join(df_geo_ccaa, df_c, by = c(\"ine_ccaa\" = \"ine_ccaa\"))\nnames(df_ok)\n#&gt; [1] \"ine_ccaa\"      \"ine_ccaa.n.x\"  \"geometry\"      \"ine_ccaa.n.y\" \n#&gt; [5] \"General\"       \"Índices_tasas\" \"Periodo\"       \"Indice_precio\"\n\n##Calculamos los Centroides\nlibrary(sf)\ndf_geo_ccaa &lt;- cbind(df_geo_ccaa, st_coordinates(st_centroid(df_geo_ccaa$geometry)))\n\n##Juntamos los datos de los precios de los alquileres con las geometrías \ndf_ok &lt;- left_join(df_geo_ccaa, df_c, by = c(\"ine_ccaa\" = \"ine_ccaa\"))\ndf_ok$Indice_precio &lt;- as.numeric(df_ok$Indice_precio)\np &lt;- ggplot() + \n  geom_sf(data = df_ok, \n          aes(geometry = geometry, fill = Indice_precio), \n          color = \"white\", size = 0.09) + \n  coord_sf(xlim = c(-10.00, 5.00), ylim = c(35, NA), expand = TRUE) +\n  scale_fill_continuous(low=\"white\",\n                        high=\"navyblue\",\n                        limits = c(100,160)) +\n  theme_minimal() + \n  theme(panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank()) +\n  theme(axis.title.x=element_blank(),\n        axis.text.x=element_blank(),\n        axis.ticks.x=element_blank(),\n        axis.title.y=element_blank(),\n        axis.text.y=element_blank(),\n        axis.ticks.y=element_blank()) + \n  labs(title = \"Índice de Precios de la Vivienda por Comunidades Autónomas\", \n       subtitle = \"(2022)\",\n       fill = \"Índice\",\n       caption = \"Fuente: INE\")\np"
  },
  {
    "objectID": "slides_trabajo.html#índice-de-precios-del-alquiler-por-ccaa",
    "href": "slides_trabajo.html#índice-de-precios-del-alquiler-por-ccaa",
    "title": "Análisis del coste de vida",
    "section": "Índice de Precios del Alquiler por CCAA",
    "text": "Índice de Precios del Alquiler por CCAA\n\n\nCódigo\n##Otro Mapa pero ahora del Indice de Precios de Alquiler \ndatos_alquiler&lt;- \"./datos/59057.csv\"\ndatos_alquiler&lt;- rio::import(datos_alquiler)\n\n##Cambiamos la coma por el punto en la columna Total\ndatos_alquiler&lt;- datos_alquiler%&gt;% mutate(Total = stringr::str_replace(Total, \",\" , \".\" ))\n\n##Separamos la columna de CCAA en dos Columnas, una que muestre el código y otra el nombre de la Comunidad Autonoma  \n\ndatos_alquiler &lt;- datos_alquiler %&gt;%\n  tidyr::separate(CCAA, sep = \" \",\n                  into = c(\"ine_ccaa\", \"ine_ccaa.n\"), extra = \"merge\") \n\n##Quitamos Total Nacional (que no lo necesitamos)\n\ndatos_alquiler&lt;- drop_na(datos_alquiler)\n\n##Cogemos las variables que nos interesan, filtramos por Indice y filtramos por el año 2021(es el más reciente)\n\ndatos_alquiler&lt;- datos_alquiler %&gt;%\n  filter(Tamaño == \"Total\") %&gt;%\n  filter(Dato ==\"Índice\") %&gt;% \n  filter(Periodo == 2021) %&gt;%\n  select(ine_ccaa, ine_ccaa.n, Total)\n\n###Cargamos las geometrías y elegimos las variables que nos interesan\ndf_geo_prov &lt;- pjpv.curso.R.2022::LAU2_prov_2020_canarias\ndf_geo_prov &lt;- df_geo_prov %&gt;% select(ine_prov, ine_prov.n, ine_ccaa, ine_ccaa.n)\n\n##Agregamos geometrías de las Comunidades Autonomas \n\ndf_geo_ccaa &lt;- df_geo_prov %&gt;% group_by(ine_ccaa, ine_ccaa.n) %&gt;% summarize() \ndf_ok &lt;- left_join(df_geo_ccaa, datos_alquiler, by = c(\"ine_ccaa\" = \"ine_ccaa\"))\nnames(df_ok)\n#&gt; [1] \"ine_ccaa\"     \"ine_ccaa.n.x\" \"geometry\"     \"ine_ccaa.n.y\" \"Total\"\n\n##Calculamos los Centroides\nlibrary(sf)\ndf_geo_ccaa &lt;- cbind(df_geo_ccaa, st_coordinates(st_centroid(df_geo_ccaa$geometry)))\n\n##Juntamos los datos de los precios de los alquileres con las geometrías \ndf_ok &lt;- left_join(df_geo_ccaa, datos_alquiler, by = c(\"ine_ccaa\" = \"ine_ccaa\"))\n\n##Gráfico\ndf_ok$Total &lt;- as.numeric(df_ok$Total)\np &lt;- ggplot() + \n  geom_sf(data = df_ok, \n          aes(geometry = geometry, fill = Total), \n          color = \"white\", size = 0.09) + \n  coord_sf(xlim = c(-10.00, 5.00), ylim = c(35, NA), expand = TRUE) +\n  scale_fill_continuous(low=\"white\",high=\"orange\") +\n  theme_minimal() + \n  theme(panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank()) +\n  theme(axis.title.x=element_blank(),\n        axis.text.x=element_blank(),\n        axis.ticks.x=element_blank(),\n        axis.title.y=element_blank(),\n        axis.text.y=element_blank(),\n        axis.ticks.y=element_blank()) + \n  labs(title = \"Índice de Precios del Alquiler  por Comunidades Autónomas\", \n       subtitle = \"(2021)\",\n       fill = \"Índice\",\n       caption = \"Fuente: INE\")\np\n\n\n\n\n\nSlides hechas con Quarto"
  },
  {
    "objectID": "slides_trabajo.html#tasa-de-emancipación-para-jóvenes-de-18--34-años",
    "href": "slides_trabajo.html#tasa-de-emancipación-para-jóvenes-de-18--34-años",
    "title": "Análisis del coste de vida",
    "section": "Tasa de emancipación para jóvenes de 18 -34 años",
    "text": "Tasa de emancipación para jóvenes de 18 -34 años\n\n\nCódigo\nlibrary(tidyverse)\nDf_eman &lt;- rio::import(\"./datos/TASA DE EMANCIPACION.csv\")\n\nDf_good &lt;- Df_eman %&gt;%\n  mutate(Year = as.factor(Year)) %&gt;%\n  select(Year, Tasa)\n\nplot_eman &lt;-ggplot(Df_good, aes(Year, Tasa)) + geom_line(group = 1) +\n  labs(\n    title = \"Tasa de emancipación para jóvenes de 18 -34 años.\",\n    x = \"Año\",\n    y = \"Tasa de emancipación\",\n    caption = \"Fuente: datos.gob.es (Gobierno de España).\"\n  ) +\n  ggthemes::theme_stata()\n\nplot_eman"
  },
  {
    "objectID": "slides_trabajo.html#distribución-de-la-tenencia-de-vivienda-por-países-europeos",
    "href": "slides_trabajo.html#distribución-de-la-tenencia-de-vivienda-por-países-europeos",
    "title": "Análisis del coste de vida",
    "section": "Distribución de la tenencia de vivienda por países europeos",
    "text": "Distribución de la tenencia de vivienda por países europeos\n\n\nCódigo\ndatos_europa&lt;- \"./datos/datos_europa.csv\"\ndatos_europa&lt;- rio::import(datos_europa)\ndatos_europa&lt;- datos_europa %&gt;% select(tenure,geo,OBS_VALUE)\n\ncategorias&lt;- c(\"OWN_L\" = \"Propietario,\\n con hipoteca o préstamo\", \"OWN_NL\" = \"Propietario,\\n sin hipoteca ni préstamo de vivienda pendiente\", \"RENT_FR\" = \"Inquilino,\\n alquiler a precio reducido o gratis\", \"RENT_MKT\" = \"Inquilino,\\n alquiler a precio de mercado\")\n\np&lt;- ggplot(datos_europa, aes(x = geo, y = OBS_VALUE,  fill = tenure)) +\n  geom_col( position = \"stack\", color = \"white\") +\n  labs(title = \"Distribución de la tenencia de vivienda por países europeos (2018)\", \n       x = \"País\", y = \"%\", caption = \"Fuente:Eurostat\") +\n  ggthemes::theme_stata() +\n  theme(\n    plot.title = element_text(size = 16, hjust = 0.5, face = \"bold\"),\n    legend.key.size = unit(0.2,\"cm\"),\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    legend.title = element_text(face = \"bold\"),\n    legend.position = \"bottom\",\n    panel.grid.major.y = element_blank(),\n    panel.grid.minor.y = element_blank()) +\n  scale_fill_brewer(palette = \"Set3\") \np + scale_fill_manual(values = c(\"OWN_L\" = \"blue\", \"OWN_NL\" = \"red\", \"RENT_FR\" = \"yellow\", \"RENT_MKT\" =\"green\" ), labels = categorias) + guides(fill = guide_legend( keywidth = 0.5, keyheight = 0.5, title.theme = element_text(size = 5), label.theme = element_text(size = 5)))\n\n\n\n\n\n\n\n\n\n## Evolución de la tenencia de la Vivienda\n\n\nCódigo\n######gráfico pastel\n\n##Cargamos los datos \nd_tenencia&lt;- \"./datos/regimen_tenencia.csv\"\nd_tenencia&lt;- rio::import(d_tenencia)\n\n##Cambiamos la coma por el punto en la columna Total\nd_tenencia &lt;- d_tenencia%&gt;% mutate(Total = stringr::str_replace(Total, \",\" , \".\" ))\nstr(d_tenencia)\n#&gt; 'data.frame':    1120 obs. of  4 variables:\n#&gt;  $ CCAA            : chr  \"Total Nacional\" \"Total Nacional\" \"Total Nacional\" \"Total Nacional\" ...\n#&gt;  $ Regimen_tenencia: chr  \"Propiedad\" \"Propiedad\" \"Propiedad\" \"Propiedad\" ...\n#&gt;  $ Periodo         : int  2017 2016 2015 2014 2013 2012 2011 2010 2009 2008 ...\n#&gt;  $ Total           : chr  \"76.7\" \"77.1\" \"77.3\" \"78\" ...\n\nd_tenencia$Total &lt;- as.numeric(d_tenencia$Total)\n\nPropiedad &lt;- d_tenencia%&gt;%\n  filter (Regimen_tenencia == \"Propiedad\") %&gt;%\n  filter (CCAA == \"Total Nacional\") %&gt;%\n  group_by(Periodo, Regimen_tenencia) \n\nAlquiler_precio_mercado&lt;- d_tenencia %&gt;%\n  filter(Regimen_tenencia == \"Alquiler a precio de mercado\") %&gt;%\n  group_by(Periodo, Regimen_tenencia)\n\nAlquiler_inferior_precio&lt;- d_tenencia %&gt;%\n  filter(Regimen_tenencia == \"Alquiler inferior al precio de mercado\") %&gt;%\n  group_by(Periodo, Regimen_tenencia)\n\nCesion&lt;- d_tenencia %&gt;% \n  filter(Regimen_tenencia == \"Cesión\") %&gt;%\n  group_by(Periodo, Regimen_tenencia)\n\ndf_combined &lt;- Propiedad %&gt;%\n  full_join(Alquiler_precio_mercado) %&gt;%\n  full_join(Alquiler_inferior_precio) %&gt;%\n  full_join(Cesion) %&gt;% filter(CCAA==\"Total Nacional\") \n\ndf_ordenado &lt;- df_combined %&gt;% \n  arrange(Periodo)\n\ndf_04 &lt;- df_ordenado %&gt;%\n  filter (Periodo == 2004)%&gt;%\n  filter(CCAA ==\"Total Nacional\") %&gt;%\n  mutate(Total_2decimales = round(Total, 2),\n         csum = rev(cumsum(rev(Total_2decimales))),\n         posicion = Total_2decimales/2 + lead(csum, 1))%&gt;%\n  mutate(posicion = ifelse(is.na(posicion), Total_2decimales/2, posicion))\n\ndf_08 &lt;- df_ordenado %&gt;%\n  filter (Periodo == 2008)%&gt;%\n  filter(CCAA== \"Total Nacional\") %&gt;%\n  mutate(Total_2decimales = round(Total, 2),\n         csum = rev(cumsum(rev(Total_2decimales))),\n         posicion = Total_2decimales/2 + lead(csum, 1))%&gt;%\n  mutate(posicion = ifelse(is.na(posicion), Total_2decimales/2, posicion))\n\ndf_10 &lt;- df_ordenado %&gt;%\n  filter (Periodo == 2010)%&gt;%\n  filter(CCAA == \"Total Nacional\") %&gt;%\n  mutate(Total_2decimales = round(Total, 2),\n         csum = rev(cumsum(rev(Total_2decimales))),\n         posicion = Total_2decimales/2 + lead(csum, 1))%&gt;%\n  mutate(posicion = ifelse(is.na(posicion), Total_2decimales/2, posicion))\n\ndf_17 &lt;- df_ordenado %&gt;%\n  filter (Periodo == 2017)%&gt;%\n  filter(CCAA== \"Total Nacional\")%&gt;%\n  mutate(Total_2decimales = round(Total, 2),\n         csum = rev(cumsum(rev(Total_2decimales))),\n         posicion = Total_2decimales/2 + lead(csum, 1))%&gt;%\n  mutate(posicion = ifelse(is.na(posicion), Total_2decimales/2, posicion))\n\nlibrary(ggrepel)\n\np_2004 &lt;- ggplot(df_04, aes(x = \"\", y = Total, fill = fct_inorder(Regimen_tenencia))) +\n  geom_col(width = 1) +\n  labs(fill = NULL) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"Set3\") +\n  geom_text(data = df_04,\n            aes(y = Total, label = paste0(Total, \"%\")),\n            position = position_stack(vjust = 0.5),\n            size = 4, show.legend = FALSE) + \n  theme_void() +\n  theme(legend.position = \"none\")\n\n\np_2008 &lt;- ggplot(df_08, aes(x = \"\", y = Total, fill = fct_inorder(Regimen_tenencia))) +\n  geom_col(width = 1) +\n  labs(fill = NULL) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"Set3\")  +\n  geom_text(data = df_08,\n            aes(y = Total, label = paste0(Total, \"%\")),\n            position = position_stack(vjust = 0.5),  # Ajuste vertical\n            size = 4, show.legend = FALSE) +\n  theme_void()\n\np_2010 &lt;- ggplot(df_10, aes(x = \"\", y = Total, fill = fct_inorder(Regimen_tenencia))) +\n  geom_col(width = 1) +\n  labs(fill = NULL) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"Set3\") +\n  geom_text(data = df_10,\n            aes(y = Total, label = paste0(Total, \"%\")),\n            position = position_stack(vjust = 0.5),  # Ajuste vertical\n            size = 4, show.legend = FALSE) +\n  theme_void() +\n  theme(legend.position = \"none\")\n\np_2017&lt;- ggplot(df_17, aes(x = \"\", y = Total, fill = fct_inorder(Regimen_tenencia))) +\n  geom_col(width = 1) +\n  labs(fill = NULL) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"Set3\") +\n  geom_text(data = df_17,\n            aes(y = Total, label = paste0(Total, \"%\")),\n            position = position_stack(vjust = 0.5),\n            size = 4, show.legend = FALSE) +\n  theme_void() +\n  theme(legend.position = \"none\")\n\nlibrary(patchwork)\n\ncombined_plot &lt;- p_2004 + p_2008 + p_2010 + p_2017 +\n  plot_annotation(\n    title = \"Evolución  de la tenencia de la Vivienda (%)\",\n    subtitle = \"(2004,2008,2010,2017)\",\n    caption = \"Fuente: INE\"\n  )\n\ncombined_plot"
  }
]