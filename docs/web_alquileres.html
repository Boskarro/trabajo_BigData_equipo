<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Javier Belenguer Esteban (besja@alumni.uv.es)">
<meta name="author" content="Juan Bosco Pujol Cerdá (pucer@alumni.uv.es)">
<meta name="description" content="Un tema muy candente en la actualidad.">

<title>Trabajo BIGDATA - Evolución y análisis del precio del alquiler en España.</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./images/Logo_web.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: white;
      }

      .quarto-title-block .quarto-title-banner {
        color: white;
      }
</style>
<script src="site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.2/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./my_favicon.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Trabajo BIGDATA</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Buscar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Navegación de palanca" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="./index.html" rel="" target=""><i class="bi bi-house-door" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./web_alquileres.html" rel="" target="" aria-current="page">
 <span class="menu-text">Trabajo en equipo</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./slides_trabajo.html" rel="" target="_blank">
 <span class="menu-text">Slides</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:pucer@alumni.uv.es" rel="" target=""><i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-left">
      <div class="quarto-title-block"><div><h1 class="title">Evolución y análisis del precio del alquiler en España.</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Código</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Mostrar todo el código</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Ocultar todo el código</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">Ver el código fuente</a></li></ul></div></div>
                  <div>
        <div class="description">
          <p>Un tema muy candente en la actualidad.</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">trabajo BigData</div>
                <div class="quarto-category">Alquileres</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Autores/as</div>
      <div class="quarto-title-meta-contents">
               <p>Javier Belenguer Esteban (besja@alumni.uv.es) </p>
               <p>Juan Bosco Pujol Cerdá (pucer@alumni.uv.es) </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Fecha de publicación</div>
      <div class="quarto-title-meta-contents">
        <p class="date">6 de diciembre de 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#por-qué-este-tema-y-para-qué" id="toc-por-qué-este-tema-y-para-qué" class="nav-link active" data-scroll-target="#por-qué-este-tema-y-para-qué">¿POR QUÉ ESTE TEMA Y PARA QUÉ?</a>
  <ul class="collapse">
  <li><a href="#puede-un-sueldo-promedio-permitirse-estos-consumos" id="toc-puede-un-sueldo-promedio-permitirse-estos-consumos" class="nav-link" data-scroll-target="#puede-un-sueldo-promedio-permitirse-estos-consumos">¿Puede un sueldo promedio permitirse estos consumos?</a></li>
  </ul></li>
  <li><a href="#centrándonos-en-el-tema-de-la-vivienda" id="toc-centrándonos-en-el-tema-de-la-vivienda" class="nav-link" data-scroll-target="#centrándonos-en-el-tema-de-la-vivienda">CENTRÁNDONOS EN EL TEMA DE LA VIVIENDA</a>
  <ul class="collapse">
  <li><a href="#distribución-del-régimen-de-tenencia-de-la-vivienda-en-europa." id="toc-distribución-del-régimen-de-tenencia-de-la-vivienda-en-europa." class="nav-link" data-scroll-target="#distribución-del-régimen-de-tenencia-de-la-vivienda-en-europa.">Distribución del régimen de tenencia de la vivienda en Europa.</a></li>
  <li><a href="#análisis-de-la-vivienda-en-españa" id="toc-análisis-de-la-vivienda-en-españa" class="nav-link" data-scroll-target="#análisis-de-la-vivienda-en-españa">Análisis de la vivienda en España</a></li>
  <li><a href="#evolución-de-los-alquileres." id="toc-evolución-de-los-alquileres." class="nav-link" data-scroll-target="#evolución-de-los-alquileres.">Evolución de los alquileres.</a></li>
  <li><a href="#evolución-de-los-precios-de-la-vivienda." id="toc-evolución-de-los-precios-de-la-vivienda." class="nav-link" data-scroll-target="#evolución-de-los-precios-de-la-vivienda.">Evolución de los precios de la vivienda.</a></li>
  </ul></li>
  <li><a href="#conclusión" id="toc-conclusión" class="nav-link" data-scroll-target="#conclusión">CONCLUSIÓN</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-left" id="quarto-document-content">




<section id="por-qué-este-tema-y-para-qué" class="level2">
<h2 class="anchored" data-anchor-id="por-qué-este-tema-y-para-qué">¿POR QUÉ ESTE TEMA Y PARA QUÉ?</h2>
<p>El tema del precio de la vivienda, en especial de los alquileres, es de gran preocupación para una gran parte de la población y más aún para los jóvenes. Son incontables las veces que hemos escuchado a la gente por la calle quejarse de lo caro que es permitirse una vivienda y más aún independizarse, son cada vez más el número de adultos jóvenes (entre 18 y 30 años) los que deciden quedarse viviendo en casa de sus padres aún cobrando un salario. Esto no es sorpresa alguna, pensemos que para un individuo el hecho de vivir con plena independencia de sus padres requiere la capacidad de costearse una serie de bienes y servicios imprescindibles tales como:</p>
<ul>
<li>Su cesta de compra habitual.</li>
<li>Costes de carburante o transportes públicos.</li>
<li>El coste de la hipoteca o el alquiler de la vivienda en la que habita.</li>
<li>Coste de servicios recurrentes como el gimnasio, peluquero/barbero…</li>
<li>Gastos en ocio (como el consumo de bebidas alcohólicas o refrescos, cine, festivales o discotecas, viajes…)</li>
</ul>
<p>En la siguiente gráfica podemos visualizar el grave empeoramiento de la tasa de emancipación a medida que han pasado los años.</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2"></a>Df_eman <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/TASA DE EMANCIPACION.csv"</span>)</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a>Df_good <span class="ot">&lt;-</span> Df_eman <span class="sc">%&gt;%</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb1-6"><a href="#cb1-6"></a>  <span class="fu">select</span>(Year, Tasa)</span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a>plot_eman <span class="ot">&lt;-</span><span class="fu">ggplot</span>(Df_good, <span class="fu">aes</span>(Year, Tasa)) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="at">group =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb1-9"><a href="#cb1-9"></a>  <span class="fu">labs</span>(</span>
<span id="cb1-10"><a href="#cb1-10"></a>    <span class="at">title =</span> <span class="st">"Tasa de emancipación para jóvenes de 18 -34 años."</span>,</span>
<span id="cb1-11"><a href="#cb1-11"></a>    <span class="at">x =</span> <span class="st">"Año"</span>,</span>
<span id="cb1-12"><a href="#cb1-12"></a>    <span class="at">y =</span> <span class="st">"Tasa de emancipación"</span>,</span>
<span id="cb1-13"><a href="#cb1-13"></a>    <span class="at">caption =</span> <span class="st">"Fuente: datos.gob.es (Gobierno de España)."</span></span>
<span id="cb1-14"><a href="#cb1-14"></a>  ) <span class="sc">+</span></span>
<span id="cb1-15"><a href="#cb1-15"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>()</span>
<span id="cb1-16"><a href="#cb1-16"></a></span>
<span id="cb1-17"><a href="#cb1-17"></a>plot_eman</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="web_alquileres_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<section id="puede-un-sueldo-promedio-permitirse-estos-consumos" class="level3">
<h3 class="anchored" data-anchor-id="puede-un-sueldo-promedio-permitirse-estos-consumos">¿Puede un sueldo promedio permitirse estos consumos?</h3>
<p>Vamos a tomar como referencia el salario promedio en España y su evolución a lo largo de una serie temporal ( en este caso 2006 -2020).</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="fu">library</span>(plotly)</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb2-5"><a href="#cb2-5"></a></span>
<span id="cb2-6"><a href="#cb2-6"></a>SALARIOS <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/datos_salariomedio.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>  <span class="fu">select</span>(Año, Salariomedio) <span class="sc">%&gt;%</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>  <span class="fu">mutate</span>(<span class="at">Variacion =</span>((Salariomedio <span class="sc">-</span> <span class="fu">lag</span>(Salariomedio))<span class="sc">/</span><span class="fu">lag</span>(Salariomedio))<span class="sc">*</span><span class="dv">100</span>)</span>
<span id="cb2-10"><a href="#cb2-10"></a></span>
<span id="cb2-11"><a href="#cb2-11"></a></span>
<span id="cb2-12"><a href="#cb2-12"></a>Evo_salarios <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(SALARIOS, <span class="fu">aes</span>(Año, Salariomedio)) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"aquamarine4"</span>, <span class="at">size =</span> <span class="fl">0.95</span>) <span class="sc">+</span> ggthemes<span class="sc">::</span> <span class="fu">theme_stata</span>()</span>
<span id="cb2-13"><a href="#cb2-13"></a></span>
<span id="cb2-14"><a href="#cb2-14"></a>  </span>
<span id="cb2-15"><a href="#cb2-15"></a>Evo_salarios <span class="sc">+</span> <span class="fu">labs</span>(</span>
<span id="cb2-16"><a href="#cb2-16"></a>  <span class="at">title =</span> <span class="st">"Evolución del salario medio anual."</span>,</span>
<span id="cb2-17"><a href="#cb2-17"></a>  <span class="at">subtitle =</span> <span class="st">"Serie 2006-2020."</span>,</span>
<span id="cb2-18"><a href="#cb2-18"></a>  <span class="at">y =</span> <span class="st">"Salario medio (miles de euros)"</span>,</span>
<span id="cb2-19"><a href="#cb2-19"></a>  <span class="at">caption =</span> <span class="st">"Fuente: Epdata"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="web_alquileres_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<p>Como se puede observar en la gráfica de arriba, podemos identificar 2 etapas de fuerte crecimiento del salario promedio:</p>
<ul>
<li>De 2006 a 2008</li>
<li>De 2014 a 2019</li>
</ul>
<p>La primera es atribuile al periodo de fuerte expansión económica que experimentó la economía española durante el principio de los 2000 junto con el boom del ladrillo, mientras que la segunda se debe al periodo de fuerte recuperación económica tras los años de crisis.</p>
<p>Por otro lado, se puede observar una caída durante el periodo 2011 - 2014 debido al estallido de la crisis de 2008, se puede remarcar en ese mismo periodo (2008-2011) el estancamiento del salario promedio. No obstante, conviene visualizar estos datos también en tasas de crecimiento:</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a></span>
<span id="cb3-2"><a href="#cb3-2"></a>Var_Salarios <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(SALARIOS, <span class="fu">aes</span>(Año, Variacion)) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"#53868B"</span>, <span class="at">size =</span> <span class="fl">0.95</span>) <span class="sc">+</span> ggthemes<span class="sc">::</span> <span class="fu">theme_stata</span>()</span>
<span id="cb3-3"><a href="#cb3-3"></a></span>
<span id="cb3-4"><a href="#cb3-4"></a>Var_Salarios <span class="sc">+</span> <span class="fu">labs</span>(</span>
<span id="cb3-5"><a href="#cb3-5"></a>  <span class="at">title =</span> <span class="st">"Crecimiento del salario medio."</span>,</span>
<span id="cb3-6"><a href="#cb3-6"></a>  <span class="at">subtitle =</span> <span class="st">"Serie 2006-2020."</span>,</span>
<span id="cb3-7"><a href="#cb3-7"></a>  <span class="at">y =</span> <span class="st">"Variación en porcentaje"</span>,</span>
<span id="cb3-8"><a href="#cb3-8"></a>  <span class="at">caption =</span> <span class="st">"Fuente: Epdata"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="web_alquileres_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<p>Teniendo en cuenta la evolución en tasas podemos fijarnos que la primera etapa de crecimiento del salario español mostraba una tendencia decreciente mientras que la segunda todo lo contrario. Las razones de este comportamiento son las mismas, ya que en el boom la economía española estaba creciendo por encima de su potencial y comenzaba a estancarse mientras que en un periodo de recuperación al estar alejados de nuestro potencial la tasa de crecimiento muestra tendencia creciente. Consideramos que es bastante obvia la caída del salario en 2020 debido a la pandemia covid, no es necesario desarrollar en este aspecto.</p>
<p>Volviendo a la pregunta principal con lo que hemos visto, si el crecimiento del salario medio español a lo largo de los últimos 20 años es similar o superior al del IPC, podemos afirmar que será capaz de cubrir los gastos necesarios para un individuo mencionados al principio. Sin embargo, no podemos asegurar esto último sin informarnos acerca del crecimiento de los precios de dichos bienes y servicios.</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb4-3"><a href="#cb4-3"></a>IPC<span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/ipc_bueno.csv"</span>)</span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a>df_IPC <span class="ot">&lt;-</span> IPC <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="fu">rename</span>(<span class="at">IPC =</span> indice_precios_consumo_tasas_variacion) <span class="sc">%&gt;%</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>  <span class="fu">select</span>(indicadores,grupos_coicop_nombre,provincias_nombre,periodos_id,IPC) <span class="sc">%&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8"></a>  <span class="fu">filter</span>(periodos_id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"2002M01"</span>,<span class="st">"2003M01"</span>,<span class="st">"2004M01"</span>,<span class="st">"2005M01"</span>,<span class="st">"2006M01"</span>,<span class="st">"2007M01"</span>,<span class="st">"2008M01"</span>,<span class="st">"2009M01"</span>,<span class="st">"2010M01"</span>,<span class="st">"2011M01"</span>,<span class="st">"2012M01"</span>,<span class="st">"2013M01"</span>,<span class="st">"2014M01"</span>,<span class="st">"2015M01"</span>,<span class="st">"2016M01"</span>))</span>
<span id="cb4-9"><a href="#cb4-9"></a></span>
<span id="cb4-10"><a href="#cb4-10"></a></span>
<span id="cb4-11"><a href="#cb4-11"></a>df_IPC_valores <span class="ot">&lt;-</span> df_IPC <span class="sc">%&gt;%</span></span>
<span id="cb4-12"><a href="#cb4-12"></a>  <span class="fu">filter</span>(indicadores <span class="sc">==</span> <span class="st">"Índices"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-13"><a href="#cb4-13"></a>  <span class="fu">filter</span>(provincias_nombre <span class="sc">==</span> <span class="st">"España"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-14"><a href="#cb4-14"></a>  <span class="fu">mutate</span>(<span class="at">periodos_id =</span> <span class="fu">as.Date</span>(<span class="fu">paste0</span>(<span class="fu">substr</span>(periodos_id, <span class="dv">1</span>, <span class="dv">4</span>), <span class="fu">substr</span>(periodos_id, <span class="dv">6</span>, <span class="dv">7</span>), <span class="st">"-01"</span>), <span class="at">format =</span> <span class="st">"%Y%m-%d"</span>))</span>
<span id="cb4-15"><a href="#cb4-15"></a></span>
<span id="cb4-16"><a href="#cb4-16"></a>plot_IPC_valores <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_IPC_valores, <span class="fu">aes</span>(periodos_id, IPC, <span class="at">group =</span> grupos_coicop_nombre, <span class="at">color =</span> grupos_coicop_nombre)) <span class="sc">+</span> </span>
<span id="cb4-17"><a href="#cb4-17"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb4-18"><a href="#cb4-18"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() <span class="sc">+</span></span>
<span id="cb4-19"><a href="#cb4-19"></a>  <span class="fu">theme</span>(</span>
<span id="cb4-20"><a href="#cb4-20"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(</span>
<span id="cb4-21"><a href="#cb4-21"></a>      <span class="at">angle =</span> <span class="dv">75</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">margin =</span> <span class="fu">margin</span>(</span>
<span id="cb4-22"><a href="#cb4-22"></a>        <span class="at">r =</span> <span class="dv">5</span>, <span class="at">b =</span> <span class="dv">5</span>, <span class="at">l =</span> <span class="dv">5</span>)),</span>
<span id="cb4-23"><a href="#cb4-23"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">5</span>),</span>
<span id="cb4-24"><a href="#cb4-24"></a>    <span class="at">panel.spacing =</span> <span class="fu">unit</span>(<span class="fl">0.75</span>, <span class="st">"lines"</span>),</span>
<span id="cb4-25"><a href="#cb4-25"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb4-26"><a href="#cb4-26"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"cm"</span>),</span>
<span id="cb4-27"><a href="#cb4-27"></a>    <span class="at">legend.key.height =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"cm"</span>),</span>
<span id="cb4-28"><a href="#cb4-28"></a>    <span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="fl">0.1</span>,<span class="st">"cm"</span>),</span>
<span id="cb4-29"><a href="#cb4-29"></a>    <span class="at">legend.direction =</span> <span class="st">"vertical"</span>,</span>
<span id="cb4-30"><a href="#cb4-30"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb4-31"><a href="#cb4-31"></a>  <span class="fu">labs</span>(</span>
<span id="cb4-32"><a href="#cb4-32"></a>    <span class="at">title =</span> <span class="st">"Evolución IPC por grupos COICOP"</span>,</span>
<span id="cb4-33"><a href="#cb4-33"></a>    <span class="at">subtitle =</span> <span class="st">"Serie 2002 - 2016"</span>,</span>
<span id="cb4-34"><a href="#cb4-34"></a>    <span class="at">x =</span> <span class="st">"Periodo"</span>,</span>
<span id="cb4-35"><a href="#cb4-35"></a>    <span class="at">y =</span> <span class="st">"IPC"</span>,</span>
<span id="cb4-36"><a href="#cb4-36"></a>    <span class="at">caption =</span> <span class="st">"Fuente: datos.gob.es (Gobierno de España)"</span>,</span>
<span id="cb4-37"><a href="#cb4-37"></a>    <span class="at">color =</span> <span class="st">"Grupos COICOP"</span></span>
<span id="cb4-38"><a href="#cb4-38"></a>  ) <span class="sc">+</span></span>
<span id="cb4-39"><a href="#cb4-39"></a>  <span class="fu">facet_wrap</span>(</span>
<span id="cb4-40"><a href="#cb4-40"></a>    <span class="fu">vars</span>(grupos_coicop_nombre),</span>
<span id="cb4-41"><a href="#cb4-41"></a>    <span class="at">nrow =</span> <span class="dv">4</span>,</span>
<span id="cb4-42"><a href="#cb4-42"></a>    <span class="at">ncol =</span> <span class="dv">4</span>,</span>
<span id="cb4-43"><a href="#cb4-43"></a>    <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="at">grupos_coicop_nombre =</span> <span class="cf">function</span>(label) <span class="fu">str_wrap</span>(label, <span class="at">width =</span> <span class="dv">20</span>))) <span class="sc">+</span></span>
<span id="cb4-44"><a href="#cb4-44"></a>  <span class="fu">theme</span>(<span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>))</span>
<span id="cb4-45"><a href="#cb4-45"></a></span>
<span id="cb4-46"><a href="#cb4-46"></a>plot_animado <span class="ot">&lt;-</span> plot_IPC_valores <span class="sc">+</span> <span class="fu">transition_reveal</span>(periodos_id) <span class="sc">+</span> <span class="fu">view_follow</span>(<span class="at">fixed_y =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-47"><a href="#cb4-47"></a></span>
<span id="cb4-48"><a href="#cb4-48"></a>plot_animado</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="web_alquileres_files/figure-html/unnamed-chunk-4-1.gif" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<p>En la gráfica animada de arriba se nos ilustra el crecimiento del IPC en distintos grupos de bienes/servicios de consumo. Al mostrar una evolución de precios a lo largo de un periodo de 14 años, lo normal es que haya un crecimiento en el nivel de precios sostenido y a un ritmo bajo. No obstante, llama la atención el acusado crecimiento de los precios para las <strong>bebidas alcohólicas y tabaco</strong> (cuyas demandas se caracterizan por ser inelásticas) Y la <strong>enseñanza</strong> y la <strong>vivienda</strong>, debido a que su crecimiento se acelera al final del periodo. Para ser más precisos, observémos el comportamiento en tasas de crecimiento:</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb5-3"><a href="#cb5-3"></a>IPC<span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/ipc_bueno.csv"</span>)</span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a>df_IPC <span class="ot">&lt;-</span> IPC <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>  <span class="fu">rename</span>(<span class="at">IPC =</span> indice_precios_consumo_tasas_variacion) <span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>  <span class="fu">select</span>(indicadores,grupos_coicop_nombre,provincias_nombre,periodos_id,IPC) <span class="sc">%&gt;%</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>  <span class="fu">filter</span>(periodos_id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"2002M01"</span>,<span class="st">"2003M01"</span>,<span class="st">"2004M01"</span>,<span class="st">"2005M01"</span>,<span class="st">"2006M01"</span>,<span class="st">"2007M01"</span>,<span class="st">"2008M01"</span>,<span class="st">"2009M01"</span>,<span class="st">"2010M01"</span>,<span class="st">"2011M01"</span>,<span class="st">"2012M01"</span>,<span class="st">"2013M01"</span>,<span class="st">"2014M01"</span>,<span class="st">"2015M01"</span>,<span class="st">"2016M01"</span>))</span>
<span id="cb5-9"><a href="#cb5-9"></a></span>
<span id="cb5-10"><a href="#cb5-10"></a></span>
<span id="cb5-11"><a href="#cb5-11"></a>df_IPC_valores <span class="ot">&lt;-</span> df_IPC <span class="sc">%&gt;%</span></span>
<span id="cb5-12"><a href="#cb5-12"></a>  <span class="fu">filter</span>(indicadores <span class="sc">==</span> <span class="st">"Índices"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-13"><a href="#cb5-13"></a>  <span class="fu">filter</span>(provincias_nombre <span class="sc">==</span> <span class="st">"España"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-14"><a href="#cb5-14"></a>  <span class="fu">mutate</span>(<span class="at">periodos_id =</span> <span class="fu">as.Date</span>(<span class="fu">paste0</span>(<span class="fu">substr</span>(periodos_id, <span class="dv">1</span>, <span class="dv">4</span>), <span class="fu">substr</span>(periodos_id, <span class="dv">6</span>, <span class="dv">7</span>), <span class="st">"-01"</span>), <span class="at">format =</span> <span class="st">"%Y%m-%d"</span>))</span>
<span id="cb5-15"><a href="#cb5-15"></a></span>
<span id="cb5-16"><a href="#cb5-16"></a>df_IPC_tasas <span class="ot">&lt;-</span> df_IPC <span class="sc">%&gt;%</span></span>
<span id="cb5-17"><a href="#cb5-17"></a>  <span class="fu">filter</span>(indicadores <span class="sc">==</span> <span class="st">"Tasas de variación anual"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-18"><a href="#cb5-18"></a>  <span class="fu">filter</span>(provincias_nombre <span class="sc">==</span> <span class="st">"España"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-19"><a href="#cb5-19"></a>  <span class="fu">mutate</span>(<span class="at">periodos_id =</span> <span class="fu">as.Date</span>(<span class="fu">paste0</span>(<span class="fu">substr</span>(periodos_id, <span class="dv">1</span>, <span class="dv">4</span>), <span class="fu">substr</span>(periodos_id, <span class="dv">6</span>, <span class="dv">7</span>), <span class="st">"-01"</span>), <span class="at">format =</span> <span class="st">"%Y%m-%d"</span>))</span>
<span id="cb5-20"><a href="#cb5-20"></a></span>
<span id="cb5-21"><a href="#cb5-21"></a></span>
<span id="cb5-22"><a href="#cb5-22"></a>plot_IPC_tasas <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_IPC_tasas, <span class="fu">aes</span>(periodos_id, IPC, <span class="at">group =</span> grupos_coicop_nombre, <span class="at">color =</span> grupos_coicop_nombre)) <span class="sc">+</span> </span>
<span id="cb5-23"><a href="#cb5-23"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb5-24"><a href="#cb5-24"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() <span class="sc">+</span></span>
<span id="cb5-25"><a href="#cb5-25"></a>  <span class="fu">theme</span>(</span>
<span id="cb5-26"><a href="#cb5-26"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(</span>
<span id="cb5-27"><a href="#cb5-27"></a>      <span class="at">angle =</span> <span class="dv">75</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">margin =</span> <span class="fu">margin</span>(</span>
<span id="cb5-28"><a href="#cb5-28"></a>        <span class="at">r =</span> <span class="dv">5</span>, <span class="at">b =</span> <span class="dv">5</span>, <span class="at">l =</span> <span class="dv">5</span>)),</span>
<span id="cb5-29"><a href="#cb5-29"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">5</span>),</span>
<span id="cb5-30"><a href="#cb5-30"></a>    <span class="at">panel.spacing =</span> <span class="fu">unit</span>(<span class="fl">0.75</span>, <span class="st">"lines"</span>),</span>
<span id="cb5-31"><a href="#cb5-31"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb5-32"><a href="#cb5-32"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"cm"</span>),</span>
<span id="cb5-33"><a href="#cb5-33"></a>    <span class="at">legend.key.height =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"cm"</span>),</span>
<span id="cb5-34"><a href="#cb5-34"></a>    <span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="fl">0.1</span>,<span class="st">"cm"</span>),</span>
<span id="cb5-35"><a href="#cb5-35"></a>    <span class="at">legend.direction =</span> <span class="st">"vertical"</span>,</span>
<span id="cb5-36"><a href="#cb5-36"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb5-37"><a href="#cb5-37"></a>  <span class="fu">labs</span>(</span>
<span id="cb5-38"><a href="#cb5-38"></a>    <span class="at">title =</span> <span class="st">"Evolución IPC en tasas por grupos COICOP"</span>,</span>
<span id="cb5-39"><a href="#cb5-39"></a>    <span class="at">subtitle =</span> <span class="st">"Serie 2002 - 2016"</span>,</span>
<span id="cb5-40"><a href="#cb5-40"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb5-41"><a href="#cb5-41"></a>    <span class="at">y =</span> <span class="st">"Var. IPC"</span>,</span>
<span id="cb5-42"><a href="#cb5-42"></a>    <span class="at">caption =</span> <span class="st">"Fuente: datos.gob.es (Gobierno de España)"</span>,</span>
<span id="cb5-43"><a href="#cb5-43"></a>    <span class="at">color =</span> <span class="st">"Grupos COICOP"</span></span>
<span id="cb5-44"><a href="#cb5-44"></a>  ) <span class="sc">+</span></span>
<span id="cb5-45"><a href="#cb5-45"></a>  <span class="fu">facet_wrap</span>(</span>
<span id="cb5-46"><a href="#cb5-46"></a>    <span class="fu">vars</span>(grupos_coicop_nombre),</span>
<span id="cb5-47"><a href="#cb5-47"></a>    <span class="at">nrow =</span> <span class="dv">4</span>,</span>
<span id="cb5-48"><a href="#cb5-48"></a>    <span class="at">ncol =</span> <span class="dv">4</span>,</span>
<span id="cb5-49"><a href="#cb5-49"></a>    <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="at">grupos_coicop_nombre =</span> <span class="cf">function</span>(label) <span class="fu">str_wrap</span>(label, <span class="at">width =</span> <span class="dv">20</span>))) <span class="sc">+</span></span>
<span id="cb5-50"><a href="#cb5-50"></a>  <span class="fu">theme</span>(<span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>))</span>
<span id="cb5-51"><a href="#cb5-51"></a></span>
<span id="cb5-52"><a href="#cb5-52"></a>plot_IPC_tasas_animado <span class="ot">&lt;-</span> plot_IPC_tasas <span class="sc">+</span> <span class="fu">transition_reveal</span>(periodos_id) <span class="sc">+</span> <span class="fu">view_follow</span>(<span class="at">fixed_y =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-53"><a href="#cb5-53"></a></span>
<span id="cb5-54"><a href="#cb5-54"></a>plot_IPC_tasas_animado</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="web_alquileres_files/figure-html/unnamed-chunk-5-1.gif" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<p>Los grupos que presentan una mayor volatilidad son el transporte y las bebidas alcohólicas y el tabaco. El comportamiento para la enseñanza y la medicina ha sido similar. Podemos resaltar que el grupo de alimentos y bebidas no alcohólicas han mostrado una evolución con fuertes caídas. El resto de grupos han mostrado una evolución adecuada en sus niveles de precios (crecimiento constante a tasas bajas).</p>
<p><em>COMPARATIVA EVOLUCIÓN SALARIO - PRECIOS</em></p>
<p>En primer lugar, el crecimiento del salario medio se ha ido estancando hasta llegar al crecimiento negativo (es decir, su reducción) pasando de tener una tasa del 7,5% a su punto más bajo de -2,5%. Una vez llega a ese suelo, se recupera hasta el 3,8% aproximadamente. Si a continuación nos fijamos en las tasas de crecimiento del IPC tanto general como por grupos, veremos que el crecimiento de los precios ha sido mayor que el de los salarios en términos relativos pues podemos observar cómo a lo largo del periodo el crecimiento ha oscilado entre bandas de 0 a 10%. En resumidas cuentas, el crecimiento del salario se ha ido estancando y ha tenido una leve recuperación a posteriori, la cual no es suficiente para soportar la evolución de los precios, resultando en una pérdida de poder adquisitivo para el ciudadanio promedio y por tanto dificultando la emancipación de los jóvenes.</p>
</section>
</section>
<section id="centrándonos-en-el-tema-de-la-vivienda" class="level2">
<h2 class="anchored" data-anchor-id="centrándonos-en-el-tema-de-la-vivienda">CENTRÁNDONOS EN EL TEMA DE LA VIVIENDA</h2>
<p>A la hora de hablar de la vivienda, es muy importante distinguir qué tipos de régimen de tenencia de la vivienda existen y en cuáles vamos a centrar para estudiar la evolución de sus precios. Vamos a exponer en el siguiente gráfico la distribución de la propiedad de la vivienda en sus distintos formatos para un conjunto de países europeos.</p>
<section id="distribución-del-régimen-de-tenencia-de-la-vivienda-en-europa." class="level3">
<h3 class="anchored" data-anchor-id="distribución-del-régimen-de-tenencia-de-la-vivienda-en-europa.">Distribución del régimen de tenencia de la vivienda en Europa.</h3>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>datos_europa<span class="ot">&lt;-</span> <span class="st">"./datos/datos_europa.csv"</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>datos_europa<span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(datos_europa)</span>
<span id="cb6-3"><a href="#cb6-3"></a>datos_europa<span class="ot">&lt;-</span> datos_europa <span class="sc">%&gt;%</span> <span class="fu">select</span>(tenure,geo,OBS_VALUE)</span>
<span id="cb6-4"><a href="#cb6-4"></a></span>
<span id="cb6-5"><a href="#cb6-5"></a>categorias<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"OWN_L"</span> <span class="ot">=</span> <span class="st">"Propietario,</span><span class="sc">\n</span><span class="st"> con hipoteca o préstamo"</span>, <span class="st">"OWN_NL"</span> <span class="ot">=</span> <span class="st">"Propietario,</span><span class="sc">\n</span><span class="st"> sin hipoteca ni préstamo de vivienda pendiente"</span>, <span class="st">"RENT_FR"</span> <span class="ot">=</span> <span class="st">"Inquilino,</span><span class="sc">\n</span><span class="st"> alquiler a precio reducido o gratis"</span>, <span class="st">"RENT_MKT"</span> <span class="ot">=</span> <span class="st">"Inquilino,</span><span class="sc">\n</span><span class="st"> alquiler a precio de mercado"</span>)</span>
<span id="cb6-6"><a href="#cb6-6"></a></span>
<span id="cb6-7"><a href="#cb6-7"></a>p<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(datos_europa, <span class="fu">aes</span>(<span class="at">x =</span> geo, <span class="at">y =</span> OBS_VALUE,  <span class="at">fill =</span> tenure)) <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>  <span class="fu">geom_col</span>( <span class="at">position =</span> <span class="st">"stack"</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución de la tenencia  de vivienda por países europeos (2018)"</span>, </span>
<span id="cb6-10"><a href="#cb6-10"></a>       <span class="at">x =</span> <span class="st">"País"</span>, <span class="at">y =</span> <span class="st">"%"</span>, <span class="at">caption =</span> <span class="st">"Fuente:Eurostat"</span>) <span class="sc">+</span></span>
<span id="cb6-11"><a href="#cb6-11"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() <span class="sc">+</span></span>
<span id="cb6-12"><a href="#cb6-12"></a>  <span class="fu">theme</span>(</span>
<span id="cb6-13"><a href="#cb6-13"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb6-14"><a href="#cb6-14"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.2</span>,<span class="st">"cm"</span>),</span>
<span id="cb6-15"><a href="#cb6-15"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb6-16"><a href="#cb6-16"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb6-17"><a href="#cb6-17"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb6-18"><a href="#cb6-18"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb6-19"><a href="#cb6-19"></a>    <span class="at">panel.grid.minor.y =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb6-20"><a href="#cb6-20"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>) </span>
<span id="cb6-21"><a href="#cb6-21"></a>p <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"OWN_L"</span> <span class="ot">=</span> <span class="st">"blue"</span>, <span class="st">"OWN_NL"</span> <span class="ot">=</span> <span class="st">"red"</span>, <span class="st">"RENT_FR"</span> <span class="ot">=</span> <span class="st">"yellow"</span>, <span class="st">"RENT_MKT"</span> <span class="ot">=</span><span class="st">"green"</span> ), <span class="at">labels =</span> categorias) <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>( <span class="at">keywidth =</span> <span class="fl">0.5</span>, <span class="at">keyheight =</span> <span class="fl">0.5</span>, <span class="at">title.theme =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">5</span>), <span class="at">label.theme =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">5</span>)))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="web_alquileres_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<p>Como podemos observar para el año 2018, la distribución de viviendas en los Estados miembros de la Unión Europea mostró variaciones significativas. La mayoría de la población residía en propiedades, con tasas que iban desde el 51,4% en Alemania hasta el 96,4% en Rumanía. Curiosamente, Suiza destacó como una excepción, con un notable 57,5% de la población optando por el alquiler. En países como los Países Bajos (60,5%) y Suecia (51,7%), así como en Islandia (63,9%) y Noruega (60,1%), más del 50% de la población vivía en propiedades financiadas mediante préstamos o hipotecas. En cuanto al alquiler a precio de mercado, en 2018, menos del 10% de la población en once Estados miembros de la UE optaba por esta opción. Alemania (40,8%) y Dinamarca (39,4%) presentaban tasas significativamente más altas, mientras que Suiza lideraba con un notable 51,1%. A nivel general, la proporción de población que residía en viviendas de alquiler protegido o disfrutaba de viviendas gratuitas fue inferior al 20% en todos los Estados miembros de la UE y en los ocho países no miembros para los cuales se disponía de datos, sugiriendo una preferencia generalizada por la propiedad o formas de alquiler más estables.</p>
<p>En el caso de España, podemos observar como en su gran mayoría la ciudadanía es <em>propietaria</em> de vivienda, dentro de esta categoría los propietarios hipotecados no llegan a alcanzar la mitad. Sin embargo, el monto total de inquilinos es significativo llegando a representar un 25% del total aproximadamente.</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="do">######gráfico pastel</span></span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="do">##Cargamos los datos </span></span>
<span id="cb7-4"><a href="#cb7-4"></a>d_tenencia<span class="ot">&lt;-</span> <span class="st">"./datos/regimen_tenencia.csv"</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>d_tenencia<span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(d_tenencia)</span>
<span id="cb7-6"><a href="#cb7-6"></a></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="do">##Cambiamos la coma por el punto en la columna Total</span></span>
<span id="cb7-8"><a href="#cb7-8"></a>d_tenencia <span class="ot">&lt;-</span> d_tenencia<span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Total =</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(Total, <span class="st">","</span> , <span class="st">"."</span> ))</span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="fu">str</span>(d_tenencia)</span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="co">#&gt; 'data.frame':    1120 obs. of  4 variables:</span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="co">#&gt;  $ CCAA            : chr  "Total Nacional" "Total Nacional" "Total Nacional" "Total Nacional" ...</span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="co">#&gt;  $ Regimen_tenencia: chr  "Propiedad" "Propiedad" "Propiedad" "Propiedad" ...</span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="co">#&gt;  $ Periodo         : int  2017 2016 2015 2014 2013 2012 2011 2010 2009 2008 ...</span></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="co">#&gt;  $ Total           : chr  "76.7" "77.1" "77.3" "78" ...</span></span>
<span id="cb7-15"><a href="#cb7-15"></a></span>
<span id="cb7-16"><a href="#cb7-16"></a>d_tenencia<span class="sc">$</span>Total <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(d_tenencia<span class="sc">$</span>Total)</span>
<span id="cb7-17"><a href="#cb7-17"></a></span>
<span id="cb7-18"><a href="#cb7-18"></a>Propiedad <span class="ot">&lt;-</span> d_tenencia<span class="sc">%&gt;%</span></span>
<span id="cb7-19"><a href="#cb7-19"></a>  <span class="fu">filter</span> (Regimen_tenencia <span class="sc">==</span> <span class="st">"Propiedad"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-20"><a href="#cb7-20"></a>  <span class="fu">filter</span> (CCAA <span class="sc">==</span> <span class="st">"Total Nacional"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-21"><a href="#cb7-21"></a>  <span class="fu">group_by</span>(Periodo, Regimen_tenencia) </span>
<span id="cb7-22"><a href="#cb7-22"></a></span>
<span id="cb7-23"><a href="#cb7-23"></a>Alquiler_precio_mercado<span class="ot">&lt;-</span> d_tenencia <span class="sc">%&gt;%</span></span>
<span id="cb7-24"><a href="#cb7-24"></a>  <span class="fu">filter</span>(Regimen_tenencia <span class="sc">==</span> <span class="st">"Alquiler a precio de mercado"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-25"><a href="#cb7-25"></a>  <span class="fu">group_by</span>(Periodo, Regimen_tenencia)</span>
<span id="cb7-26"><a href="#cb7-26"></a></span>
<span id="cb7-27"><a href="#cb7-27"></a>Alquiler_inferior_precio<span class="ot">&lt;-</span> d_tenencia <span class="sc">%&gt;%</span></span>
<span id="cb7-28"><a href="#cb7-28"></a>  <span class="fu">filter</span>(Regimen_tenencia <span class="sc">==</span> <span class="st">"Alquiler inferior al precio de mercado"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-29"><a href="#cb7-29"></a>  <span class="fu">group_by</span>(Periodo, Regimen_tenencia)</span>
<span id="cb7-30"><a href="#cb7-30"></a></span>
<span id="cb7-31"><a href="#cb7-31"></a>Cesion<span class="ot">&lt;-</span> d_tenencia <span class="sc">%&gt;%</span> </span>
<span id="cb7-32"><a href="#cb7-32"></a>  <span class="fu">filter</span>(Regimen_tenencia <span class="sc">==</span> <span class="st">"Cesión"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-33"><a href="#cb7-33"></a>  <span class="fu">group_by</span>(Periodo, Regimen_tenencia)</span>
<span id="cb7-34"><a href="#cb7-34"></a></span>
<span id="cb7-35"><a href="#cb7-35"></a>df_combined <span class="ot">&lt;-</span> Propiedad <span class="sc">%&gt;%</span></span>
<span id="cb7-36"><a href="#cb7-36"></a>  <span class="fu">full_join</span>(Alquiler_precio_mercado) <span class="sc">%&gt;%</span></span>
<span id="cb7-37"><a href="#cb7-37"></a>  <span class="fu">full_join</span>(Alquiler_inferior_precio) <span class="sc">%&gt;%</span></span>
<span id="cb7-38"><a href="#cb7-38"></a>  <span class="fu">full_join</span>(Cesion) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(CCAA<span class="sc">==</span><span class="st">"Total Nacional"</span>) </span>
<span id="cb7-39"><a href="#cb7-39"></a></span>
<span id="cb7-40"><a href="#cb7-40"></a>df_ordenado <span class="ot">&lt;-</span> df_combined <span class="sc">%&gt;%</span> </span>
<span id="cb7-41"><a href="#cb7-41"></a>  <span class="fu">arrange</span>(Periodo)</span>
<span id="cb7-42"><a href="#cb7-42"></a></span>
<span id="cb7-43"><a href="#cb7-43"></a>df_04 <span class="ot">&lt;-</span> df_ordenado <span class="sc">%&gt;%</span></span>
<span id="cb7-44"><a href="#cb7-44"></a>  <span class="fu">filter</span> (Periodo <span class="sc">==</span> <span class="dv">2004</span>)<span class="sc">%&gt;%</span></span>
<span id="cb7-45"><a href="#cb7-45"></a>  <span class="fu">filter</span>(CCAA <span class="sc">==</span><span class="st">"Total Nacional"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-46"><a href="#cb7-46"></a>  <span class="fu">mutate</span>(<span class="at">Total_2decimales =</span> <span class="fu">round</span>(Total, <span class="dv">2</span>),</span>
<span id="cb7-47"><a href="#cb7-47"></a>         <span class="at">csum =</span> <span class="fu">rev</span>(<span class="fu">cumsum</span>(<span class="fu">rev</span>(Total_2decimales))),</span>
<span id="cb7-48"><a href="#cb7-48"></a>         <span class="at">posicion =</span> Total_2decimales<span class="sc">/</span><span class="dv">2</span> <span class="sc">+</span> <span class="fu">lead</span>(csum, <span class="dv">1</span>))<span class="sc">%&gt;%</span></span>
<span id="cb7-49"><a href="#cb7-49"></a>  <span class="fu">mutate</span>(<span class="at">posicion =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(posicion), Total_2decimales<span class="sc">/</span><span class="dv">2</span>, posicion))</span>
<span id="cb7-50"><a href="#cb7-50"></a></span>
<span id="cb7-51"><a href="#cb7-51"></a>df_08 <span class="ot">&lt;-</span> df_ordenado <span class="sc">%&gt;%</span></span>
<span id="cb7-52"><a href="#cb7-52"></a>  <span class="fu">filter</span> (Periodo <span class="sc">==</span> <span class="dv">2008</span>)<span class="sc">%&gt;%</span></span>
<span id="cb7-53"><a href="#cb7-53"></a>  <span class="fu">filter</span>(CCAA<span class="sc">==</span> <span class="st">"Total Nacional"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-54"><a href="#cb7-54"></a>  <span class="fu">mutate</span>(<span class="at">Total_2decimales =</span> <span class="fu">round</span>(Total, <span class="dv">2</span>),</span>
<span id="cb7-55"><a href="#cb7-55"></a>         <span class="at">csum =</span> <span class="fu">rev</span>(<span class="fu">cumsum</span>(<span class="fu">rev</span>(Total_2decimales))),</span>
<span id="cb7-56"><a href="#cb7-56"></a>         <span class="at">posicion =</span> Total_2decimales<span class="sc">/</span><span class="dv">2</span> <span class="sc">+</span> <span class="fu">lead</span>(csum, <span class="dv">1</span>))<span class="sc">%&gt;%</span></span>
<span id="cb7-57"><a href="#cb7-57"></a>  <span class="fu">mutate</span>(<span class="at">posicion =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(posicion), Total_2decimales<span class="sc">/</span><span class="dv">2</span>, posicion))</span>
<span id="cb7-58"><a href="#cb7-58"></a></span>
<span id="cb7-59"><a href="#cb7-59"></a>df_10 <span class="ot">&lt;-</span> df_ordenado <span class="sc">%&gt;%</span></span>
<span id="cb7-60"><a href="#cb7-60"></a>  <span class="fu">filter</span> (Periodo <span class="sc">==</span> <span class="dv">2010</span>)<span class="sc">%&gt;%</span></span>
<span id="cb7-61"><a href="#cb7-61"></a>  <span class="fu">filter</span>(CCAA <span class="sc">==</span> <span class="st">"Total Nacional"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-62"><a href="#cb7-62"></a>  <span class="fu">mutate</span>(<span class="at">Total_2decimales =</span> <span class="fu">round</span>(Total, <span class="dv">2</span>),</span>
<span id="cb7-63"><a href="#cb7-63"></a>         <span class="at">csum =</span> <span class="fu">rev</span>(<span class="fu">cumsum</span>(<span class="fu">rev</span>(Total_2decimales))),</span>
<span id="cb7-64"><a href="#cb7-64"></a>         <span class="at">posicion =</span> Total_2decimales<span class="sc">/</span><span class="dv">2</span> <span class="sc">+</span> <span class="fu">lead</span>(csum, <span class="dv">1</span>))<span class="sc">%&gt;%</span></span>
<span id="cb7-65"><a href="#cb7-65"></a>  <span class="fu">mutate</span>(<span class="at">posicion =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(posicion), Total_2decimales<span class="sc">/</span><span class="dv">2</span>, posicion))</span>
<span id="cb7-66"><a href="#cb7-66"></a></span>
<span id="cb7-67"><a href="#cb7-67"></a>df_17 <span class="ot">&lt;-</span> df_ordenado <span class="sc">%&gt;%</span></span>
<span id="cb7-68"><a href="#cb7-68"></a>  <span class="fu">filter</span> (Periodo <span class="sc">==</span> <span class="dv">2017</span>)<span class="sc">%&gt;%</span></span>
<span id="cb7-69"><a href="#cb7-69"></a>  <span class="fu">filter</span>(CCAA<span class="sc">==</span> <span class="st">"Total Nacional"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb7-70"><a href="#cb7-70"></a>  <span class="fu">mutate</span>(<span class="at">Total_2decimales =</span> <span class="fu">round</span>(Total, <span class="dv">2</span>),</span>
<span id="cb7-71"><a href="#cb7-71"></a>         <span class="at">csum =</span> <span class="fu">rev</span>(<span class="fu">cumsum</span>(<span class="fu">rev</span>(Total_2decimales))),</span>
<span id="cb7-72"><a href="#cb7-72"></a>         <span class="at">posicion =</span> Total_2decimales<span class="sc">/</span><span class="dv">2</span> <span class="sc">+</span> <span class="fu">lead</span>(csum, <span class="dv">1</span>))<span class="sc">%&gt;%</span></span>
<span id="cb7-73"><a href="#cb7-73"></a>  <span class="fu">mutate</span>(<span class="at">posicion =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(posicion), Total_2decimales<span class="sc">/</span><span class="dv">2</span>, posicion))</span>
<span id="cb7-74"><a href="#cb7-74"></a></span>
<span id="cb7-75"><a href="#cb7-75"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb7-76"><a href="#cb7-76"></a></span>
<span id="cb7-77"><a href="#cb7-77"></a>p_2004 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_04, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> Total, <span class="at">fill =</span> <span class="fu">fct_inorder</span>(Regimen_tenencia))) <span class="sc">+</span></span>
<span id="cb7-78"><a href="#cb7-78"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb7-79"><a href="#cb7-79"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb7-80"><a href="#cb7-80"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb7-81"><a href="#cb7-81"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>) <span class="sc">+</span></span>
<span id="cb7-82"><a href="#cb7-82"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> df_04,</span>
<span id="cb7-83"><a href="#cb7-83"></a>            <span class="fu">aes</span>(<span class="at">y =</span> Total, <span class="at">label =</span> <span class="fu">paste0</span>(Total, <span class="st">"%"</span>)),</span>
<span id="cb7-84"><a href="#cb7-84"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb7-85"><a href="#cb7-85"></a>            <span class="at">size =</span> <span class="dv">4</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb7-86"><a href="#cb7-86"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb7-87"><a href="#cb7-87"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb7-88"><a href="#cb7-88"></a></span>
<span id="cb7-89"><a href="#cb7-89"></a></span>
<span id="cb7-90"><a href="#cb7-90"></a>p_2008 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_08, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> Total, <span class="at">fill =</span> <span class="fu">fct_inorder</span>(Regimen_tenencia))) <span class="sc">+</span></span>
<span id="cb7-91"><a href="#cb7-91"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb7-92"><a href="#cb7-92"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb7-93"><a href="#cb7-93"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb7-94"><a href="#cb7-94"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>)  <span class="sc">+</span></span>
<span id="cb7-95"><a href="#cb7-95"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> df_08,</span>
<span id="cb7-96"><a href="#cb7-96"></a>            <span class="fu">aes</span>(<span class="at">y =</span> Total, <span class="at">label =</span> <span class="fu">paste0</span>(Total, <span class="st">"%"</span>)),</span>
<span id="cb7-97"><a href="#cb7-97"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),  <span class="co"># Ajuste vertical</span></span>
<span id="cb7-98"><a href="#cb7-98"></a>            <span class="at">size =</span> <span class="dv">4</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb7-99"><a href="#cb7-99"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb7-100"><a href="#cb7-100"></a></span>
<span id="cb7-101"><a href="#cb7-101"></a>p_2010 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_10, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> Total, <span class="at">fill =</span> <span class="fu">fct_inorder</span>(Regimen_tenencia))) <span class="sc">+</span></span>
<span id="cb7-102"><a href="#cb7-102"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb7-103"><a href="#cb7-103"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb7-104"><a href="#cb7-104"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb7-105"><a href="#cb7-105"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>) <span class="sc">+</span></span>
<span id="cb7-106"><a href="#cb7-106"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> df_10,</span>
<span id="cb7-107"><a href="#cb7-107"></a>            <span class="fu">aes</span>(<span class="at">y =</span> Total, <span class="at">label =</span> <span class="fu">paste0</span>(Total, <span class="st">"%"</span>)),</span>
<span id="cb7-108"><a href="#cb7-108"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),  <span class="co"># Ajuste vertical</span></span>
<span id="cb7-109"><a href="#cb7-109"></a>            <span class="at">size =</span> <span class="dv">4</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb7-110"><a href="#cb7-110"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb7-111"><a href="#cb7-111"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb7-112"><a href="#cb7-112"></a></span>
<span id="cb7-113"><a href="#cb7-113"></a>p_2017<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_17, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> Total, <span class="at">fill =</span> <span class="fu">fct_inorder</span>(Regimen_tenencia))) <span class="sc">+</span></span>
<span id="cb7-114"><a href="#cb7-114"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb7-115"><a href="#cb7-115"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb7-116"><a href="#cb7-116"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb7-117"><a href="#cb7-117"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>) <span class="sc">+</span></span>
<span id="cb7-118"><a href="#cb7-118"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> df_17,</span>
<span id="cb7-119"><a href="#cb7-119"></a>            <span class="fu">aes</span>(<span class="at">y =</span> Total, <span class="at">label =</span> <span class="fu">paste0</span>(Total, <span class="st">"%"</span>)),</span>
<span id="cb7-120"><a href="#cb7-120"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb7-121"><a href="#cb7-121"></a>            <span class="at">size =</span> <span class="dv">4</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb7-122"><a href="#cb7-122"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb7-123"><a href="#cb7-123"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb7-124"><a href="#cb7-124"></a></span>
<span id="cb7-125"><a href="#cb7-125"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb7-126"><a href="#cb7-126"></a></span>
<span id="cb7-127"><a href="#cb7-127"></a>combined_plot <span class="ot">&lt;-</span> p_2004 <span class="sc">+</span> p_2008 <span class="sc">+</span> p_2010 <span class="sc">+</span> p_2017 <span class="sc">+</span></span>
<span id="cb7-128"><a href="#cb7-128"></a>  <span class="fu">plot_annotation</span>(</span>
<span id="cb7-129"><a href="#cb7-129"></a>    <span class="at">title =</span> <span class="st">" Evolución de  la tenencia de la vivienda en España (%)."</span>,</span>
<span id="cb7-130"><a href="#cb7-130"></a>    <span class="at">subtitle =</span> <span class="st">"(2004,2008,2010,2017)"</span>,</span>
<span id="cb7-131"><a href="#cb7-131"></a>    <span class="at">caption =</span> <span class="st">"Fuente: INE"</span></span>
<span id="cb7-132"><a href="#cb7-132"></a>  )</span>
<span id="cb7-133"><a href="#cb7-133"></a></span>
<span id="cb7-134"><a href="#cb7-134"></a>combined_plot</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="web_alquileres_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<p>Podemos observar la evolución de la distribución para España en años anteriores, destacando una reducción de la proporción de propietarios de vivienda que deriva en un aumento en la proporción de inquilinos. También podemos observar cómo en la proporción de inquilinos aumentan los que pagan el alquiler a precio de mercado. Es relevante señalar que, a pesar de estas variaciones, las viviendas en propiedad continúan representando la gran mayoría del total de viviendas a lo largo de los años, consolidándose como la opción dominante. En contraste, los alquileres de viviendas a precio inferior al de mercado constituyen una minoría, indicando una preferencia generalizada por la tenencia en propiedad.</p>
</section>
<section id="análisis-de-la-vivienda-en-españa" class="level3">
<h3 class="anchored" data-anchor-id="análisis-de-la-vivienda-en-españa">Análisis de la vivienda en España</h3>
<p>Ya tenemos una pequeña idea de cómo se distribuye la tenencia de viviendas en los países UE y de entre ellos España. Ahora vamos a hacer un análisis no muy extenso de la evolución de los precios tanto del alquiler como de la vivienda en términos de provincias y CCAA.</p>
</section>
<section id="evolución-de-los-alquileres." class="level3">
<h3 class="anchored" data-anchor-id="evolución-de-los-alquileres.">Evolución de los alquileres.</h3>
<p>A la hora de estudiar el precio del alquiler, hemos tenido en consideración 2 factores: - EL TAMAÑO DE LAS VIVIENDAS - EL ÍNDICE GENERAL DE PRECIOS DEL ALQUILER DEL INE</p>
<p>Comenzando por el primero:</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>datos <span class="ot">&lt;-</span> <span class="st">"./datos/DATOS_VIVIENDA.xlsx"</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>info <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(datos)</span>
<span id="cb8-3"><a href="#cb8-3"></a></span>
<span id="cb8-4"><a href="#cb8-4"></a>df3 <span class="ot">&lt;-</span> info <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="fu">filter</span>(COMUNIDAD <span class="sc">==</span> <span class="st">"Total nacional"</span>)</span>
<span id="cb8-6"><a href="#cb8-6"></a></span>
<span id="cb8-7"><a href="#cb8-7"></a></span>
<span id="cb8-8"><a href="#cb8-8"></a>p<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df3,</span>
<span id="cb8-9"><a href="#cb8-9"></a>       <span class="fu">aes</span>(</span>
<span id="cb8-10"><a href="#cb8-10"></a>  AÑO, </span>
<span id="cb8-11"><a href="#cb8-11"></a>  ÍNDICE,</span>
<span id="cb8-12"><a href="#cb8-12"></a>  <span class="at">color =</span> TAMAÑO)) <span class="sc">+</span></span>
<span id="cb8-13"><a href="#cb8-13"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.95</span>) <span class="sc">+</span></span>
<span id="cb8-14"><a href="#cb8-14"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() <span class="sc">+</span> </span>
<span id="cb8-15"><a href="#cb8-15"></a>  <span class="fu">labs</span>(</span>
<span id="cb8-16"><a href="#cb8-16"></a>  <span class="at">title =</span> <span class="st">"Evolución del Índice general de precios de alquiler por tamaño de vivienda (2015 = 100)."</span>,</span>
<span id="cb8-17"><a href="#cb8-17"></a>  <span class="at">subtitle =</span> <span class="st">"serie 2011 - 2021"</span>,</span>
<span id="cb8-18"><a href="#cb8-18"></a>  <span class="at">caption =</span> <span class="st">"Fuente: INE"</span>)</span>
<span id="cb8-19"><a href="#cb8-19"></a></span>
<span id="cb8-20"><a href="#cb8-20"></a>pp <span class="ot">&lt;-</span> <span class="fu">ggplotly</span>(p)</span>
<span id="cb8-21"><a href="#cb8-21"></a></span>
<span id="cb8-22"><a href="#cb8-22"></a></span>
<span id="cb8-23"><a href="#cb8-23"></a>p_plotly <span class="ot">&lt;-</span> pp <span class="sc">%&gt;%</span></span>
<span id="cb8-24"><a href="#cb8-24"></a>  <span class="fu">layout</span>(</span>
<span id="cb8-25"><a href="#cb8-25"></a>    <span class="at">legend =</span> <span class="fu">list</span>(</span>
<span id="cb8-26"><a href="#cb8-26"></a>      <span class="at">title =</span> <span class="st">"Tamaño"</span>,</span>
<span id="cb8-27"><a href="#cb8-27"></a>      <span class="at">font =</span> <span class="fu">list</span>(</span>
<span id="cb8-28"><a href="#cb8-28"></a>        <span class="at">family =</span> <span class="st">"Arial"</span>, </span>
<span id="cb8-29"><a href="#cb8-29"></a>        <span class="at">size =</span> <span class="dv">12</span></span>
<span id="cb8-30"><a href="#cb8-30"></a>      ),</span>
<span id="cb8-31"><a href="#cb8-31"></a>      <span class="at">bgcolor =</span> <span class="st">"white"</span>,</span>
<span id="cb8-32"><a href="#cb8-32"></a>      <span class="at">bordercolor =</span> <span class="st">"black"</span>,</span>
<span id="cb8-33"><a href="#cb8-33"></a>      <span class="at">borderwidth =</span> <span class="dv">1</span>,</span>
<span id="cb8-34"><a href="#cb8-34"></a>      <span class="at">itemsizing =</span> <span class="st">"constant"</span>  </span>
<span id="cb8-35"><a href="#cb8-35"></a>    )</span>
<span id="cb8-36"><a href="#cb8-36"></a>  )</span>
<span id="cb8-37"><a href="#cb8-37"></a></span>
<span id="cb8-38"><a href="#cb8-38"></a>p_plotly <span class="ot">&lt;-</span> p_plotly <span class="sc">%&gt;%</span></span>
<span id="cb8-39"><a href="#cb8-39"></a>  <span class="fu">layout</span>(</span>
<span id="cb8-40"><a href="#cb8-40"></a>    <span class="at">annotations =</span> <span class="fu">list</span>(</span>
<span id="cb8-41"><a href="#cb8-41"></a>      <span class="fu">list</span>(</span>
<span id="cb8-42"><a href="#cb8-42"></a>        <span class="at">text =</span> <span class="st">"Fuente: INE"</span>,</span>
<span id="cb8-43"><a href="#cb8-43"></a>        <span class="at">font =</span> <span class="fu">list</span>(</span>
<span id="cb8-44"><a href="#cb8-44"></a>          <span class="at">family =</span> <span class="st">"Arial"</span>,</span>
<span id="cb8-45"><a href="#cb8-45"></a>          <span class="at">size =</span> <span class="dv">10</span></span>
<span id="cb8-46"><a href="#cb8-46"></a>        ),</span>
<span id="cb8-47"><a href="#cb8-47"></a>        <span class="at">x =</span> <span class="dv">1</span>,</span>
<span id="cb8-48"><a href="#cb8-48"></a>        <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.15</span>,</span>
<span id="cb8-49"><a href="#cb8-49"></a>        <span class="at">showarrow =</span> <span class="cn">FALSE</span>,</span>
<span id="cb8-50"><a href="#cb8-50"></a>        <span class="at">xref =</span> <span class="st">"paper"</span>,</span>
<span id="cb8-51"><a href="#cb8-51"></a>        <span class="at">yref =</span> <span class="st">"paper"</span>,</span>
<span id="cb8-52"><a href="#cb8-52"></a>        <span class="at">xanchor =</span> <span class="st">"right"</span>,</span>
<span id="cb8-53"><a href="#cb8-53"></a>        <span class="at">yanchor =</span> <span class="st">"auto"</span></span>
<span id="cb8-54"><a href="#cb8-54"></a>      )</span>
<span id="cb8-55"><a href="#cb8-55"></a>    )</span>
<span id="cb8-56"><a href="#cb8-56"></a>  )</span>
<span id="cb8-57"><a href="#cb8-57"></a></span>
<span id="cb8-58"><a href="#cb8-58"></a>p_plotly</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-a0cb83e8f6649450373c" style="width:95%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-a0cb83e8f6649450373c">{"x":{"data":[{"x":[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[102.754,101.836,99.856999999999999,99.741,100,101.438,102.974,105.21899999999999,108.06100000000001,108.667,110.55800000000001],"text":["AÑO: 2011<br />ÍNDICE: 102.754<br />TAMAÑO: (120-150]","AÑO: 2012<br />ÍNDICE: 101.836<br />TAMAÑO: (120-150]","AÑO: 2013<br />ÍNDICE:  99.857<br />TAMAÑO: (120-150]","AÑO: 2014<br />ÍNDICE:  99.741<br />TAMAÑO: (120-150]","AÑO: 2015<br />ÍNDICE: 100.000<br />TAMAÑO: (120-150]","AÑO: 2016<br />ÍNDICE: 101.438<br />TAMAÑO: (120-150]","AÑO: 2017<br />ÍNDICE: 102.974<br />TAMAÑO: (120-150]","AÑO: 2018<br />ÍNDICE: 105.219<br />TAMAÑO: (120-150]","AÑO: 2019<br />ÍNDICE: 108.061<br />TAMAÑO: (120-150]","AÑO: 2020<br />ÍNDICE: 108.667<br />TAMAÑO: (120-150]","AÑO: 2021<br />ÍNDICE: 110.558<br />TAMAÑO: (120-150]"],"type":"scatter","mode":"lines","line":{"width":3.590551181102362,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"(120-150]","legendgroup":"(120-150]","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[105.88500000000001,104.08799999999999,100.935,99.885999999999996,100,101.712,103.587,106.499,110.658,111.813,113.592],"text":["AÑO: 2011<br />ÍNDICE: 105.885<br />TAMAÑO: (60-75]","AÑO: 2012<br />ÍNDICE: 104.088<br />TAMAÑO: (60-75]","AÑO: 2013<br />ÍNDICE: 100.935<br />TAMAÑO: (60-75]","AÑO: 2014<br />ÍNDICE:  99.886<br />TAMAÑO: (60-75]","AÑO: 2015<br />ÍNDICE: 100.000<br />TAMAÑO: (60-75]","AÑO: 2016<br />ÍNDICE: 101.712<br />TAMAÑO: (60-75]","AÑO: 2017<br />ÍNDICE: 103.587<br />TAMAÑO: (60-75]","AÑO: 2018<br />ÍNDICE: 106.499<br />TAMAÑO: (60-75]","AÑO: 2019<br />ÍNDICE: 110.658<br />TAMAÑO: (60-75]","AÑO: 2020<br />ÍNDICE: 111.813<br />TAMAÑO: (60-75]","AÑO: 2021<br />ÍNDICE: 113.592<br />TAMAÑO: (60-75]"],"type":"scatter","mode":"lines","line":{"width":3.590551181102362,"color":"rgba(196,154,0,1)","dash":"solid"},"hoveron":"points","name":"(60-75]","legendgroup":"(60-75]","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[105.194,103.61799999999999,100.78,99.947000000000003,100,101.673,103.422,106.096,109.89700000000001,110.944,112.77],"text":["AÑO: 2011<br />ÍNDICE: 105.194<br />TAMAÑO: (75-90]","AÑO: 2012<br />ÍNDICE: 103.618<br />TAMAÑO: (75-90]","AÑO: 2013<br />ÍNDICE: 100.780<br />TAMAÑO: (75-90]","AÑO: 2014<br />ÍNDICE:  99.947<br />TAMAÑO: (75-90]","AÑO: 2015<br />ÍNDICE: 100.000<br />TAMAÑO: (75-90]","AÑO: 2016<br />ÍNDICE: 101.673<br />TAMAÑO: (75-90]","AÑO: 2017<br />ÍNDICE: 103.422<br />TAMAÑO: (75-90]","AÑO: 2018<br />ÍNDICE: 106.096<br />TAMAÑO: (75-90]","AÑO: 2019<br />ÍNDICE: 109.897<br />TAMAÑO: (75-90]","AÑO: 2020<br />ÍNDICE: 110.944<br />TAMAÑO: (75-90]","AÑO: 2021<br />ÍNDICE: 112.770<br />TAMAÑO: (75-90]"],"type":"scatter","mode":"lines","line":{"width":3.590551181102362,"color":"rgba(83,180,0,1)","dash":"solid"},"hoveron":"points","name":"(75-90]","legendgroup":"(75-90]","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[104.248,102.741,100.45399999999999,99.859999999999999,100,101.54300000000001,103.145,105.596,109.09399999999999,109.965,111.88],"text":["AÑO: 2011<br />ÍNDICE: 104.248<br />TAMAÑO: (90-120]","AÑO: 2012<br />ÍNDICE: 102.741<br />TAMAÑO: (90-120]","AÑO: 2013<br />ÍNDICE: 100.454<br />TAMAÑO: (90-120]","AÑO: 2014<br />ÍNDICE:  99.860<br />TAMAÑO: (90-120]","AÑO: 2015<br />ÍNDICE: 100.000<br />TAMAÑO: (90-120]","AÑO: 2016<br />ÍNDICE: 101.543<br />TAMAÑO: (90-120]","AÑO: 2017<br />ÍNDICE: 103.145<br />TAMAÑO: (90-120]","AÑO: 2018<br />ÍNDICE: 105.596<br />TAMAÑO: (90-120]","AÑO: 2019<br />ÍNDICE: 109.094<br />TAMAÑO: (90-120]","AÑO: 2020<br />ÍNDICE: 109.965<br />TAMAÑO: (90-120]","AÑO: 2021<br />ÍNDICE: 111.880<br />TAMAÑO: (90-120]"],"type":"scatter","mode":"lines","line":{"width":3.590551181102362,"color":"rgba(0,192,148,1)","dash":"solid"},"hoveron":"points","name":"(90-120]","legendgroup":"(90-120]","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[105.73,103.929,100.652,99.525999999999996,100,101.938,104.28,107.65900000000001,112.52800000000001,113.584,114.919],"text":["AÑO: 2011<br />ÍNDICE: 105.730<br />TAMAÑO: <= 60","AÑO: 2012<br />ÍNDICE: 103.929<br />TAMAÑO: <= 60","AÑO: 2013<br />ÍNDICE: 100.652<br />TAMAÑO: <= 60","AÑO: 2014<br />ÍNDICE:  99.526<br />TAMAÑO: <= 60","AÑO: 2015<br />ÍNDICE: 100.000<br />TAMAÑO: <= 60","AÑO: 2016<br />ÍNDICE: 101.938<br />TAMAÑO: <= 60","AÑO: 2017<br />ÍNDICE: 104.280<br />TAMAÑO: <= 60","AÑO: 2018<br />ÍNDICE: 107.659<br />TAMAÑO: <= 60","AÑO: 2019<br />ÍNDICE: 112.528<br />TAMAÑO: <= 60","AÑO: 2020<br />ÍNDICE: 113.584<br />TAMAÑO: <= 60","AÑO: 2021<br />ÍNDICE: 114.919<br />TAMAÑO: <= 60"],"type":"scatter","mode":"lines","line":{"width":3.590551181102362,"color":"rgba(0,182,235,1)","dash":"solid"},"hoveron":"points","name":"<= 60","legendgroup":"<= 60","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[101.30500000000001,100.262,98.817999999999998,98.981999999999999,100,101.601,103.374,105.158,106.113,106.41500000000001,108.364],"text":["AÑO: 2011<br />ÍNDICE: 101.305<br />TAMAÑO: >150","AÑO: 2012<br />ÍNDICE: 100.262<br />TAMAÑO: >150","AÑO: 2013<br />ÍNDICE:  98.818<br />TAMAÑO: >150","AÑO: 2014<br />ÍNDICE:  98.982<br />TAMAÑO: >150","AÑO: 2015<br />ÍNDICE: 100.000<br />TAMAÑO: >150","AÑO: 2016<br />ÍNDICE: 101.601<br />TAMAÑO: >150","AÑO: 2017<br />ÍNDICE: 103.374<br />TAMAÑO: >150","AÑO: 2018<br />ÍNDICE: 105.158<br />TAMAÑO: >150","AÑO: 2019<br />ÍNDICE: 106.113<br />TAMAÑO: >150","AÑO: 2020<br />ÍNDICE: 106.415<br />TAMAÑO: >150","AÑO: 2021<br />ÍNDICE: 108.364<br />TAMAÑO: >150"],"type":"scatter","mode":"lines","line":{"width":3.590551181102362,"color":"rgba(165,138,255,1)","dash":"solid"},"hoveron":"points","name":">150","legendgroup":">150","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[104.761,103.193,100.49299999999999,99.741,100,101.681,103.52800000000001,106.247,109.999,110.94199999999999,112.694],"text":["AÑO: 2011<br />ÍNDICE: 104.761<br />TAMAÑO: General","AÑO: 2012<br />ÍNDICE: 103.193<br />TAMAÑO: General","AÑO: 2013<br />ÍNDICE: 100.493<br />TAMAÑO: General","AÑO: 2014<br />ÍNDICE:  99.741<br />TAMAÑO: General","AÑO: 2015<br />ÍNDICE: 100.000<br />TAMAÑO: General","AÑO: 2016<br />ÍNDICE: 101.681<br />TAMAÑO: General","AÑO: 2017<br />ÍNDICE: 103.528<br />TAMAÑO: General","AÑO: 2018<br />ÍNDICE: 106.247<br />TAMAÑO: General","AÑO: 2019<br />ÍNDICE: 109.999<br />TAMAÑO: General","AÑO: 2020<br />ÍNDICE: 110.942<br />TAMAÑO: General","AÑO: 2021<br />ÍNDICE: 112.694<br />TAMAÑO: General"],"type":"scatter","mode":"lines","line":{"width":3.590551181102362,"color":"rgba(251,97,215,1)","dash":"solid"},"hoveron":"points","name":"General","legendgroup":"General","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":97.317102081347258,"r":62.719999999999992,"b":96.268997563790947,"l":96.268997563790947},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(234,242,243,1)","font":{"color":"rgba(0,0,0,1)","family":"sans","size":14.611872146118724},"title":{"text":"Evolución del Índice general de precios de alquiler por tamaño de vivienda (2015 = 100).","font":{"color":"rgba(30,45,83,1)","family":"sans","size":18.597102081347259},"x":0.5,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2010.5,2021.5],"tickmode":"array","ticktext":["2013","2016","2019"],"tickvals":[2013,2016,2019],"categoryorder":"array","categoryarray":["2013","2016","2019"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":6.9818181818181806,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"sans","size":13.283589690986393},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176002,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"AÑO","font":{"color":"rgba(0,0,0,1)","family":"sans","size":13.283589690986393}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[98.012950000000004,115.72404999999999],"tickmode":"array","ticktext":["100","105","110","115"],"tickvals":[100,105,110,115],"categoryorder":"array","categoryarray":["100","105","110","115"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":6.9818181818181806,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"sans","size":13.283589690986393},"tickangle":-90,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176002,"showgrid":true,"gridcolor":"rgba(234,242,243,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"ÍNDICE","font":{"color":"rgba(0,0,0,1)","family":"sans","size":13.283589690986393}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"white","bordercolor":"black","borderwidth":1,"font":{"color":"rgba(0,0,0,1)","family":"Arial","size":12},"title":"Tamaño","itemsizing":"constant"},"hovermode":"closest","barmode":"relative","annotations":[{"text":"Fuente: INE","font":{"family":"Arial","size":10},"x":1,"y":-0.14999999999999999,"showarrow":false,"xref":"paper","yref":"paper","xanchor":"right","yanchor":"auto"}]},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"4f8709830d2":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"4f8709830d2","visdat":{"4f8709830d2":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>En la gráfica interactiva presente se nos presenta una relación muy peculiar entre el tamaño de la vivienda y el Índice de precios:</p>
<ul>
<li><em>Las viviendas de menor tamaño han sufrido un crecimiento en sus precios muy superior al de las de mayor tamaño</em>.</li>
</ul>
<p>Esto a simple vista puede resultar sorprendente. ¿cómo es posible que las viviendas más pequeñas, que por tanto tienen menos habitaciones, baños y espacio en general, sean cada vez más caras a un ritmo mayor que las más grandes?. Debemos tener en cuenta que las viviendas de menor tamaño en España son generalmente edificios residenciales de pisos que están ubicados normalmente en zonas céntricas de las ciudades o en barrios que normalmente están bien conectados. Las viviendas de mayores tamaños requieren parcelas mayores las cuales se edifican en zonas más alejadas o zonas que están en plena construcción, las cuales tienen peor conexión con la ciudad y por tanto mayor dificultad de acceso a supermercados, colegios e institutos, hospitales… La demanda de viviendas de menor tamaño es mucho mayor que las de tamaños grandes debido a esto último y sobre todo a que la población general no cuenta con un poder adquisitivo tal que le permita la adquisición o el alquiler de viviendas de tamaños grandes.</p>
<p>Si ahora pasamos al análisis por CCAA y provincias…</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a></span>
<span id="cb9-2"><a href="#cb9-2"></a>datos4<span class="ot">&lt;-</span> <span class="st">"./datos/datos4.csv"</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>datos4<span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(datos4)</span>
<span id="cb9-4"><a href="#cb9-4"></a></span>
<span id="cb9-5"><a href="#cb9-5"></a>p4<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(datos4, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Parámetro, <span class="sc">-</span>Cuantia_media), <span class="at">y =</span> Cuantia_media)) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"skyblue"</span>) <span class="sc">+</span>  </span>
<span id="cb9-6"><a href="#cb9-6"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Precio del Alquiler por provincia (2018)"</span>,</span>
<span id="cb9-7"><a href="#cb9-7"></a>       <span class="at">x =</span> <span class="st">"Provincia"</span>,</span>
<span id="cb9-8"><a href="#cb9-8"></a>       <span class="at">y =</span> <span class="st">"Precio medio Alquiler"</span>,</span>
<span id="cb9-9"><a href="#cb9-9"></a>       <span class="at">caption =</span> <span class="st">"Ministerio de Fomento, Gobierno de España"</span>) <span class="sc">+</span></span>
<span id="cb9-10"><a href="#cb9-10"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb9-11"><a href="#cb9-11"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb9-12"><a href="#cb9-12"></a></span>
<span id="cb9-13"><a href="#cb9-13"></a>p4</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="web_alquileres_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<p>En este contexto, el gráfico proporciona una visión detallada del precio medio del alquiler en diferentes provincias, destacando variaciones significativas en el coste mensual. En la provincia de Madrid, por ejemplo, se registra el precio más elevado, alcanzando los 819 euros mensuales, seguido de cerca por Barcelona con un promedio de 769 euros al mes. Por otro lado, en la provincia de Lugo se observa el precio más bajo, situándose en 336 euros al mes. Llama bastante la atención el fuerte salto en el precio del alquiler que se produce a medida que nos acercamos a las ciudades principales de España. Podemos comprobar que aquellas ciudades con menor población cuentan con precios más bajos de alquiler puesto que la mayoría de la demanda de viviendas se concentra en las ciudades grandes que cuentan con mayor variedad de servicios, oportunidades académicas y laborales, entre otros…</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>coloresg1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#66CDAA"</span>,<span class="st">"#A52A2A"</span>,<span class="st">"#53868B"</span>,<span class="st">"#458B00"</span>)</span>
<span id="cb10-2"><a href="#cb10-2"></a>coloresg2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"darkgoldenrod3"</span>,<span class="st">"#9A32CD"</span>, <span class="st">"deeppink3"</span>, <span class="st">"#EEEE00"</span>)</span>
<span id="cb10-3"><a href="#cb10-3"></a>coloresg3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#8B7E66"</span>, <span class="st">"#00FF7F"</span>, <span class="st">"#7FFF00"</span>,<span class="st">"#00BFFF"</span>,<span class="st">"#FF3030"</span>, <span class="st">"darkslategray"</span>)</span>
<span id="cb10-4"><a href="#cb10-4"></a>coloresg4 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#EEC900"</span>,<span class="st">"darkseagreen4"</span>, <span class="st">"#CD5555"</span>, <span class="st">"#EEA2AD"</span>)</span>
<span id="cb10-5"><a href="#cb10-5"></a></span>
<span id="cb10-6"><a href="#cb10-6"></a></span>
<span id="cb10-7"><a href="#cb10-7"></a>df_cca1 <span class="ot">&lt;-</span> info <span class="sc">%&gt;%</span></span>
<span id="cb10-8"><a href="#cb10-8"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> TAMAÑO, <span class="at">values_from =</span> ÍNDICE) <span class="sc">%&gt;%</span></span>
<span id="cb10-9"><a href="#cb10-9"></a>  <span class="fu">filter</span>(COMUNIDAD <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"06 Cantabria"</span>, <span class="st">"02 Aragón"</span>, <span class="st">"03 Principado de Asturias"</span>, <span class="st">"12 Galicia"</span>))</span>
<span id="cb10-10"><a href="#cb10-10"></a></span>
<span id="cb10-11"><a href="#cb10-11"></a>df_cca2 <span class="ot">&lt;-</span> info <span class="sc">%&gt;%</span></span>
<span id="cb10-12"><a href="#cb10-12"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> TAMAÑO, <span class="at">values_from =</span> ÍNDICE) <span class="sc">%&gt;%</span></span>
<span id="cb10-13"><a href="#cb10-13"></a>  <span class="fu">filter</span>(COMUNIDAD <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"07 Castilla y León"</span>, <span class="st">"08 Castilla La Mancha"</span>, <span class="st">"15 La Rioja"</span>, <span class="st">"11 Extremadura"</span>))</span>
<span id="cb10-14"><a href="#cb10-14"></a></span>
<span id="cb10-15"><a href="#cb10-15"></a>df_cca3 <span class="ot">&lt;-</span> info <span class="sc">%&gt;%</span></span>
<span id="cb10-16"><a href="#cb10-16"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> TAMAÑO, <span class="at">values_from =</span> ÍNDICE) <span class="sc">%&gt;%</span></span>
<span id="cb10-17"><a href="#cb10-17"></a>  <span class="fu">filter</span>(COMUNIDAD <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"10 Comunitat Valenciana"</span>, <span class="st">"01 Andalucía"</span>, <span class="st">"13 Comunidad de Madrid"</span>, <span class="st">"14 Región de Murcia"</span>, <span class="st">"09 Cataluña"</span>))</span>
<span id="cb10-18"><a href="#cb10-18"></a></span>
<span id="cb10-19"><a href="#cb10-19"></a>df_cca4 <span class="ot">&lt;-</span> info <span class="sc">%&gt;%</span></span>
<span id="cb10-20"><a href="#cb10-20"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> TAMAÑO, <span class="at">values_from =</span> ÍNDICE) <span class="sc">%&gt;%</span></span>
<span id="cb10-21"><a href="#cb10-21"></a>  <span class="fu">filter</span>(COMUNIDAD <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"16 Ceuta"</span>, <span class="st">"17 Melilla"</span>, <span class="st">"04 Illes Balears"</span>, <span class="st">"05 Canarias"</span>))</span>
<span id="cb10-22"><a href="#cb10-22"></a></span>
<span id="cb10-23"><a href="#cb10-23"></a></span>
<span id="cb10-24"><a href="#cb10-24"></a>CCAAg1<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_cca1,</span>
<span id="cb10-25"><a href="#cb10-25"></a>              <span class="fu">aes</span>(</span>
<span id="cb10-26"><a href="#cb10-26"></a>                AÑO,</span>
<span id="cb10-27"><a href="#cb10-27"></a>                General,</span>
<span id="cb10-28"><a href="#cb10-28"></a>                <span class="at">color =</span> COMUNIDAD)) <span class="sc">+</span></span>
<span id="cb10-29"><a href="#cb10-29"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.95</span>) <span class="sc">+</span></span>
<span id="cb10-30"><a href="#cb10-30"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> coloresg1) <span class="sc">+</span> </span>
<span id="cb10-31"><a href="#cb10-31"></a>  <span class="fu">labs</span>(</span>
<span id="cb10-32"><a href="#cb10-32"></a>    <span class="at">y =</span> <span class="st">"IPC"</span>) <span class="sc">+</span></span>
<span id="cb10-33"><a href="#cb10-33"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() </span>
<span id="cb10-34"><a href="#cb10-34"></a>  </span>
<span id="cb10-35"><a href="#cb10-35"></a>CCAAg2<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_cca2,</span>
<span id="cb10-36"><a href="#cb10-36"></a>                <span class="fu">aes</span>(</span>
<span id="cb10-37"><a href="#cb10-37"></a>                  AÑO,</span>
<span id="cb10-38"><a href="#cb10-38"></a>                  General,</span>
<span id="cb10-39"><a href="#cb10-39"></a>                  <span class="at">color =</span> COMUNIDAD)) <span class="sc">+</span></span>
<span id="cb10-40"><a href="#cb10-40"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.95</span>) <span class="sc">+</span></span>
<span id="cb10-41"><a href="#cb10-41"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> coloresg2) <span class="sc">+</span> </span>
<span id="cb10-42"><a href="#cb10-42"></a>  <span class="fu">labs</span>(</span>
<span id="cb10-43"><a href="#cb10-43"></a>    <span class="at">color =</span> <span class="cn">NULL</span>,</span>
<span id="cb10-44"><a href="#cb10-44"></a>    <span class="at">y =</span> <span class="st">"IPC"</span>) <span class="sc">+</span></span>
<span id="cb10-45"><a href="#cb10-45"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>()</span>
<span id="cb10-46"><a href="#cb10-46"></a></span>
<span id="cb10-47"><a href="#cb10-47"></a>CCAAg3<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_cca3,</span>
<span id="cb10-48"><a href="#cb10-48"></a>                <span class="fu">aes</span>(</span>
<span id="cb10-49"><a href="#cb10-49"></a>                  AÑO,</span>
<span id="cb10-50"><a href="#cb10-50"></a>                  General,</span>
<span id="cb10-51"><a href="#cb10-51"></a>                  <span class="at">color =</span> COMUNIDAD)) <span class="sc">+</span></span>
<span id="cb10-52"><a href="#cb10-52"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.95</span>) <span class="sc">+</span></span>
<span id="cb10-53"><a href="#cb10-53"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> coloresg3) <span class="sc">+</span> </span>
<span id="cb10-54"><a href="#cb10-54"></a>  <span class="fu">labs</span>(</span>
<span id="cb10-55"><a href="#cb10-55"></a>  <span class="at">color =</span> <span class="cn">NULL</span>,</span>
<span id="cb10-56"><a href="#cb10-56"></a>  <span class="at">y =</span> <span class="st">"IPC"</span>) <span class="sc">+</span></span>
<span id="cb10-57"><a href="#cb10-57"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() </span>
<span id="cb10-58"><a href="#cb10-58"></a></span>
<span id="cb10-59"><a href="#cb10-59"></a>CCAAg4<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_cca4,</span>
<span id="cb10-60"><a href="#cb10-60"></a>                <span class="fu">aes</span>(</span>
<span id="cb10-61"><a href="#cb10-61"></a>                  AÑO,</span>
<span id="cb10-62"><a href="#cb10-62"></a>                  General,</span>
<span id="cb10-63"><a href="#cb10-63"></a>                  <span class="at">color =</span> COMUNIDAD)) <span class="sc">+</span></span>
<span id="cb10-64"><a href="#cb10-64"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.95</span>) <span class="sc">+</span></span>
<span id="cb10-65"><a href="#cb10-65"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> coloresg4) <span class="sc">+</span> </span>
<span id="cb10-66"><a href="#cb10-66"></a>  <span class="fu">labs</span>(</span>
<span id="cb10-67"><a href="#cb10-67"></a>  <span class="at">color =</span> <span class="cn">NULL</span>,</span>
<span id="cb10-68"><a href="#cb10-68"></a>  <span class="at">y =</span> <span class="st">"IPC"</span>) <span class="sc">+</span></span>
<span id="cb10-69"><a href="#cb10-69"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() </span>
<span id="cb10-70"><a href="#cb10-70"></a></span>
<span id="cb10-71"><a href="#cb10-71"></a>PLOT_CONJUNTO <span class="ot">&lt;-</span> ((CCAAg1 <span class="sc">+</span> CCAAg2) <span class="sc">/</span> (CCAAg3 <span class="sc">+</span> CCAAg4)) <span class="sc">+</span></span>
<span id="cb10-72"><a href="#cb10-72"></a>  <span class="fu">plot_layout</span>(<span class="at">guides =</span> <span class="st">"collect"</span>) <span class="sc">+</span></span>
<span id="cb10-73"><a href="#cb10-73"></a>  <span class="fu">theme</span>(</span>
<span id="cb10-74"><a href="#cb10-74"></a>    <span class="at">plot.title.position =</span> <span class="st">"collect"</span>)  <span class="sc">+</span></span>
<span id="cb10-75"><a href="#cb10-75"></a>  <span class="fu">plot_annotation</span>(</span>
<span id="cb10-76"><a href="#cb10-76"></a>    <span class="at">title =</span> <span class="st">"Evolución del IPC general de </span><span class="sc">\n</span><span class="st"> precios de alquiler por CCAA agrupadas (2015 = 100)"</span>,</span>
<span id="cb10-77"><a href="#cb10-77"></a>    <span class="at">caption =</span> <span class="st">"Fuente: INE"</span>) <span class="sc">&amp;</span> ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() <span class="sc">&amp;</span> <span class="fu">theme</span>(</span>
<span id="cb10-78"><a href="#cb10-78"></a>      <span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb10-79"><a href="#cb10-79"></a>      <span class="at">legend.direction =</span> <span class="st">"vertical"</span>,</span>
<span id="cb10-80"><a href="#cb10-80"></a>      <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">5</span>) ,</span>
<span id="cb10-81"><a href="#cb10-81"></a>      <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>,<span class="st">"cm"</span>),</span>
<span id="cb10-82"><a href="#cb10-82"></a>      <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">5</span>),</span>
<span id="cb10-83"><a href="#cb10-83"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="fl">0.05</span>))</span>
<span id="cb10-84"><a href="#cb10-84"></a></span>
<span id="cb10-85"><a href="#cb10-85"></a>PLOT_CONJUNTO</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="web_alquileres_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<p>En esta otra gráfica se nos presenta una forma distinta de observar los datos sobre la evolución del IPC general de precios del alquiler, hemos distinguido entre 4 grupos:</p>
<ul>
<li><p>El primero, que trata de reunir regiones más ubicadas al norte incluyendo Aragón. Siendo esta última comunidad la que ha presentado mayor crecimiento en su índice, hecho que podría atribuirse a la contribución en los precios agregados del alquiler de Aragón por parte de Zaragoza, una de las ciudades principales del país. El resto de CCAA que integran el grupo muestran un patrón similar pero con un crecimiento menor.</p></li>
<li><p>El segundo grupo reúne las CCAA más orientadas al centro de la península, destaca como la evolución para Extremadura y Castilla y León ha sido prácticamente igual.</p></li>
<li><p>El tercero reúne las CCAA que consideramos más relevantes. No nos esperábamos que la Comunidad Valenciana fuera la región cuyos alquileres fueran más elevados al final del periodo superando a Cataluña y Madrid.</p></li>
<li><p>Finalmente el último grupo contiene las islas y las ciudades autónomas. podemos destacar como el comportamiento tanto en Baleares como en Canarias es similar, pero los alquileres son más elevados en la primera debido probablemente a que percibe turistas de mayor poder adquisitivo en las temporadas de verano. Los alquileres en Ceuta y Melilla presentan los índices más bajos de todos.</p></li>
</ul>
</section>
<section id="evolución-de-los-precios-de-la-vivienda." class="level3">
<h3 class="anchored" data-anchor-id="evolución-de-los-precios-de-la-vivienda.">Evolución de los precios de la vivienda.</h3>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="do">#######MAPA</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="fu">library</span>(sf)</span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="fu">library</span>(pjpv.curso.R<span class="fl">.2022</span>)</span>
<span id="cb11-5"><a href="#cb11-5"></a></span>
<span id="cb11-6"><a href="#cb11-6"></a></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="do">###cargamos los datos </span></span>
<span id="cb11-8"><a href="#cb11-8"></a>datos_c<span class="ot">&lt;-</span> <span class="st">"./datos/prueba.csv"</span></span>
<span id="cb11-9"><a href="#cb11-9"></a>datos_c<span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(datos_c)</span>
<span id="cb11-10"><a href="#cb11-10"></a></span>
<span id="cb11-11"><a href="#cb11-11"></a><span class="do">### En la columna Total queremos poner un punto en vez de una coma </span></span>
<span id="cb11-12"><a href="#cb11-12"></a></span>
<span id="cb11-13"><a href="#cb11-13"></a>datos_c <span class="ot">&lt;-</span> datos_c<span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Total =</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(Total, <span class="st">","</span> , <span class="st">"."</span> ))</span>
<span id="cb11-14"><a href="#cb11-14"></a></span>
<span id="cb11-15"><a href="#cb11-15"></a><span class="co">#- Cambiamos el nombre de las columnas </span></span>
<span id="cb11-16"><a href="#cb11-16"></a></span>
<span id="cb11-17"><a href="#cb11-17"></a>df_c<span class="ot">&lt;-</span> datos_c <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">Indice_precio =</span> Total) <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">CCAA =</span> Comunidades_Autonomas)</span>
<span id="cb11-18"><a href="#cb11-18"></a></span>
<span id="cb11-19"><a href="#cb11-19"></a><span class="do">###Separamos la columna de CCAA en dos Columnas, una que muestre el código y otra el nombre de la Comunidad Autonoma  </span></span>
<span id="cb11-20"><a href="#cb11-20"></a></span>
<span id="cb11-21"><a href="#cb11-21"></a>df_c <span class="ot">&lt;-</span> df_c <span class="sc">%&gt;%</span></span>
<span id="cb11-22"><a href="#cb11-22"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(CCAA, <span class="at">sep =</span> <span class="st">" "</span>,</span>
<span id="cb11-23"><a href="#cb11-23"></a>                  <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"ine_ccaa"</span>, <span class="st">"ine_ccaa.n"</span>), <span class="at">extra =</span> <span class="st">"merge"</span>)</span>
<span id="cb11-24"><a href="#cb11-24"></a>df_c<span class="ot">&lt;-</span>  <span class="fu">drop_na</span>(df_c) <span class="co">#quitamos el total nacional, ya que no se van a utilizar</span></span>
<span id="cb11-25"><a href="#cb11-25"></a></span>
<span id="cb11-26"><a href="#cb11-26"></a>df_c<span class="ot">&lt;-</span> df_c <span class="sc">%&gt;%</span> <span class="fu">filter</span>(General <span class="sc">==</span> <span class="st">"General"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>( Índices_tasas <span class="sc">==</span><span class="st">"Media anual"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Periodo <span class="sc">==</span> <span class="st">"2022"</span>) <span class="do">##cogemos las viviendas generales, la media anual y elegimos el año más reciente que es 2022</span></span>
<span id="cb11-27"><a href="#cb11-27"></a></span>
<span id="cb11-28"><a href="#cb11-28"></a></span>
<span id="cb11-29"><a href="#cb11-29"></a><span class="do">###Cargamos las geometrías y elegimos las variables que nos interesan</span></span>
<span id="cb11-30"><a href="#cb11-30"></a>df_geo_prov <span class="ot">&lt;-</span> pjpv.curso.R<span class="fl">.2022</span><span class="sc">::</span>LAU2_prov_2020_canarias</span>
<span id="cb11-31"><a href="#cb11-31"></a>df_geo_prov <span class="ot">&lt;-</span> df_geo_prov <span class="sc">%&gt;%</span> <span class="fu">select</span>(ine_prov, ine_prov.n, ine_ccaa, ine_ccaa.n)</span>
<span id="cb11-32"><a href="#cb11-32"></a></span>
<span id="cb11-33"><a href="#cb11-33"></a><span class="do">##Agregamos geometrías de las Comunidades Autonomas </span></span>
<span id="cb11-34"><a href="#cb11-34"></a></span>
<span id="cb11-35"><a href="#cb11-35"></a>df_geo_ccaa <span class="ot">&lt;-</span> df_geo_prov <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(ine_ccaa, ine_ccaa.n) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>()</span>
<span id="cb11-36"><a href="#cb11-36"></a>df_ok <span class="ot">&lt;-</span> <span class="fu">left_join</span>(df_geo_ccaa, df_c, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ine_ccaa"</span> <span class="ot">=</span> <span class="st">"ine_ccaa"</span>))</span>
<span id="cb11-37"><a href="#cb11-37"></a><span class="fu">names</span>(df_ok)</span>
<span id="cb11-38"><a href="#cb11-38"></a><span class="co">#&gt; [1] "ine_ccaa"      "ine_ccaa.n.x"  "geometry"      "ine_ccaa.n.y" </span></span>
<span id="cb11-39"><a href="#cb11-39"></a><span class="co">#&gt; [5] "General"       "Índices_tasas" "Periodo"       "Indice_precio"</span></span>
<span id="cb11-40"><a href="#cb11-40"></a></span>
<span id="cb11-41"><a href="#cb11-41"></a><span class="do">##Calculamos los Centroides</span></span>
<span id="cb11-42"><a href="#cb11-42"></a><span class="fu">library</span>(sf)</span>
<span id="cb11-43"><a href="#cb11-43"></a>df_geo_ccaa <span class="ot">&lt;-</span> <span class="fu">cbind</span>(df_geo_ccaa, <span class="fu">st_coordinates</span>(<span class="fu">st_centroid</span>(df_geo_ccaa<span class="sc">$</span>geometry)))</span>
<span id="cb11-44"><a href="#cb11-44"></a></span>
<span id="cb11-45"><a href="#cb11-45"></a><span class="do">##Juntamos los datos de los precios de los alquileres con las geometrías </span></span>
<span id="cb11-46"><a href="#cb11-46"></a>df_ok <span class="ot">&lt;-</span> <span class="fu">left_join</span>(df_geo_ccaa, df_c, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ine_ccaa"</span> <span class="ot">=</span> <span class="st">"ine_ccaa"</span>))</span>
<span id="cb11-47"><a href="#cb11-47"></a>df_ok<span class="sc">$</span>Indice_precio <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(df_ok<span class="sc">$</span>Indice_precio)</span>
<span id="cb11-48"><a href="#cb11-48"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb11-49"><a href="#cb11-49"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> df_ok, </span>
<span id="cb11-50"><a href="#cb11-50"></a>          <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> Indice_precio), </span>
<span id="cb11-51"><a href="#cb11-51"></a>          <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.09</span>) <span class="sc">+</span> </span>
<span id="cb11-52"><a href="#cb11-52"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">10.00</span>, <span class="fl">5.00</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">35</span>, <span class="cn">NA</span>), <span class="at">expand =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb11-53"><a href="#cb11-53"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">low=</span><span class="st">"white"</span>,</span>
<span id="cb11-54"><a href="#cb11-54"></a>                        <span class="at">high=</span><span class="st">"navyblue"</span>,</span>
<span id="cb11-55"><a href="#cb11-55"></a>                        <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">100</span>,<span class="dv">160</span>)) <span class="sc">+</span></span>
<span id="cb11-56"><a href="#cb11-56"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb11-57"><a href="#cb11-57"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb11-58"><a href="#cb11-58"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb11-59"><a href="#cb11-59"></a>  <span class="fu">theme</span>(<span class="at">axis.title.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb11-60"><a href="#cb11-60"></a>        <span class="at">axis.text.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb11-61"><a href="#cb11-61"></a>        <span class="at">axis.ticks.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb11-62"><a href="#cb11-62"></a>        <span class="at">axis.title.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb11-63"><a href="#cb11-63"></a>        <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb11-64"><a href="#cb11-64"></a>        <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>()) <span class="sc">+</span> </span>
<span id="cb11-65"><a href="#cb11-65"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Índice de Precios de la Vivienda por Comunidades Autónomas"</span>, </span>
<span id="cb11-66"><a href="#cb11-66"></a>       <span class="at">subtitle =</span> <span class="st">"(2022)"</span>,</span>
<span id="cb11-67"><a href="#cb11-67"></a>       <span class="at">fill =</span> <span class="st">"Índice"</span>,</span>
<span id="cb11-68"><a href="#cb11-68"></a>       <span class="at">caption =</span> <span class="st">"Fuente: INE"</span>)</span>
<span id="cb11-69"><a href="#cb11-69"></a>p</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="web_alquileres_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<p>En el análisis gráfico previo (evolución de los regímenes de tenencia), hemos observado una marcada tendencia a lo largo de los años: La proporción de viviendas en propiedad ha disminuido a la par que las viviendas en alquiler han experimentado un aumento significativo. Esta transformación puede atribuirse principalmente al vertiginoso incremento de los precios de la vivienda, que ha afectado negativamente nuestro poder adquisitivo. La consecuencia directa de este fenómeno es la dificultad creciente para adquirir una vivienda propia, obligando a un número cada vez mayor de personas a optar por la alternativa del alquiler. Con el objetivo de profundizar en estas disparidades, hemos confeccionado un mapa que ilustra el Índice de Precios de la Vivienda por Comunidades para el año 2022. Este enfoque nos brinda la oportunidad de examinar las divergencias en los precios de la vivienda a nivel regional. En la observación detallada del mapa, se destaca que las Comunidades Autónomas con los precios de vivienda más elevados son la Comunidad de Madrid, Islas Baleares y Cataluña, las. Por otro lado, aquellas regiones donde el coste de la vivienda es más bajo incluyen Extremadura, Castilla-La Mancha y Navarra. Este análisis geográfico proporciona una visión más completa de las disparidades en los precios de la vivienda, destacando las áreas donde la propiedad se presenta como una inversión más onerosa y aquellas donde la adquisición de una vivienda podría ser más accesible. La información recopilada sugiere una correlación entre el aumento de los precios de la vivienda y el cambio en la tendencia hacia el alquiler, reflejando las complejidades económicas y sociales que inciden en las decisiones de vivienda de la población.</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="do">##Otro Mapa pero ahora del Indice de Precios de Alquiler </span></span>
<span id="cb12-2"><a href="#cb12-2"></a>datos_alquiler<span class="ot">&lt;-</span> <span class="st">"./datos/59057.csv"</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>datos_alquiler<span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(datos_alquiler)</span>
<span id="cb12-4"><a href="#cb12-4"></a></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="do">##Cambiamos la coma por el punto en la columna Total</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>datos_alquiler<span class="ot">&lt;-</span> datos_alquiler<span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Total =</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(Total, <span class="st">","</span> , <span class="st">"."</span> ))</span>
<span id="cb12-7"><a href="#cb12-7"></a></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="do">##Separamos la columna de CCAA en dos Columnas, una que muestre el código y otra el nombre de la Comunidad Autonoma  </span></span>
<span id="cb12-9"><a href="#cb12-9"></a></span>
<span id="cb12-10"><a href="#cb12-10"></a>datos_alquiler <span class="ot">&lt;-</span> datos_alquiler <span class="sc">%&gt;%</span></span>
<span id="cb12-11"><a href="#cb12-11"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(CCAA, <span class="at">sep =</span> <span class="st">" "</span>,</span>
<span id="cb12-12"><a href="#cb12-12"></a>                  <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"ine_ccaa"</span>, <span class="st">"ine_ccaa.n"</span>), <span class="at">extra =</span> <span class="st">"merge"</span>) </span>
<span id="cb12-13"><a href="#cb12-13"></a></span>
<span id="cb12-14"><a href="#cb12-14"></a><span class="do">##Quitamos Total Nacional (que no lo necesitamos)</span></span>
<span id="cb12-15"><a href="#cb12-15"></a></span>
<span id="cb12-16"><a href="#cb12-16"></a>datos_alquiler<span class="ot">&lt;-</span> <span class="fu">drop_na</span>(datos_alquiler)</span>
<span id="cb12-17"><a href="#cb12-17"></a></span>
<span id="cb12-18"><a href="#cb12-18"></a><span class="do">##Cogemos las variables que nos interesan, filtramos por Indice y filtramos por el año 2021(es el más reciente)</span></span>
<span id="cb12-19"><a href="#cb12-19"></a></span>
<span id="cb12-20"><a href="#cb12-20"></a>datos_alquiler<span class="ot">&lt;-</span> datos_alquiler <span class="sc">%&gt;%</span></span>
<span id="cb12-21"><a href="#cb12-21"></a>  <span class="fu">filter</span>(Tamaño <span class="sc">==</span> <span class="st">"Total"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-22"><a href="#cb12-22"></a>  <span class="fu">filter</span>(Dato <span class="sc">==</span><span class="st">"Índice"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb12-23"><a href="#cb12-23"></a>  <span class="fu">filter</span>(Periodo <span class="sc">==</span> <span class="dv">2021</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-24"><a href="#cb12-24"></a>  <span class="fu">select</span>(ine_ccaa, ine_ccaa.n, Total)</span>
<span id="cb12-25"><a href="#cb12-25"></a></span>
<span id="cb12-26"><a href="#cb12-26"></a><span class="do">###Cargamos las geometrías y elegimos las variables que nos interesan</span></span>
<span id="cb12-27"><a href="#cb12-27"></a>df_geo_prov <span class="ot">&lt;-</span> pjpv.curso.R<span class="fl">.2022</span><span class="sc">::</span>LAU2_prov_2020_canarias</span>
<span id="cb12-28"><a href="#cb12-28"></a>df_geo_prov <span class="ot">&lt;-</span> df_geo_prov <span class="sc">%&gt;%</span> <span class="fu">select</span>(ine_prov, ine_prov.n, ine_ccaa, ine_ccaa.n)</span>
<span id="cb12-29"><a href="#cb12-29"></a></span>
<span id="cb12-30"><a href="#cb12-30"></a><span class="do">##Agregamos geometrías de las Comunidades Autonomas </span></span>
<span id="cb12-31"><a href="#cb12-31"></a></span>
<span id="cb12-32"><a href="#cb12-32"></a>df_geo_ccaa <span class="ot">&lt;-</span> df_geo_prov <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(ine_ccaa, ine_ccaa.n) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>() </span>
<span id="cb12-33"><a href="#cb12-33"></a>df_ok <span class="ot">&lt;-</span> <span class="fu">left_join</span>(df_geo_ccaa, datos_alquiler, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ine_ccaa"</span> <span class="ot">=</span> <span class="st">"ine_ccaa"</span>))</span>
<span id="cb12-34"><a href="#cb12-34"></a><span class="fu">names</span>(df_ok)</span>
<span id="cb12-35"><a href="#cb12-35"></a><span class="co">#&gt; [1] "ine_ccaa"     "ine_ccaa.n.x" "geometry"     "ine_ccaa.n.y" "Total"</span></span>
<span id="cb12-36"><a href="#cb12-36"></a></span>
<span id="cb12-37"><a href="#cb12-37"></a><span class="do">##Calculamos los Centroides</span></span>
<span id="cb12-38"><a href="#cb12-38"></a><span class="fu">library</span>(sf)</span>
<span id="cb12-39"><a href="#cb12-39"></a>df_geo_ccaa <span class="ot">&lt;-</span> <span class="fu">cbind</span>(df_geo_ccaa, <span class="fu">st_coordinates</span>(<span class="fu">st_centroid</span>(df_geo_ccaa<span class="sc">$</span>geometry)))</span>
<span id="cb12-40"><a href="#cb12-40"></a></span>
<span id="cb12-41"><a href="#cb12-41"></a><span class="do">##Juntamos los datos de los precios de los alquileres con las geometrías </span></span>
<span id="cb12-42"><a href="#cb12-42"></a>df_ok <span class="ot">&lt;-</span> <span class="fu">left_join</span>(df_geo_ccaa, datos_alquiler, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ine_ccaa"</span> <span class="ot">=</span> <span class="st">"ine_ccaa"</span>))</span>
<span id="cb12-43"><a href="#cb12-43"></a></span>
<span id="cb12-44"><a href="#cb12-44"></a><span class="do">##Gráfico</span></span>
<span id="cb12-45"><a href="#cb12-45"></a>df_ok<span class="sc">$</span>Total <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(df_ok<span class="sc">$</span>Total)</span>
<span id="cb12-46"><a href="#cb12-46"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb12-47"><a href="#cb12-47"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> df_ok, </span>
<span id="cb12-48"><a href="#cb12-48"></a>          <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> Total), </span>
<span id="cb12-49"><a href="#cb12-49"></a>          <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.09</span>) <span class="sc">+</span> </span>
<span id="cb12-50"><a href="#cb12-50"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">10.00</span>, <span class="fl">5.00</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">35</span>, <span class="cn">NA</span>), <span class="at">expand =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb12-51"><a href="#cb12-51"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">low=</span><span class="st">"white"</span>,<span class="at">high=</span><span class="st">"orange"</span>) <span class="sc">+</span></span>
<span id="cb12-52"><a href="#cb12-52"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb12-53"><a href="#cb12-53"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb12-54"><a href="#cb12-54"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb12-55"><a href="#cb12-55"></a>  <span class="fu">theme</span>(<span class="at">axis.title.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb12-56"><a href="#cb12-56"></a>        <span class="at">axis.text.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb12-57"><a href="#cb12-57"></a>        <span class="at">axis.ticks.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb12-58"><a href="#cb12-58"></a>        <span class="at">axis.title.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb12-59"><a href="#cb12-59"></a>        <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb12-60"><a href="#cb12-60"></a>        <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>()) <span class="sc">+</span> </span>
<span id="cb12-61"><a href="#cb12-61"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Índice de Precios del Alquiler  por Comunidades Autónomas"</span>, </span>
<span id="cb12-62"><a href="#cb12-62"></a>       <span class="at">subtitle =</span> <span class="st">"(2021)"</span>,</span>
<span id="cb12-63"><a href="#cb12-63"></a>       <span class="at">fill =</span> <span class="st">"Índice"</span>,</span>
<span id="cb12-64"><a href="#cb12-64"></a>       <span class="at">caption =</span> <span class="st">"Fuente: INE"</span>)</span>
<span id="cb12-65"><a href="#cb12-65"></a>p</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="web_alquileres_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<p>En la actualidad, la disparidad en los precios de alquiler entre distintas Comunidades Autónomas ha emergido como un tema de gran controversia. Con el objetivo de visualizar y comprender estas divergencias, hemos desarrollado un mapa interactivo que exhibe el Índice de Precio de Alquiler por Comunidades Autónomas durante el año 2021. Los resultados del análisis revelan que existen notables variaciones en los costes de alquiler a lo largo y ancho de España. En particular, Comunidades Autónomas como Asturias, Castilla y León, Galicia y Extremadura destacan por presentar precios de alquiler más accesibles. Este fenómeno podría estar vinculado a factores como una menor demanda relativa, una oferta más abundante o características socioeconómicas específicas de estas regiones. Contrastando con esta tendencia, las Comunidades Autónomas de las Islas Baleares, la Comunidad Valenciana, Cataluña, las Islas Canarias, Castilla La Mancha y la Comunidad Madrid se posicionan como las zonas con precios de alquiler más elevados. En estos casos, factores como la alta demanda derivada de zonas turísticas, una robusta actividad económica, y la concentración de empleo y servicios urbanos podrían estar contribuyendo a esta tendencia al alza en los precios.</p>
</section>
</section>
<section id="conclusión" class="level2">
<h2 class="anchored" data-anchor-id="conclusión">CONCLUSIÓN</h2>
<p>En conclusión, la dificultad para acceder a una vivienda independiente se ha convertido en un problema creciente, evidenciado por el aumento de adultos jóvenes que optan por quedarse en casa de sus padres a pesar de tener un salario.</p>
<p>Al analizar la evolución del salario promedio en España a lo largo de las últimas dos décadas, se observa que, aunque ha experimentado periodos de crecimiento, este crecimiento no ha sido suficiente para mantener el ritmo de los aumentos en los precios de bienes y servicios esenciales. En particular, los precios de la vivienda y otros elementos importantes, como la educación, han experimentado aumentos notables superando el crecimiento de los salarios.</p>
<p>En cuanto al tema de la vivienda destaca la preferencia generalizada por la propiedad en España, pero se observa una tendencia al alza en la proporción de personas que optan por el alquiler. Esta transformación se atribuye en gran medida al aumento vertiginoso de los precios de la vivienda, lo que ha afectado negativamente el poder adquisitivo y ha llevado a un número creciente de personas a elegir la opción del alquiler.</p>
<p>El análisis de la evolución de los precios de alquiler por regiones revela disparidades significativas, con ciertas Comunidades Autónomas presentando precios mucho más elevados que otras. Este fenómeno puede estar relacionado con factores como la demanda relativa, la oferta de viviendas y características socioeconómicas específicas de cada región.</p>
<p>En resumen, la dificultad para acceder a una vivienda independiente en España se ve exacerbada por el desajuste entre el crecimiento de los salarios y el aumento de los precios de la vivienda y otros servicios esenciales. La preferencia por la propiedad persiste, pero el alquiler se ha vuelto más relevante, especialmente en ciertas regiones con precios elevados. Este panorama presenta desafíos significativos para la emancipación de los jóvenes y plantea interrogantes sobre la eficiencia del mercado de viviendas en el país.</p>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Ejecutar el código</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb13" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb13-1"><a href="#cb13-1"></a><span class="co">---</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="an">title:</span><span class="co"> "Evolución y análisis del precio del alquiler en España."</span></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="an">description:</span><span class="co"> |</span></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="co">  Un tema muy candente en la actualidad.</span></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="an">author:</span><span class="co">   </span></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="co">  - Javier Belenguer Esteban (besja@alumni.uv.es)\n   </span></span>
<span id="cb13-7"><a href="#cb13-7"></a><span class="co">  - Juan Bosco Pujol Cerdá (pucer@alumni.uv.es)\n</span></span>
<span id="cb13-8"><a href="#cb13-8"></a><span class="an">date:</span><span class="co"> 2023-12-06                           #--</span></span>
<span id="cb13-9"><a href="#cb13-9"></a><span class="an">categories:</span><span class="co"> [trabajo BigData, Alquileres]      #--</span></span>
<span id="cb13-10"><a href="#cb13-10"></a><span class="an">image:</span><span class="co"> "./images/houses-logo-illustration-free-vector.jpg"</span></span>
<span id="cb13-11"><a href="#cb13-11"></a><span class="an">title-block-banner:</span><span class="co"> true #- {true, false, "green","#AA0000"}</span></span>
<span id="cb13-12"><a href="#cb13-12"></a><span class="an">title-block-banner-color:</span><span class="co"> "white"    #-"#FFFFFF" </span></span>
<span id="cb13-13"><a href="#cb13-13"></a><span class="an">toc-depth:</span><span class="co"> 3</span></span>
<span id="cb13-14"><a href="#cb13-14"></a><span class="an">smooth-scroll:</span><span class="co"> true</span></span>
<span id="cb13-15"><a href="#cb13-15"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb13-16"><a href="#cb13-16"></a><span class="co">  html:</span></span>
<span id="cb13-17"><a href="#cb13-17"></a><span class="co">    #embed-resources: true</span></span>
<span id="cb13-18"><a href="#cb13-18"></a><span class="co">    link-external-newwindow: true</span></span>
<span id="cb13-19"><a href="#cb13-19"></a><span class="co">    #css: ./assets/my_css_file.css   #- CUIDADO!!!!</span></span>
<span id="cb13-20"><a href="#cb13-20"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb13-21"><a href="#cb13-21"></a><span class="an">code-link:</span><span class="co"> true</span></span>
<span id="cb13-22"><a href="#cb13-22"></a><span class="co">---</span></span>
<span id="cb13-23"><a href="#cb13-23"></a></span>
<span id="cb13-24"><a href="#cb13-24"></a><span class="fu">## ¿POR QUÉ ESTE TEMA Y PARA QUÉ?</span></span>
<span id="cb13-25"><a href="#cb13-25"></a></span>
<span id="cb13-26"><a href="#cb13-26"></a>El tema del precio de la vivienda, en especial de los alquileres, es de gran preocupación para una gran parte de la población y más aún para los jóvenes. Son incontables las veces que hemos escuchado a la gente por la calle quejarse de lo caro que es permitirse una vivienda y más aún independizarse, son cada vez más el número de adultos jóvenes (entre 18 y 30 años) los que deciden quedarse viviendo en casa de sus padres aún cobrando un salario. Esto no es sorpresa alguna, pensemos que para un individuo el hecho de vivir con plena independencia de sus padres requiere la capacidad de costearse una serie de bienes y servicios imprescindibles tales como:</span>
<span id="cb13-27"><a href="#cb13-27"></a></span>
<span id="cb13-28"><a href="#cb13-28"></a><span class="ss">-   </span>Su cesta de compra habitual.</span>
<span id="cb13-29"><a href="#cb13-29"></a><span class="ss">-   </span>Costes de carburante o transportes públicos.</span>
<span id="cb13-30"><a href="#cb13-30"></a><span class="ss">-   </span>El coste de la hipoteca o el alquiler de la vivienda en la que habita.</span>
<span id="cb13-31"><a href="#cb13-31"></a><span class="ss">-   </span>Coste de servicios recurrentes como el gimnasio, peluquero/barbero...</span>
<span id="cb13-32"><a href="#cb13-32"></a><span class="ss">-   </span>Gastos en ocio (como el consumo de bebidas alcohólicas o refrescos, cine, festivales o discotecas, viajes...)</span>
<span id="cb13-33"><a href="#cb13-33"></a></span>
<span id="cb13-34"><a href="#cb13-34"></a>En la siguiente gráfica podemos visualizar el grave empeoramiento de la tasa de emancipación a medida que han pasado los años.</span>
<span id="cb13-35"><a href="#cb13-35"></a></span>
<span id="cb13-38"><a href="#cb13-38"></a><span class="in">```{r}</span></span>
<span id="cb13-39"><a href="#cb13-39"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb13-40"><a href="#cb13-40"></a>Df_eman <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/TASA DE EMANCIPACION.csv"</span>)</span>
<span id="cb13-41"><a href="#cb13-41"></a></span>
<span id="cb13-42"><a href="#cb13-42"></a>Df_good <span class="ot">&lt;-</span> Df_eman <span class="sc">%&gt;%</span></span>
<span id="cb13-43"><a href="#cb13-43"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb13-44"><a href="#cb13-44"></a>  <span class="fu">select</span>(Year, Tasa)</span>
<span id="cb13-45"><a href="#cb13-45"></a></span>
<span id="cb13-46"><a href="#cb13-46"></a>plot_eman <span class="ot">&lt;-</span><span class="fu">ggplot</span>(Df_good, <span class="fu">aes</span>(Year, Tasa)) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="at">group =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb13-47"><a href="#cb13-47"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-48"><a href="#cb13-48"></a>    <span class="at">title =</span> <span class="st">"Tasa de emancipación para jóvenes de 18 -34 años."</span>,</span>
<span id="cb13-49"><a href="#cb13-49"></a>    <span class="at">x =</span> <span class="st">"Año"</span>,</span>
<span id="cb13-50"><a href="#cb13-50"></a>    <span class="at">y =</span> <span class="st">"Tasa de emancipación"</span>,</span>
<span id="cb13-51"><a href="#cb13-51"></a>    <span class="at">caption =</span> <span class="st">"Fuente: datos.gob.es (Gobierno de España)."</span></span>
<span id="cb13-52"><a href="#cb13-52"></a>  ) <span class="sc">+</span></span>
<span id="cb13-53"><a href="#cb13-53"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>()</span>
<span id="cb13-54"><a href="#cb13-54"></a></span>
<span id="cb13-55"><a href="#cb13-55"></a>plot_eman</span>
<span id="cb13-56"><a href="#cb13-56"></a></span>
<span id="cb13-57"><a href="#cb13-57"></a></span>
<span id="cb13-58"><a href="#cb13-58"></a><span class="in">```</span></span>
<span id="cb13-59"><a href="#cb13-59"></a></span>
<span id="cb13-60"><a href="#cb13-60"></a><span class="fu">### ¿Puede un sueldo promedio permitirse estos consumos?</span></span>
<span id="cb13-61"><a href="#cb13-61"></a></span>
<span id="cb13-62"><a href="#cb13-62"></a>Vamos a tomar como referencia el salario promedio en España y su evolución a lo largo de una serie temporal ( en este caso 2006 -2020).</span>
<span id="cb13-63"><a href="#cb13-63"></a></span>
<span id="cb13-66"><a href="#cb13-66"></a><span class="in">```{r}</span></span>
<span id="cb13-67"><a href="#cb13-67"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb13-68"><a href="#cb13-68"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb13-69"><a href="#cb13-69"></a><span class="fu">library</span>(plotly)</span>
<span id="cb13-70"><a href="#cb13-70"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb13-71"><a href="#cb13-71"></a></span>
<span id="cb13-72"><a href="#cb13-72"></a>SALARIOS <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/datos_salariomedio.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-73"><a href="#cb13-73"></a>  <span class="fu">select</span>(Año, Salariomedio) <span class="sc">%&gt;%</span></span>
<span id="cb13-74"><a href="#cb13-74"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-75"><a href="#cb13-75"></a>  <span class="fu">mutate</span>(<span class="at">Variacion =</span>((Salariomedio <span class="sc">-</span> <span class="fu">lag</span>(Salariomedio))<span class="sc">/</span><span class="fu">lag</span>(Salariomedio))<span class="sc">*</span><span class="dv">100</span>)</span>
<span id="cb13-76"><a href="#cb13-76"></a></span>
<span id="cb13-77"><a href="#cb13-77"></a></span>
<span id="cb13-78"><a href="#cb13-78"></a>Evo_salarios <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(SALARIOS, <span class="fu">aes</span>(Año, Salariomedio)) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"aquamarine4"</span>, <span class="at">size =</span> <span class="fl">0.95</span>) <span class="sc">+</span> ggthemes<span class="sc">::</span> <span class="fu">theme_stata</span>()</span>
<span id="cb13-79"><a href="#cb13-79"></a></span>
<span id="cb13-80"><a href="#cb13-80"></a>  </span>
<span id="cb13-81"><a href="#cb13-81"></a>Evo_salarios <span class="sc">+</span> <span class="fu">labs</span>(</span>
<span id="cb13-82"><a href="#cb13-82"></a>  <span class="at">title =</span> <span class="st">"Evolución del salario medio anual."</span>,</span>
<span id="cb13-83"><a href="#cb13-83"></a>  <span class="at">subtitle =</span> <span class="st">"Serie 2006-2020."</span>,</span>
<span id="cb13-84"><a href="#cb13-84"></a>  <span class="at">y =</span> <span class="st">"Salario medio (miles de euros)"</span>,</span>
<span id="cb13-85"><a href="#cb13-85"></a>  <span class="at">caption =</span> <span class="st">"Fuente: Epdata"</span>)</span>
<span id="cb13-86"><a href="#cb13-86"></a></span>
<span id="cb13-87"><a href="#cb13-87"></a><span class="in">```</span></span>
<span id="cb13-88"><a href="#cb13-88"></a></span>
<span id="cb13-89"><a href="#cb13-89"></a>Como se puede observar en la gráfica de arriba, podemos identificar 2 etapas de fuerte crecimiento del salario promedio:</span>
<span id="cb13-90"><a href="#cb13-90"></a></span>
<span id="cb13-91"><a href="#cb13-91"></a><span class="ss">-   </span>De 2006 a 2008</span>
<span id="cb13-92"><a href="#cb13-92"></a><span class="ss">-   </span>De 2014 a 2019</span>
<span id="cb13-93"><a href="#cb13-93"></a></span>
<span id="cb13-94"><a href="#cb13-94"></a>La primera es atribuile al periodo de fuerte expansión económica que experimentó la economía española durante el principio de los 2000 junto con el boom del ladrillo, mientras que la segunda se debe al periodo de fuerte recuperación económica tras los años de crisis.</span>
<span id="cb13-95"><a href="#cb13-95"></a></span>
<span id="cb13-96"><a href="#cb13-96"></a>Por otro lado, se puede observar una caída durante el periodo 2011 - 2014 debido al estallido de la crisis de 2008, se puede remarcar en ese mismo periodo (2008-2011) el estancamiento del salario promedio. No obstante, conviene visualizar estos datos también en tasas de crecimiento:</span>
<span id="cb13-97"><a href="#cb13-97"></a></span>
<span id="cb13-100"><a href="#cb13-100"></a><span class="in">```{r}</span></span>
<span id="cb13-101"><a href="#cb13-101"></a>Var_Salarios <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(SALARIOS, <span class="fu">aes</span>(Año, Variacion)) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"#53868B"</span>, <span class="at">size =</span> <span class="fl">0.95</span>) <span class="sc">+</span> ggthemes<span class="sc">::</span> <span class="fu">theme_stata</span>()</span>
<span id="cb13-102"><a href="#cb13-102"></a></span>
<span id="cb13-103"><a href="#cb13-103"></a>Var_Salarios <span class="sc">+</span> <span class="fu">labs</span>(</span>
<span id="cb13-104"><a href="#cb13-104"></a>  <span class="at">title =</span> <span class="st">"Crecimiento del salario medio."</span>,</span>
<span id="cb13-105"><a href="#cb13-105"></a>  <span class="at">subtitle =</span> <span class="st">"Serie 2006-2020."</span>,</span>
<span id="cb13-106"><a href="#cb13-106"></a>  <span class="at">y =</span> <span class="st">"Variación en porcentaje"</span>,</span>
<span id="cb13-107"><a href="#cb13-107"></a>  <span class="at">caption =</span> <span class="st">"Fuente: Epdata"</span>)</span>
<span id="cb13-108"><a href="#cb13-108"></a></span>
<span id="cb13-109"><a href="#cb13-109"></a><span class="in">```</span></span>
<span id="cb13-110"><a href="#cb13-110"></a></span>
<span id="cb13-111"><a href="#cb13-111"></a>Teniendo en cuenta la evolución en tasas podemos fijarnos que la primera etapa de crecimiento del salario español mostraba una tendencia decreciente mientras que la segunda todo lo contrario. Las razones de este comportamiento son las mismas, ya que en el boom la economía española estaba creciendo por encima de su potencial y comenzaba a estancarse mientras que en un periodo de recuperación al estar alejados de nuestro potencial la tasa de crecimiento muestra tendencia creciente. Consideramos que es bastante obvia la caída del salario en 2020 debido a la pandemia covid, no es necesario desarrollar en este aspecto.</span>
<span id="cb13-112"><a href="#cb13-112"></a></span>
<span id="cb13-113"><a href="#cb13-113"></a>Volviendo a la pregunta principal con lo que hemos visto, si el crecimiento del salario medio español a lo largo de los últimos 20 años es similar o superior al del IPC, podemos afirmar que será capaz de cubrir los gastos necesarios para un individuo mencionados al principio. Sin embargo, no podemos asegurar esto último sin informarnos acerca del crecimiento de los precios de dichos bienes y servicios.</span>
<span id="cb13-114"><a href="#cb13-114"></a></span>
<span id="cb13-117"><a href="#cb13-117"></a><span class="in">```{r}</span></span>
<span id="cb13-118"><a href="#cb13-118"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb13-119"><a href="#cb13-119"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb13-120"><a href="#cb13-120"></a>IPC<span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/ipc_bueno.csv"</span>)</span>
<span id="cb13-121"><a href="#cb13-121"></a></span>
<span id="cb13-122"><a href="#cb13-122"></a>df_IPC <span class="ot">&lt;-</span> IPC <span class="sc">%&gt;%</span></span>
<span id="cb13-123"><a href="#cb13-123"></a>  <span class="fu">rename</span>(<span class="at">IPC =</span> indice_precios_consumo_tasas_variacion) <span class="sc">%&gt;%</span></span>
<span id="cb13-124"><a href="#cb13-124"></a>  <span class="fu">select</span>(indicadores,grupos_coicop_nombre,provincias_nombre,periodos_id,IPC) <span class="sc">%&gt;%</span></span>
<span id="cb13-125"><a href="#cb13-125"></a>  <span class="fu">filter</span>(periodos_id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"2002M01"</span>,<span class="st">"2003M01"</span>,<span class="st">"2004M01"</span>,<span class="st">"2005M01"</span>,<span class="st">"2006M01"</span>,<span class="st">"2007M01"</span>,<span class="st">"2008M01"</span>,<span class="st">"2009M01"</span>,<span class="st">"2010M01"</span>,<span class="st">"2011M01"</span>,<span class="st">"2012M01"</span>,<span class="st">"2013M01"</span>,<span class="st">"2014M01"</span>,<span class="st">"2015M01"</span>,<span class="st">"2016M01"</span>))</span>
<span id="cb13-126"><a href="#cb13-126"></a></span>
<span id="cb13-127"><a href="#cb13-127"></a></span>
<span id="cb13-128"><a href="#cb13-128"></a>df_IPC_valores <span class="ot">&lt;-</span> df_IPC <span class="sc">%&gt;%</span></span>
<span id="cb13-129"><a href="#cb13-129"></a>  <span class="fu">filter</span>(indicadores <span class="sc">==</span> <span class="st">"Índices"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-130"><a href="#cb13-130"></a>  <span class="fu">filter</span>(provincias_nombre <span class="sc">==</span> <span class="st">"España"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-131"><a href="#cb13-131"></a>  <span class="fu">mutate</span>(<span class="at">periodos_id =</span> <span class="fu">as.Date</span>(<span class="fu">paste0</span>(<span class="fu">substr</span>(periodos_id, <span class="dv">1</span>, <span class="dv">4</span>), <span class="fu">substr</span>(periodos_id, <span class="dv">6</span>, <span class="dv">7</span>), <span class="st">"-01"</span>), <span class="at">format =</span> <span class="st">"%Y%m-%d"</span>))</span>
<span id="cb13-132"><a href="#cb13-132"></a></span>
<span id="cb13-133"><a href="#cb13-133"></a>plot_IPC_valores <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_IPC_valores, <span class="fu">aes</span>(periodos_id, IPC, <span class="at">group =</span> grupos_coicop_nombre, <span class="at">color =</span> grupos_coicop_nombre)) <span class="sc">+</span> </span>
<span id="cb13-134"><a href="#cb13-134"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb13-135"><a href="#cb13-135"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() <span class="sc">+</span></span>
<span id="cb13-136"><a href="#cb13-136"></a>  <span class="fu">theme</span>(</span>
<span id="cb13-137"><a href="#cb13-137"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(</span>
<span id="cb13-138"><a href="#cb13-138"></a>      <span class="at">angle =</span> <span class="dv">75</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">margin =</span> <span class="fu">margin</span>(</span>
<span id="cb13-139"><a href="#cb13-139"></a>        <span class="at">r =</span> <span class="dv">5</span>, <span class="at">b =</span> <span class="dv">5</span>, <span class="at">l =</span> <span class="dv">5</span>)),</span>
<span id="cb13-140"><a href="#cb13-140"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">5</span>),</span>
<span id="cb13-141"><a href="#cb13-141"></a>    <span class="at">panel.spacing =</span> <span class="fu">unit</span>(<span class="fl">0.75</span>, <span class="st">"lines"</span>),</span>
<span id="cb13-142"><a href="#cb13-142"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb13-143"><a href="#cb13-143"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"cm"</span>),</span>
<span id="cb13-144"><a href="#cb13-144"></a>    <span class="at">legend.key.height =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"cm"</span>),</span>
<span id="cb13-145"><a href="#cb13-145"></a>    <span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="fl">0.1</span>,<span class="st">"cm"</span>),</span>
<span id="cb13-146"><a href="#cb13-146"></a>    <span class="at">legend.direction =</span> <span class="st">"vertical"</span>,</span>
<span id="cb13-147"><a href="#cb13-147"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb13-148"><a href="#cb13-148"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-149"><a href="#cb13-149"></a>    <span class="at">title =</span> <span class="st">"Evolución IPC por grupos COICOP"</span>,</span>
<span id="cb13-150"><a href="#cb13-150"></a>    <span class="at">subtitle =</span> <span class="st">"Serie 2002 - 2016"</span>,</span>
<span id="cb13-151"><a href="#cb13-151"></a>    <span class="at">x =</span> <span class="st">"Periodo"</span>,</span>
<span id="cb13-152"><a href="#cb13-152"></a>    <span class="at">y =</span> <span class="st">"IPC"</span>,</span>
<span id="cb13-153"><a href="#cb13-153"></a>    <span class="at">caption =</span> <span class="st">"Fuente: datos.gob.es (Gobierno de España)"</span>,</span>
<span id="cb13-154"><a href="#cb13-154"></a>    <span class="at">color =</span> <span class="st">"Grupos COICOP"</span></span>
<span id="cb13-155"><a href="#cb13-155"></a>  ) <span class="sc">+</span></span>
<span id="cb13-156"><a href="#cb13-156"></a>  <span class="fu">facet_wrap</span>(</span>
<span id="cb13-157"><a href="#cb13-157"></a>    <span class="fu">vars</span>(grupos_coicop_nombre),</span>
<span id="cb13-158"><a href="#cb13-158"></a>    <span class="at">nrow =</span> <span class="dv">4</span>,</span>
<span id="cb13-159"><a href="#cb13-159"></a>    <span class="at">ncol =</span> <span class="dv">4</span>,</span>
<span id="cb13-160"><a href="#cb13-160"></a>    <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="at">grupos_coicop_nombre =</span> <span class="cf">function</span>(label) <span class="fu">str_wrap</span>(label, <span class="at">width =</span> <span class="dv">20</span>))) <span class="sc">+</span></span>
<span id="cb13-161"><a href="#cb13-161"></a>  <span class="fu">theme</span>(<span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>))</span>
<span id="cb13-162"><a href="#cb13-162"></a></span>
<span id="cb13-163"><a href="#cb13-163"></a>plot_animado <span class="ot">&lt;-</span> plot_IPC_valores <span class="sc">+</span> <span class="fu">transition_reveal</span>(periodos_id) <span class="sc">+</span> <span class="fu">view_follow</span>(<span class="at">fixed_y =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-164"><a href="#cb13-164"></a></span>
<span id="cb13-165"><a href="#cb13-165"></a>plot_animado</span>
<span id="cb13-166"><a href="#cb13-166"></a></span>
<span id="cb13-167"><a href="#cb13-167"></a><span class="in">```</span></span>
<span id="cb13-168"><a href="#cb13-168"></a></span>
<span id="cb13-169"><a href="#cb13-169"></a>En la gráfica animada de arriba se nos ilustra el crecimiento del IPC en distintos grupos de bienes/servicios de consumo. Al mostrar una evolución de precios a lo largo de un periodo de 14 años, lo normal es que haya un crecimiento en el nivel de precios sostenido y a un ritmo bajo. No obstante, llama la atención el acusado crecimiento de los precios para las **bebidas alcohólicas y tabaco** (cuyas demandas se caracterizan por ser inelásticas) Y la **enseñanza** y la **vivienda**, debido a que su crecimiento se acelera al final del periodo. Para ser más precisos, observémos el comportamiento en tasas de crecimiento:</span>
<span id="cb13-170"><a href="#cb13-170"></a></span>
<span id="cb13-173"><a href="#cb13-173"></a><span class="in">```{r}</span></span>
<span id="cb13-174"><a href="#cb13-174"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb13-175"><a href="#cb13-175"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb13-176"><a href="#cb13-176"></a>IPC<span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"./datos/ipc_bueno.csv"</span>)</span>
<span id="cb13-177"><a href="#cb13-177"></a></span>
<span id="cb13-178"><a href="#cb13-178"></a>df_IPC <span class="ot">&lt;-</span> IPC <span class="sc">%&gt;%</span></span>
<span id="cb13-179"><a href="#cb13-179"></a>  <span class="fu">rename</span>(<span class="at">IPC =</span> indice_precios_consumo_tasas_variacion) <span class="sc">%&gt;%</span></span>
<span id="cb13-180"><a href="#cb13-180"></a>  <span class="fu">select</span>(indicadores,grupos_coicop_nombre,provincias_nombre,periodos_id,IPC) <span class="sc">%&gt;%</span></span>
<span id="cb13-181"><a href="#cb13-181"></a>  <span class="fu">filter</span>(periodos_id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"2002M01"</span>,<span class="st">"2003M01"</span>,<span class="st">"2004M01"</span>,<span class="st">"2005M01"</span>,<span class="st">"2006M01"</span>,<span class="st">"2007M01"</span>,<span class="st">"2008M01"</span>,<span class="st">"2009M01"</span>,<span class="st">"2010M01"</span>,<span class="st">"2011M01"</span>,<span class="st">"2012M01"</span>,<span class="st">"2013M01"</span>,<span class="st">"2014M01"</span>,<span class="st">"2015M01"</span>,<span class="st">"2016M01"</span>))</span>
<span id="cb13-182"><a href="#cb13-182"></a></span>
<span id="cb13-183"><a href="#cb13-183"></a></span>
<span id="cb13-184"><a href="#cb13-184"></a>df_IPC_valores <span class="ot">&lt;-</span> df_IPC <span class="sc">%&gt;%</span></span>
<span id="cb13-185"><a href="#cb13-185"></a>  <span class="fu">filter</span>(indicadores <span class="sc">==</span> <span class="st">"Índices"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-186"><a href="#cb13-186"></a>  <span class="fu">filter</span>(provincias_nombre <span class="sc">==</span> <span class="st">"España"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-187"><a href="#cb13-187"></a>  <span class="fu">mutate</span>(<span class="at">periodos_id =</span> <span class="fu">as.Date</span>(<span class="fu">paste0</span>(<span class="fu">substr</span>(periodos_id, <span class="dv">1</span>, <span class="dv">4</span>), <span class="fu">substr</span>(periodos_id, <span class="dv">6</span>, <span class="dv">7</span>), <span class="st">"-01"</span>), <span class="at">format =</span> <span class="st">"%Y%m-%d"</span>))</span>
<span id="cb13-188"><a href="#cb13-188"></a></span>
<span id="cb13-189"><a href="#cb13-189"></a>df_IPC_tasas <span class="ot">&lt;-</span> df_IPC <span class="sc">%&gt;%</span></span>
<span id="cb13-190"><a href="#cb13-190"></a>  <span class="fu">filter</span>(indicadores <span class="sc">==</span> <span class="st">"Tasas de variación anual"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-191"><a href="#cb13-191"></a>  <span class="fu">filter</span>(provincias_nombre <span class="sc">==</span> <span class="st">"España"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-192"><a href="#cb13-192"></a>  <span class="fu">mutate</span>(<span class="at">periodos_id =</span> <span class="fu">as.Date</span>(<span class="fu">paste0</span>(<span class="fu">substr</span>(periodos_id, <span class="dv">1</span>, <span class="dv">4</span>), <span class="fu">substr</span>(periodos_id, <span class="dv">6</span>, <span class="dv">7</span>), <span class="st">"-01"</span>), <span class="at">format =</span> <span class="st">"%Y%m-%d"</span>))</span>
<span id="cb13-193"><a href="#cb13-193"></a></span>
<span id="cb13-194"><a href="#cb13-194"></a></span>
<span id="cb13-195"><a href="#cb13-195"></a>plot_IPC_tasas <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_IPC_tasas, <span class="fu">aes</span>(periodos_id, IPC, <span class="at">group =</span> grupos_coicop_nombre, <span class="at">color =</span> grupos_coicop_nombre)) <span class="sc">+</span> </span>
<span id="cb13-196"><a href="#cb13-196"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb13-197"><a href="#cb13-197"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() <span class="sc">+</span></span>
<span id="cb13-198"><a href="#cb13-198"></a>  <span class="fu">theme</span>(</span>
<span id="cb13-199"><a href="#cb13-199"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(</span>
<span id="cb13-200"><a href="#cb13-200"></a>      <span class="at">angle =</span> <span class="dv">75</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">margin =</span> <span class="fu">margin</span>(</span>
<span id="cb13-201"><a href="#cb13-201"></a>        <span class="at">r =</span> <span class="dv">5</span>, <span class="at">b =</span> <span class="dv">5</span>, <span class="at">l =</span> <span class="dv">5</span>)),</span>
<span id="cb13-202"><a href="#cb13-202"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">5</span>),</span>
<span id="cb13-203"><a href="#cb13-203"></a>    <span class="at">panel.spacing =</span> <span class="fu">unit</span>(<span class="fl">0.75</span>, <span class="st">"lines"</span>),</span>
<span id="cb13-204"><a href="#cb13-204"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb13-205"><a href="#cb13-205"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"cm"</span>),</span>
<span id="cb13-206"><a href="#cb13-206"></a>    <span class="at">legend.key.height =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"cm"</span>),</span>
<span id="cb13-207"><a href="#cb13-207"></a>    <span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="fl">0.1</span>,<span class="st">"cm"</span>),</span>
<span id="cb13-208"><a href="#cb13-208"></a>    <span class="at">legend.direction =</span> <span class="st">"vertical"</span>,</span>
<span id="cb13-209"><a href="#cb13-209"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb13-210"><a href="#cb13-210"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-211"><a href="#cb13-211"></a>    <span class="at">title =</span> <span class="st">"Evolución IPC en tasas por grupos COICOP"</span>,</span>
<span id="cb13-212"><a href="#cb13-212"></a>    <span class="at">subtitle =</span> <span class="st">"Serie 2002 - 2016"</span>,</span>
<span id="cb13-213"><a href="#cb13-213"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-214"><a href="#cb13-214"></a>    <span class="at">y =</span> <span class="st">"Var. IPC"</span>,</span>
<span id="cb13-215"><a href="#cb13-215"></a>    <span class="at">caption =</span> <span class="st">"Fuente: datos.gob.es (Gobierno de España)"</span>,</span>
<span id="cb13-216"><a href="#cb13-216"></a>    <span class="at">color =</span> <span class="st">"Grupos COICOP"</span></span>
<span id="cb13-217"><a href="#cb13-217"></a>  ) <span class="sc">+</span></span>
<span id="cb13-218"><a href="#cb13-218"></a>  <span class="fu">facet_wrap</span>(</span>
<span id="cb13-219"><a href="#cb13-219"></a>    <span class="fu">vars</span>(grupos_coicop_nombre),</span>
<span id="cb13-220"><a href="#cb13-220"></a>    <span class="at">nrow =</span> <span class="dv">4</span>,</span>
<span id="cb13-221"><a href="#cb13-221"></a>    <span class="at">ncol =</span> <span class="dv">4</span>,</span>
<span id="cb13-222"><a href="#cb13-222"></a>    <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="at">grupos_coicop_nombre =</span> <span class="cf">function</span>(label) <span class="fu">str_wrap</span>(label, <span class="at">width =</span> <span class="dv">20</span>))) <span class="sc">+</span></span>
<span id="cb13-223"><a href="#cb13-223"></a>  <span class="fu">theme</span>(<span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>))</span>
<span id="cb13-224"><a href="#cb13-224"></a></span>
<span id="cb13-225"><a href="#cb13-225"></a>plot_IPC_tasas_animado <span class="ot">&lt;-</span> plot_IPC_tasas <span class="sc">+</span> <span class="fu">transition_reveal</span>(periodos_id) <span class="sc">+</span> <span class="fu">view_follow</span>(<span class="at">fixed_y =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-226"><a href="#cb13-226"></a></span>
<span id="cb13-227"><a href="#cb13-227"></a>plot_IPC_tasas_animado</span>
<span id="cb13-228"><a href="#cb13-228"></a><span class="in">```</span></span>
<span id="cb13-229"><a href="#cb13-229"></a></span>
<span id="cb13-230"><a href="#cb13-230"></a>Los grupos que presentan una mayor volatilidad son el transporte y las bebidas alcohólicas y el tabaco. El comportamiento para la enseñanza y la medicina ha sido similar. Podemos resaltar que el grupo de alimentos y bebidas no alcohólicas han mostrado una evolución con fuertes caídas. El resto de grupos han mostrado una evolución adecuada en sus niveles de precios (crecimiento constante a tasas bajas).</span>
<span id="cb13-231"><a href="#cb13-231"></a></span>
<span id="cb13-232"><a href="#cb13-232"></a>*COMPARATIVA EVOLUCIÓN SALARIO - PRECIOS*</span>
<span id="cb13-233"><a href="#cb13-233"></a></span>
<span id="cb13-234"><a href="#cb13-234"></a>En primer lugar, el crecimiento del salario medio se ha ido estancando hasta llegar al crecimiento negativo (es decir, su reducción) pasando de tener una tasa del 7,5% a su punto más bajo de -2,5%. Una vez llega a ese suelo, se recupera hasta el 3,8% aproximadamente. Si a continuación nos fijamos en las tasas de crecimiento del IPC tanto general como por grupos, veremos que el crecimiento de los precios ha sido mayor que el de los salarios en términos relativos pues podemos observar cómo a lo largo del periodo el crecimiento ha oscilado entre bandas de 0 a 10%. En resumidas cuentas, el crecimiento del salario se ha ido estancando y ha tenido una leve recuperación a posteriori, la cual no es suficiente para soportar la evolución de los precios, resultando en una pérdida de poder adquisitivo para el ciudadanio promedio y por tanto dificultando la emancipación de los jóvenes.</span>
<span id="cb13-235"><a href="#cb13-235"></a></span>
<span id="cb13-236"><a href="#cb13-236"></a><span class="fu">## CENTRÁNDONOS EN EL TEMA DE LA VIVIENDA</span></span>
<span id="cb13-237"><a href="#cb13-237"></a></span>
<span id="cb13-238"><a href="#cb13-238"></a>A la hora de hablar de la vivienda, es muy importante distinguir qué tipos de régimen de tenencia de la vivienda existen y en cuáles vamos a centrar para estudiar la evolución de sus precios. Vamos a exponer en el siguiente gráfico la distribución de la propiedad de la vivienda en sus distintos formatos para un conjunto de países europeos.</span>
<span id="cb13-239"><a href="#cb13-239"></a></span>
<span id="cb13-240"><a href="#cb13-240"></a><span class="fu">### Distribución del régimen de tenencia de la vivienda en Europa.</span></span>
<span id="cb13-241"><a href="#cb13-241"></a></span>
<span id="cb13-244"><a href="#cb13-244"></a><span class="in">```{r}</span></span>
<span id="cb13-245"><a href="#cb13-245"></a>datos_europa<span class="ot">&lt;-</span> <span class="st">"./datos/datos_europa.csv"</span></span>
<span id="cb13-246"><a href="#cb13-246"></a>datos_europa<span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(datos_europa)</span>
<span id="cb13-247"><a href="#cb13-247"></a>datos_europa<span class="ot">&lt;-</span> datos_europa <span class="sc">%&gt;%</span> <span class="fu">select</span>(tenure,geo,OBS_VALUE)</span>
<span id="cb13-248"><a href="#cb13-248"></a></span>
<span id="cb13-249"><a href="#cb13-249"></a>categorias<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"OWN_L"</span> <span class="ot">=</span> <span class="st">"Propietario,</span><span class="sc">\n</span><span class="st"> con hipoteca o préstamo"</span>, <span class="st">"OWN_NL"</span> <span class="ot">=</span> <span class="st">"Propietario,</span><span class="sc">\n</span><span class="st"> sin hipoteca ni préstamo de vivienda pendiente"</span>, <span class="st">"RENT_FR"</span> <span class="ot">=</span> <span class="st">"Inquilino,</span><span class="sc">\n</span><span class="st"> alquiler a precio reducido o gratis"</span>, <span class="st">"RENT_MKT"</span> <span class="ot">=</span> <span class="st">"Inquilino,</span><span class="sc">\n</span><span class="st"> alquiler a precio de mercado"</span>)</span>
<span id="cb13-250"><a href="#cb13-250"></a></span>
<span id="cb13-251"><a href="#cb13-251"></a>p<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(datos_europa, <span class="fu">aes</span>(<span class="at">x =</span> geo, <span class="at">y =</span> OBS_VALUE,  <span class="at">fill =</span> tenure)) <span class="sc">+</span></span>
<span id="cb13-252"><a href="#cb13-252"></a>  <span class="fu">geom_col</span>( <span class="at">position =</span> <span class="st">"stack"</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb13-253"><a href="#cb13-253"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución de la tenencia  de vivienda por países europeos (2018)"</span>, </span>
<span id="cb13-254"><a href="#cb13-254"></a>       <span class="at">x =</span> <span class="st">"País"</span>, <span class="at">y =</span> <span class="st">"%"</span>, <span class="at">caption =</span> <span class="st">"Fuente:Eurostat"</span>) <span class="sc">+</span></span>
<span id="cb13-255"><a href="#cb13-255"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() <span class="sc">+</span></span>
<span id="cb13-256"><a href="#cb13-256"></a>  <span class="fu">theme</span>(</span>
<span id="cb13-257"><a href="#cb13-257"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb13-258"><a href="#cb13-258"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.2</span>,<span class="st">"cm"</span>),</span>
<span id="cb13-259"><a href="#cb13-259"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb13-260"><a href="#cb13-260"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb13-261"><a href="#cb13-261"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb13-262"><a href="#cb13-262"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb13-263"><a href="#cb13-263"></a>    <span class="at">panel.grid.minor.y =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb13-264"><a href="#cb13-264"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>) </span>
<span id="cb13-265"><a href="#cb13-265"></a>p <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"OWN_L"</span> <span class="ot">=</span> <span class="st">"blue"</span>, <span class="st">"OWN_NL"</span> <span class="ot">=</span> <span class="st">"red"</span>, <span class="st">"RENT_FR"</span> <span class="ot">=</span> <span class="st">"yellow"</span>, <span class="st">"RENT_MKT"</span> <span class="ot">=</span><span class="st">"green"</span> ), <span class="at">labels =</span> categorias) <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>( <span class="at">keywidth =</span> <span class="fl">0.5</span>, <span class="at">keyheight =</span> <span class="fl">0.5</span>, <span class="at">title.theme =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">5</span>), <span class="at">label.theme =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">5</span>)))</span>
<span id="cb13-266"><a href="#cb13-266"></a></span>
<span id="cb13-267"><a href="#cb13-267"></a><span class="in">```</span></span>
<span id="cb13-268"><a href="#cb13-268"></a></span>
<span id="cb13-269"><a href="#cb13-269"></a>Como podemos observar para el año 2018, la distribución de viviendas en los Estados miembros de la Unión Europea mostró variaciones significativas. La mayoría de la población residía en propiedades, con tasas que iban desde el 51,4% en Alemania hasta el 96,4% en Rumanía. Curiosamente, Suiza destacó como una excepción, con un notable 57,5% de la población optando por el alquiler.</span>
<span id="cb13-270"><a href="#cb13-270"></a>En países como los Países Bajos (60,5%) y Suecia (51,7%), así como en Islandia (63,9%) y Noruega (60,1%), más del 50% de la población vivía en propiedades financiadas mediante préstamos o hipotecas.</span>
<span id="cb13-271"><a href="#cb13-271"></a>En cuanto al alquiler a precio de mercado, en 2018, menos del 10% de la población en once Estados miembros de la UE optaba por esta opción. Alemania (40,8%) y Dinamarca (39,4%) presentaban tasas significativamente más altas, mientras que Suiza lideraba con un notable 51,1%.</span>
<span id="cb13-272"><a href="#cb13-272"></a>A nivel general, la proporción de población que residía en viviendas de alquiler protegido o disfrutaba de viviendas gratuitas fue inferior al 20% en todos los Estados miembros de la UE y en los ocho países no miembros para los cuales se disponía de datos, sugiriendo una preferencia generalizada por la propiedad o formas de alquiler más estables.</span>
<span id="cb13-273"><a href="#cb13-273"></a></span>
<span id="cb13-274"><a href="#cb13-274"></a>En el caso de España, podemos observar como en su gran mayoría la ciudadanía es *propietaria* de vivienda, dentro de esta categoría los propietarios hipotecados no llegan a alcanzar la mitad. Sin embargo, el monto total de inquilinos es significativo llegando a representar un 25% del total aproximadamente.</span>
<span id="cb13-275"><a href="#cb13-275"></a></span>
<span id="cb13-278"><a href="#cb13-278"></a><span class="in">```{r}</span></span>
<span id="cb13-279"><a href="#cb13-279"></a><span class="do">######gráfico pastel</span></span>
<span id="cb13-280"><a href="#cb13-280"></a></span>
<span id="cb13-281"><a href="#cb13-281"></a><span class="do">##Cargamos los datos </span></span>
<span id="cb13-282"><a href="#cb13-282"></a>d_tenencia<span class="ot">&lt;-</span> <span class="st">"./datos/regimen_tenencia.csv"</span></span>
<span id="cb13-283"><a href="#cb13-283"></a>d_tenencia<span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(d_tenencia)</span>
<span id="cb13-284"><a href="#cb13-284"></a></span>
<span id="cb13-285"><a href="#cb13-285"></a><span class="do">##Cambiamos la coma por el punto en la columna Total</span></span>
<span id="cb13-286"><a href="#cb13-286"></a>d_tenencia <span class="ot">&lt;-</span> d_tenencia<span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Total =</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(Total, <span class="st">","</span> , <span class="st">"."</span> ))</span>
<span id="cb13-287"><a href="#cb13-287"></a><span class="fu">str</span>(d_tenencia)</span>
<span id="cb13-288"><a href="#cb13-288"></a></span>
<span id="cb13-289"><a href="#cb13-289"></a>d_tenencia<span class="sc">$</span>Total <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(d_tenencia<span class="sc">$</span>Total)</span>
<span id="cb13-290"><a href="#cb13-290"></a></span>
<span id="cb13-291"><a href="#cb13-291"></a>Propiedad <span class="ot">&lt;-</span> d_tenencia<span class="sc">%&gt;%</span></span>
<span id="cb13-292"><a href="#cb13-292"></a>  <span class="fu">filter</span> (Regimen_tenencia <span class="sc">==</span> <span class="st">"Propiedad"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-293"><a href="#cb13-293"></a>  <span class="fu">filter</span> (CCAA <span class="sc">==</span> <span class="st">"Total Nacional"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-294"><a href="#cb13-294"></a>  <span class="fu">group_by</span>(Periodo, Regimen_tenencia) </span>
<span id="cb13-295"><a href="#cb13-295"></a></span>
<span id="cb13-296"><a href="#cb13-296"></a>Alquiler_precio_mercado<span class="ot">&lt;-</span> d_tenencia <span class="sc">%&gt;%</span></span>
<span id="cb13-297"><a href="#cb13-297"></a>  <span class="fu">filter</span>(Regimen_tenencia <span class="sc">==</span> <span class="st">"Alquiler a precio de mercado"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-298"><a href="#cb13-298"></a>  <span class="fu">group_by</span>(Periodo, Regimen_tenencia)</span>
<span id="cb13-299"><a href="#cb13-299"></a></span>
<span id="cb13-300"><a href="#cb13-300"></a>Alquiler_inferior_precio<span class="ot">&lt;-</span> d_tenencia <span class="sc">%&gt;%</span></span>
<span id="cb13-301"><a href="#cb13-301"></a>  <span class="fu">filter</span>(Regimen_tenencia <span class="sc">==</span> <span class="st">"Alquiler inferior al precio de mercado"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-302"><a href="#cb13-302"></a>  <span class="fu">group_by</span>(Periodo, Regimen_tenencia)</span>
<span id="cb13-303"><a href="#cb13-303"></a></span>
<span id="cb13-304"><a href="#cb13-304"></a>Cesion<span class="ot">&lt;-</span> d_tenencia <span class="sc">%&gt;%</span> </span>
<span id="cb13-305"><a href="#cb13-305"></a>  <span class="fu">filter</span>(Regimen_tenencia <span class="sc">==</span> <span class="st">"Cesión"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-306"><a href="#cb13-306"></a>  <span class="fu">group_by</span>(Periodo, Regimen_tenencia)</span>
<span id="cb13-307"><a href="#cb13-307"></a></span>
<span id="cb13-308"><a href="#cb13-308"></a>df_combined <span class="ot">&lt;-</span> Propiedad <span class="sc">%&gt;%</span></span>
<span id="cb13-309"><a href="#cb13-309"></a>  <span class="fu">full_join</span>(Alquiler_precio_mercado) <span class="sc">%&gt;%</span></span>
<span id="cb13-310"><a href="#cb13-310"></a>  <span class="fu">full_join</span>(Alquiler_inferior_precio) <span class="sc">%&gt;%</span></span>
<span id="cb13-311"><a href="#cb13-311"></a>  <span class="fu">full_join</span>(Cesion) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(CCAA<span class="sc">==</span><span class="st">"Total Nacional"</span>) </span>
<span id="cb13-312"><a href="#cb13-312"></a></span>
<span id="cb13-313"><a href="#cb13-313"></a>df_ordenado <span class="ot">&lt;-</span> df_combined <span class="sc">%&gt;%</span> </span>
<span id="cb13-314"><a href="#cb13-314"></a>  <span class="fu">arrange</span>(Periodo)</span>
<span id="cb13-315"><a href="#cb13-315"></a></span>
<span id="cb13-316"><a href="#cb13-316"></a>df_04 <span class="ot">&lt;-</span> df_ordenado <span class="sc">%&gt;%</span></span>
<span id="cb13-317"><a href="#cb13-317"></a>  <span class="fu">filter</span> (Periodo <span class="sc">==</span> <span class="dv">2004</span>)<span class="sc">%&gt;%</span></span>
<span id="cb13-318"><a href="#cb13-318"></a>  <span class="fu">filter</span>(CCAA <span class="sc">==</span><span class="st">"Total Nacional"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-319"><a href="#cb13-319"></a>  <span class="fu">mutate</span>(<span class="at">Total_2decimales =</span> <span class="fu">round</span>(Total, <span class="dv">2</span>),</span>
<span id="cb13-320"><a href="#cb13-320"></a>         <span class="at">csum =</span> <span class="fu">rev</span>(<span class="fu">cumsum</span>(<span class="fu">rev</span>(Total_2decimales))),</span>
<span id="cb13-321"><a href="#cb13-321"></a>         <span class="at">posicion =</span> Total_2decimales<span class="sc">/</span><span class="dv">2</span> <span class="sc">+</span> <span class="fu">lead</span>(csum, <span class="dv">1</span>))<span class="sc">%&gt;%</span></span>
<span id="cb13-322"><a href="#cb13-322"></a>  <span class="fu">mutate</span>(<span class="at">posicion =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(posicion), Total_2decimales<span class="sc">/</span><span class="dv">2</span>, posicion))</span>
<span id="cb13-323"><a href="#cb13-323"></a></span>
<span id="cb13-324"><a href="#cb13-324"></a>df_08 <span class="ot">&lt;-</span> df_ordenado <span class="sc">%&gt;%</span></span>
<span id="cb13-325"><a href="#cb13-325"></a>  <span class="fu">filter</span> (Periodo <span class="sc">==</span> <span class="dv">2008</span>)<span class="sc">%&gt;%</span></span>
<span id="cb13-326"><a href="#cb13-326"></a>  <span class="fu">filter</span>(CCAA<span class="sc">==</span> <span class="st">"Total Nacional"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-327"><a href="#cb13-327"></a>  <span class="fu">mutate</span>(<span class="at">Total_2decimales =</span> <span class="fu">round</span>(Total, <span class="dv">2</span>),</span>
<span id="cb13-328"><a href="#cb13-328"></a>         <span class="at">csum =</span> <span class="fu">rev</span>(<span class="fu">cumsum</span>(<span class="fu">rev</span>(Total_2decimales))),</span>
<span id="cb13-329"><a href="#cb13-329"></a>         <span class="at">posicion =</span> Total_2decimales<span class="sc">/</span><span class="dv">2</span> <span class="sc">+</span> <span class="fu">lead</span>(csum, <span class="dv">1</span>))<span class="sc">%&gt;%</span></span>
<span id="cb13-330"><a href="#cb13-330"></a>  <span class="fu">mutate</span>(<span class="at">posicion =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(posicion), Total_2decimales<span class="sc">/</span><span class="dv">2</span>, posicion))</span>
<span id="cb13-331"><a href="#cb13-331"></a></span>
<span id="cb13-332"><a href="#cb13-332"></a>df_10 <span class="ot">&lt;-</span> df_ordenado <span class="sc">%&gt;%</span></span>
<span id="cb13-333"><a href="#cb13-333"></a>  <span class="fu">filter</span> (Periodo <span class="sc">==</span> <span class="dv">2010</span>)<span class="sc">%&gt;%</span></span>
<span id="cb13-334"><a href="#cb13-334"></a>  <span class="fu">filter</span>(CCAA <span class="sc">==</span> <span class="st">"Total Nacional"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-335"><a href="#cb13-335"></a>  <span class="fu">mutate</span>(<span class="at">Total_2decimales =</span> <span class="fu">round</span>(Total, <span class="dv">2</span>),</span>
<span id="cb13-336"><a href="#cb13-336"></a>         <span class="at">csum =</span> <span class="fu">rev</span>(<span class="fu">cumsum</span>(<span class="fu">rev</span>(Total_2decimales))),</span>
<span id="cb13-337"><a href="#cb13-337"></a>         <span class="at">posicion =</span> Total_2decimales<span class="sc">/</span><span class="dv">2</span> <span class="sc">+</span> <span class="fu">lead</span>(csum, <span class="dv">1</span>))<span class="sc">%&gt;%</span></span>
<span id="cb13-338"><a href="#cb13-338"></a>  <span class="fu">mutate</span>(<span class="at">posicion =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(posicion), Total_2decimales<span class="sc">/</span><span class="dv">2</span>, posicion))</span>
<span id="cb13-339"><a href="#cb13-339"></a></span>
<span id="cb13-340"><a href="#cb13-340"></a>df_17 <span class="ot">&lt;-</span> df_ordenado <span class="sc">%&gt;%</span></span>
<span id="cb13-341"><a href="#cb13-341"></a>  <span class="fu">filter</span> (Periodo <span class="sc">==</span> <span class="dv">2017</span>)<span class="sc">%&gt;%</span></span>
<span id="cb13-342"><a href="#cb13-342"></a>  <span class="fu">filter</span>(CCAA<span class="sc">==</span> <span class="st">"Total Nacional"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb13-343"><a href="#cb13-343"></a>  <span class="fu">mutate</span>(<span class="at">Total_2decimales =</span> <span class="fu">round</span>(Total, <span class="dv">2</span>),</span>
<span id="cb13-344"><a href="#cb13-344"></a>         <span class="at">csum =</span> <span class="fu">rev</span>(<span class="fu">cumsum</span>(<span class="fu">rev</span>(Total_2decimales))),</span>
<span id="cb13-345"><a href="#cb13-345"></a>         <span class="at">posicion =</span> Total_2decimales<span class="sc">/</span><span class="dv">2</span> <span class="sc">+</span> <span class="fu">lead</span>(csum, <span class="dv">1</span>))<span class="sc">%&gt;%</span></span>
<span id="cb13-346"><a href="#cb13-346"></a>  <span class="fu">mutate</span>(<span class="at">posicion =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(posicion), Total_2decimales<span class="sc">/</span><span class="dv">2</span>, posicion))</span>
<span id="cb13-347"><a href="#cb13-347"></a></span>
<span id="cb13-348"><a href="#cb13-348"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb13-349"><a href="#cb13-349"></a></span>
<span id="cb13-350"><a href="#cb13-350"></a>p_2004 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_04, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> Total, <span class="at">fill =</span> <span class="fu">fct_inorder</span>(Regimen_tenencia))) <span class="sc">+</span></span>
<span id="cb13-351"><a href="#cb13-351"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb13-352"><a href="#cb13-352"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb13-353"><a href="#cb13-353"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb13-354"><a href="#cb13-354"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>) <span class="sc">+</span></span>
<span id="cb13-355"><a href="#cb13-355"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> df_04,</span>
<span id="cb13-356"><a href="#cb13-356"></a>            <span class="fu">aes</span>(<span class="at">y =</span> Total, <span class="at">label =</span> <span class="fu">paste0</span>(Total, <span class="st">"%"</span>)),</span>
<span id="cb13-357"><a href="#cb13-357"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb13-358"><a href="#cb13-358"></a>            <span class="at">size =</span> <span class="dv">4</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb13-359"><a href="#cb13-359"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb13-360"><a href="#cb13-360"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb13-361"><a href="#cb13-361"></a></span>
<span id="cb13-362"><a href="#cb13-362"></a></span>
<span id="cb13-363"><a href="#cb13-363"></a>p_2008 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_08, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> Total, <span class="at">fill =</span> <span class="fu">fct_inorder</span>(Regimen_tenencia))) <span class="sc">+</span></span>
<span id="cb13-364"><a href="#cb13-364"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb13-365"><a href="#cb13-365"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb13-366"><a href="#cb13-366"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb13-367"><a href="#cb13-367"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>)  <span class="sc">+</span></span>
<span id="cb13-368"><a href="#cb13-368"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> df_08,</span>
<span id="cb13-369"><a href="#cb13-369"></a>            <span class="fu">aes</span>(<span class="at">y =</span> Total, <span class="at">label =</span> <span class="fu">paste0</span>(Total, <span class="st">"%"</span>)),</span>
<span id="cb13-370"><a href="#cb13-370"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),  <span class="co"># Ajuste vertical</span></span>
<span id="cb13-371"><a href="#cb13-371"></a>            <span class="at">size =</span> <span class="dv">4</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb13-372"><a href="#cb13-372"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb13-373"><a href="#cb13-373"></a></span>
<span id="cb13-374"><a href="#cb13-374"></a>p_2010 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_10, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> Total, <span class="at">fill =</span> <span class="fu">fct_inorder</span>(Regimen_tenencia))) <span class="sc">+</span></span>
<span id="cb13-375"><a href="#cb13-375"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb13-376"><a href="#cb13-376"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb13-377"><a href="#cb13-377"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb13-378"><a href="#cb13-378"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>) <span class="sc">+</span></span>
<span id="cb13-379"><a href="#cb13-379"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> df_10,</span>
<span id="cb13-380"><a href="#cb13-380"></a>            <span class="fu">aes</span>(<span class="at">y =</span> Total, <span class="at">label =</span> <span class="fu">paste0</span>(Total, <span class="st">"%"</span>)),</span>
<span id="cb13-381"><a href="#cb13-381"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),  <span class="co"># Ajuste vertical</span></span>
<span id="cb13-382"><a href="#cb13-382"></a>            <span class="at">size =</span> <span class="dv">4</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb13-383"><a href="#cb13-383"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb13-384"><a href="#cb13-384"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb13-385"><a href="#cb13-385"></a></span>
<span id="cb13-386"><a href="#cb13-386"></a>p_2017<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_17, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> Total, <span class="at">fill =</span> <span class="fu">fct_inorder</span>(Regimen_tenencia))) <span class="sc">+</span></span>
<span id="cb13-387"><a href="#cb13-387"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb13-388"><a href="#cb13-388"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb13-389"><a href="#cb13-389"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb13-390"><a href="#cb13-390"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>) <span class="sc">+</span></span>
<span id="cb13-391"><a href="#cb13-391"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> df_17,</span>
<span id="cb13-392"><a href="#cb13-392"></a>            <span class="fu">aes</span>(<span class="at">y =</span> Total, <span class="at">label =</span> <span class="fu">paste0</span>(Total, <span class="st">"%"</span>)),</span>
<span id="cb13-393"><a href="#cb13-393"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb13-394"><a href="#cb13-394"></a>            <span class="at">size =</span> <span class="dv">4</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb13-395"><a href="#cb13-395"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb13-396"><a href="#cb13-396"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb13-397"><a href="#cb13-397"></a></span>
<span id="cb13-398"><a href="#cb13-398"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb13-399"><a href="#cb13-399"></a></span>
<span id="cb13-400"><a href="#cb13-400"></a>combined_plot <span class="ot">&lt;-</span> p_2004 <span class="sc">+</span> p_2008 <span class="sc">+</span> p_2010 <span class="sc">+</span> p_2017 <span class="sc">+</span></span>
<span id="cb13-401"><a href="#cb13-401"></a>  <span class="fu">plot_annotation</span>(</span>
<span id="cb13-402"><a href="#cb13-402"></a>    <span class="at">title =</span> <span class="st">" Evolución de  la tenencia de la vivienda en España (%)."</span>,</span>
<span id="cb13-403"><a href="#cb13-403"></a>    <span class="at">subtitle =</span> <span class="st">"(2004,2008,2010,2017)"</span>,</span>
<span id="cb13-404"><a href="#cb13-404"></a>    <span class="at">caption =</span> <span class="st">"Fuente: INE"</span></span>
<span id="cb13-405"><a href="#cb13-405"></a>  )</span>
<span id="cb13-406"><a href="#cb13-406"></a></span>
<span id="cb13-407"><a href="#cb13-407"></a>combined_plot</span>
<span id="cb13-408"><a href="#cb13-408"></a><span class="in">```</span></span>
<span id="cb13-409"><a href="#cb13-409"></a></span>
<span id="cb13-410"><a href="#cb13-410"></a>Podemos observar la evolución de la distribución para España en años anteriores, destacando una reducción de la proporción de propietarios de vivienda que deriva en un aumento en la proporción de inquilinos. También podemos observar cómo en la proporción de inquilinos aumentan los que pagan el alquiler a precio de mercado. Es relevante señalar que, a pesar de estas variaciones, las viviendas en propiedad continúan representando la gran mayoría del total de viviendas a lo largo de los años, consolidándose como la opción dominante. En contraste, los alquileres de viviendas a precio inferior al de mercado constituyen una minoría, indicando una preferencia generalizada por la tenencia en propiedad.</span>
<span id="cb13-411"><a href="#cb13-411"></a></span>
<span id="cb13-412"><a href="#cb13-412"></a><span class="fu">### Análisis de la vivienda en España</span></span>
<span id="cb13-413"><a href="#cb13-413"></a></span>
<span id="cb13-414"><a href="#cb13-414"></a>Ya tenemos una pequeña idea de cómo se distribuye la tenencia de viviendas en los países UE y de entre ellos España. Ahora vamos a hacer un análisis no muy extenso de la evolución de los precios tanto del alquiler como de la vivienda en términos de provincias y CCAA.</span>
<span id="cb13-415"><a href="#cb13-415"></a></span>
<span id="cb13-416"><a href="#cb13-416"></a><span class="fu">### Evolución de los alquileres.</span></span>
<span id="cb13-417"><a href="#cb13-417"></a></span>
<span id="cb13-418"><a href="#cb13-418"></a>A la hora de estudiar el precio del alquiler, hemos tenido en consideración 2 factores:</span>
<span id="cb13-419"><a href="#cb13-419"></a><span class="ss">- </span>EL TAMAÑO DE LAS VIVIENDAS</span>
<span id="cb13-420"><a href="#cb13-420"></a><span class="ss">- </span>EL ÍNDICE GENERAL DE PRECIOS DEL ALQUILER DEL INE</span>
<span id="cb13-421"><a href="#cb13-421"></a></span>
<span id="cb13-422"><a href="#cb13-422"></a>Comenzando por el primero:</span>
<span id="cb13-423"><a href="#cb13-423"></a></span>
<span id="cb13-426"><a href="#cb13-426"></a><span class="in">```{r}</span></span>
<span id="cb13-427"><a href="#cb13-427"></a>datos <span class="ot">&lt;-</span> <span class="st">"./datos/DATOS_VIVIENDA.xlsx"</span></span>
<span id="cb13-428"><a href="#cb13-428"></a>info <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(datos)</span>
<span id="cb13-429"><a href="#cb13-429"></a></span>
<span id="cb13-430"><a href="#cb13-430"></a>df3 <span class="ot">&lt;-</span> info <span class="sc">%&gt;%</span></span>
<span id="cb13-431"><a href="#cb13-431"></a>  <span class="fu">filter</span>(COMUNIDAD <span class="sc">==</span> <span class="st">"Total nacional"</span>)</span>
<span id="cb13-432"><a href="#cb13-432"></a></span>
<span id="cb13-433"><a href="#cb13-433"></a></span>
<span id="cb13-434"><a href="#cb13-434"></a>p<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df3,</span>
<span id="cb13-435"><a href="#cb13-435"></a>       <span class="fu">aes</span>(</span>
<span id="cb13-436"><a href="#cb13-436"></a>  AÑO, </span>
<span id="cb13-437"><a href="#cb13-437"></a>  ÍNDICE,</span>
<span id="cb13-438"><a href="#cb13-438"></a>  <span class="at">color =</span> TAMAÑO)) <span class="sc">+</span></span>
<span id="cb13-439"><a href="#cb13-439"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.95</span>) <span class="sc">+</span></span>
<span id="cb13-440"><a href="#cb13-440"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() <span class="sc">+</span> </span>
<span id="cb13-441"><a href="#cb13-441"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-442"><a href="#cb13-442"></a>  <span class="at">title =</span> <span class="st">"Evolución del Índice general de precios de alquiler por tamaño de vivienda (2015 = 100)."</span>,</span>
<span id="cb13-443"><a href="#cb13-443"></a>  <span class="at">subtitle =</span> <span class="st">"serie 2011 - 2021"</span>,</span>
<span id="cb13-444"><a href="#cb13-444"></a>  <span class="at">caption =</span> <span class="st">"Fuente: INE"</span>)</span>
<span id="cb13-445"><a href="#cb13-445"></a></span>
<span id="cb13-446"><a href="#cb13-446"></a>pp <span class="ot">&lt;-</span> <span class="fu">ggplotly</span>(p)</span>
<span id="cb13-447"><a href="#cb13-447"></a></span>
<span id="cb13-448"><a href="#cb13-448"></a></span>
<span id="cb13-449"><a href="#cb13-449"></a>p_plotly <span class="ot">&lt;-</span> pp <span class="sc">%&gt;%</span></span>
<span id="cb13-450"><a href="#cb13-450"></a>  <span class="fu">layout</span>(</span>
<span id="cb13-451"><a href="#cb13-451"></a>    <span class="at">legend =</span> <span class="fu">list</span>(</span>
<span id="cb13-452"><a href="#cb13-452"></a>      <span class="at">title =</span> <span class="st">"Tamaño"</span>,</span>
<span id="cb13-453"><a href="#cb13-453"></a>      <span class="at">font =</span> <span class="fu">list</span>(</span>
<span id="cb13-454"><a href="#cb13-454"></a>        <span class="at">family =</span> <span class="st">"Arial"</span>, </span>
<span id="cb13-455"><a href="#cb13-455"></a>        <span class="at">size =</span> <span class="dv">12</span></span>
<span id="cb13-456"><a href="#cb13-456"></a>      ),</span>
<span id="cb13-457"><a href="#cb13-457"></a>      <span class="at">bgcolor =</span> <span class="st">"white"</span>,</span>
<span id="cb13-458"><a href="#cb13-458"></a>      <span class="at">bordercolor =</span> <span class="st">"black"</span>,</span>
<span id="cb13-459"><a href="#cb13-459"></a>      <span class="at">borderwidth =</span> <span class="dv">1</span>,</span>
<span id="cb13-460"><a href="#cb13-460"></a>      <span class="at">itemsizing =</span> <span class="st">"constant"</span>  </span>
<span id="cb13-461"><a href="#cb13-461"></a>    )</span>
<span id="cb13-462"><a href="#cb13-462"></a>  )</span>
<span id="cb13-463"><a href="#cb13-463"></a></span>
<span id="cb13-464"><a href="#cb13-464"></a>p_plotly <span class="ot">&lt;-</span> p_plotly <span class="sc">%&gt;%</span></span>
<span id="cb13-465"><a href="#cb13-465"></a>  <span class="fu">layout</span>(</span>
<span id="cb13-466"><a href="#cb13-466"></a>    <span class="at">annotations =</span> <span class="fu">list</span>(</span>
<span id="cb13-467"><a href="#cb13-467"></a>      <span class="fu">list</span>(</span>
<span id="cb13-468"><a href="#cb13-468"></a>        <span class="at">text =</span> <span class="st">"Fuente: INE"</span>,</span>
<span id="cb13-469"><a href="#cb13-469"></a>        <span class="at">font =</span> <span class="fu">list</span>(</span>
<span id="cb13-470"><a href="#cb13-470"></a>          <span class="at">family =</span> <span class="st">"Arial"</span>,</span>
<span id="cb13-471"><a href="#cb13-471"></a>          <span class="at">size =</span> <span class="dv">10</span></span>
<span id="cb13-472"><a href="#cb13-472"></a>        ),</span>
<span id="cb13-473"><a href="#cb13-473"></a>        <span class="at">x =</span> <span class="dv">1</span>,</span>
<span id="cb13-474"><a href="#cb13-474"></a>        <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.15</span>,</span>
<span id="cb13-475"><a href="#cb13-475"></a>        <span class="at">showarrow =</span> <span class="cn">FALSE</span>,</span>
<span id="cb13-476"><a href="#cb13-476"></a>        <span class="at">xref =</span> <span class="st">"paper"</span>,</span>
<span id="cb13-477"><a href="#cb13-477"></a>        <span class="at">yref =</span> <span class="st">"paper"</span>,</span>
<span id="cb13-478"><a href="#cb13-478"></a>        <span class="at">xanchor =</span> <span class="st">"right"</span>,</span>
<span id="cb13-479"><a href="#cb13-479"></a>        <span class="at">yanchor =</span> <span class="st">"auto"</span></span>
<span id="cb13-480"><a href="#cb13-480"></a>      )</span>
<span id="cb13-481"><a href="#cb13-481"></a>    )</span>
<span id="cb13-482"><a href="#cb13-482"></a>  )</span>
<span id="cb13-483"><a href="#cb13-483"></a></span>
<span id="cb13-484"><a href="#cb13-484"></a>p_plotly</span>
<span id="cb13-485"><a href="#cb13-485"></a></span>
<span id="cb13-486"><a href="#cb13-486"></a><span class="in">```</span></span>
<span id="cb13-487"><a href="#cb13-487"></a></span>
<span id="cb13-488"><a href="#cb13-488"></a>En la gráfica interactiva presente se nos presenta una relación muy peculiar entre el tamaño de la vivienda y el Índice de precios:</span>
<span id="cb13-489"><a href="#cb13-489"></a></span>
<span id="cb13-490"><a href="#cb13-490"></a><span class="ss">- </span>*Las viviendas de menor tamaño han sufrido un crecimiento en sus precios muy superior al de las de mayor tamaño*.</span>
<span id="cb13-491"><a href="#cb13-491"></a></span>
<span id="cb13-492"><a href="#cb13-492"></a>Esto a simple vista puede resultar sorprendente. ¿cómo es posible que las viviendas más pequeñas, que por tanto tienen menos habitaciones, baños y espacio en general, sean cada vez más caras a un ritmo mayor que las más grandes?.</span>
<span id="cb13-493"><a href="#cb13-493"></a>Debemos tener en cuenta que las viviendas de menor tamaño en España son generalmente edificios residenciales de pisos que están ubicados normalmente en zonas céntricas de las ciudades o en barrios que normalmente están bien conectados. Las viviendas de mayores tamaños requieren parcelas mayores las cuales se edifican en zonas más alejadas o zonas que están en plena construcción, las cuales tienen peor conexión con la ciudad y por tanto mayor dificultad de acceso a supermercados, colegios e institutos, hospitales...</span>
<span id="cb13-494"><a href="#cb13-494"></a>La demanda de viviendas de menor tamaño es mucho mayor que las de tamaños grandes debido a esto último y sobre todo a que la población general no cuenta con un poder adquisitivo tal que le permita la adquisición o el alquiler de viviendas de tamaños grandes.</span>
<span id="cb13-495"><a href="#cb13-495"></a></span>
<span id="cb13-496"><a href="#cb13-496"></a>Si ahora pasamos al análisis por CCAA y provincias...</span>
<span id="cb13-497"><a href="#cb13-497"></a></span>
<span id="cb13-500"><a href="#cb13-500"></a><span class="in">```{r}</span></span>
<span id="cb13-501"><a href="#cb13-501"></a>datos4<span class="ot">&lt;-</span> <span class="st">"./datos/datos4.csv"</span></span>
<span id="cb13-502"><a href="#cb13-502"></a>datos4<span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(datos4)</span>
<span id="cb13-503"><a href="#cb13-503"></a></span>
<span id="cb13-504"><a href="#cb13-504"></a>p4<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(datos4, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Parámetro, <span class="sc">-</span>Cuantia_media), <span class="at">y =</span> Cuantia_media)) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"skyblue"</span>) <span class="sc">+</span>  </span>
<span id="cb13-505"><a href="#cb13-505"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Precio del Alquiler por provincia (2018)"</span>,</span>
<span id="cb13-506"><a href="#cb13-506"></a>       <span class="at">x =</span> <span class="st">"Provincia"</span>,</span>
<span id="cb13-507"><a href="#cb13-507"></a>       <span class="at">y =</span> <span class="st">"Precio medio Alquiler"</span>,</span>
<span id="cb13-508"><a href="#cb13-508"></a>       <span class="at">caption =</span> <span class="st">"Ministerio de Fomento, Gobierno de España"</span>) <span class="sc">+</span></span>
<span id="cb13-509"><a href="#cb13-509"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb13-510"><a href="#cb13-510"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb13-511"><a href="#cb13-511"></a></span>
<span id="cb13-512"><a href="#cb13-512"></a>p4</span>
<span id="cb13-513"><a href="#cb13-513"></a><span class="in">```</span></span>
<span id="cb13-514"><a href="#cb13-514"></a></span>
<span id="cb13-515"><a href="#cb13-515"></a>En este contexto, el gráfico proporciona una visión detallada del precio medio del alquiler en diferentes provincias, destacando variaciones significativas en el coste mensual. En la provincia de Madrid, por ejemplo, se registra el precio más elevado, alcanzando los 819 euros mensuales, seguido de cerca por Barcelona con un promedio de 769 euros al mes. Por otro lado, en la provincia de Lugo se observa el precio más bajo, situándose en 336 euros al mes.</span>
<span id="cb13-516"><a href="#cb13-516"></a>Llama bastante la atención el fuerte salto en el precio del alquiler que se produce a medida que nos acercamos a las ciudades principales de España. Podemos comprobar que aquellas ciudades con menor población cuentan con precios más bajos de alquiler puesto que la mayoría de la demanda de viviendas se concentra en las ciudades grandes que cuentan con mayor variedad de servicios, oportunidades académicas y laborales, entre otros...</span>
<span id="cb13-517"><a href="#cb13-517"></a></span>
<span id="cb13-520"><a href="#cb13-520"></a><span class="in">```{r}</span></span>
<span id="cb13-521"><a href="#cb13-521"></a>coloresg1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#66CDAA"</span>,<span class="st">"#A52A2A"</span>,<span class="st">"#53868B"</span>,<span class="st">"#458B00"</span>)</span>
<span id="cb13-522"><a href="#cb13-522"></a>coloresg2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"darkgoldenrod3"</span>,<span class="st">"#9A32CD"</span>, <span class="st">"deeppink3"</span>, <span class="st">"#EEEE00"</span>)</span>
<span id="cb13-523"><a href="#cb13-523"></a>coloresg3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#8B7E66"</span>, <span class="st">"#00FF7F"</span>, <span class="st">"#7FFF00"</span>,<span class="st">"#00BFFF"</span>,<span class="st">"#FF3030"</span>, <span class="st">"darkslategray"</span>)</span>
<span id="cb13-524"><a href="#cb13-524"></a>coloresg4 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#EEC900"</span>,<span class="st">"darkseagreen4"</span>, <span class="st">"#CD5555"</span>, <span class="st">"#EEA2AD"</span>)</span>
<span id="cb13-525"><a href="#cb13-525"></a></span>
<span id="cb13-526"><a href="#cb13-526"></a></span>
<span id="cb13-527"><a href="#cb13-527"></a>df_cca1 <span class="ot">&lt;-</span> info <span class="sc">%&gt;%</span></span>
<span id="cb13-528"><a href="#cb13-528"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> TAMAÑO, <span class="at">values_from =</span> ÍNDICE) <span class="sc">%&gt;%</span></span>
<span id="cb13-529"><a href="#cb13-529"></a>  <span class="fu">filter</span>(COMUNIDAD <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"06 Cantabria"</span>, <span class="st">"02 Aragón"</span>, <span class="st">"03 Principado de Asturias"</span>, <span class="st">"12 Galicia"</span>))</span>
<span id="cb13-530"><a href="#cb13-530"></a></span>
<span id="cb13-531"><a href="#cb13-531"></a>df_cca2 <span class="ot">&lt;-</span> info <span class="sc">%&gt;%</span></span>
<span id="cb13-532"><a href="#cb13-532"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> TAMAÑO, <span class="at">values_from =</span> ÍNDICE) <span class="sc">%&gt;%</span></span>
<span id="cb13-533"><a href="#cb13-533"></a>  <span class="fu">filter</span>(COMUNIDAD <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"07 Castilla y León"</span>, <span class="st">"08 Castilla La Mancha"</span>, <span class="st">"15 La Rioja"</span>, <span class="st">"11 Extremadura"</span>))</span>
<span id="cb13-534"><a href="#cb13-534"></a></span>
<span id="cb13-535"><a href="#cb13-535"></a>df_cca3 <span class="ot">&lt;-</span> info <span class="sc">%&gt;%</span></span>
<span id="cb13-536"><a href="#cb13-536"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> TAMAÑO, <span class="at">values_from =</span> ÍNDICE) <span class="sc">%&gt;%</span></span>
<span id="cb13-537"><a href="#cb13-537"></a>  <span class="fu">filter</span>(COMUNIDAD <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"10 Comunitat Valenciana"</span>, <span class="st">"01 Andalucía"</span>, <span class="st">"13 Comunidad de Madrid"</span>, <span class="st">"14 Región de Murcia"</span>, <span class="st">"09 Cataluña"</span>))</span>
<span id="cb13-538"><a href="#cb13-538"></a></span>
<span id="cb13-539"><a href="#cb13-539"></a>df_cca4 <span class="ot">&lt;-</span> info <span class="sc">%&gt;%</span></span>
<span id="cb13-540"><a href="#cb13-540"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> TAMAÑO, <span class="at">values_from =</span> ÍNDICE) <span class="sc">%&gt;%</span></span>
<span id="cb13-541"><a href="#cb13-541"></a>  <span class="fu">filter</span>(COMUNIDAD <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"16 Ceuta"</span>, <span class="st">"17 Melilla"</span>, <span class="st">"04 Illes Balears"</span>, <span class="st">"05 Canarias"</span>))</span>
<span id="cb13-542"><a href="#cb13-542"></a></span>
<span id="cb13-543"><a href="#cb13-543"></a></span>
<span id="cb13-544"><a href="#cb13-544"></a>CCAAg1<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_cca1,</span>
<span id="cb13-545"><a href="#cb13-545"></a>              <span class="fu">aes</span>(</span>
<span id="cb13-546"><a href="#cb13-546"></a>                AÑO,</span>
<span id="cb13-547"><a href="#cb13-547"></a>                General,</span>
<span id="cb13-548"><a href="#cb13-548"></a>                <span class="at">color =</span> COMUNIDAD)) <span class="sc">+</span></span>
<span id="cb13-549"><a href="#cb13-549"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.95</span>) <span class="sc">+</span></span>
<span id="cb13-550"><a href="#cb13-550"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> coloresg1) <span class="sc">+</span> </span>
<span id="cb13-551"><a href="#cb13-551"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-552"><a href="#cb13-552"></a>    <span class="at">y =</span> <span class="st">"IPC"</span>) <span class="sc">+</span></span>
<span id="cb13-553"><a href="#cb13-553"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() </span>
<span id="cb13-554"><a href="#cb13-554"></a>  </span>
<span id="cb13-555"><a href="#cb13-555"></a>CCAAg2<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_cca2,</span>
<span id="cb13-556"><a href="#cb13-556"></a>                <span class="fu">aes</span>(</span>
<span id="cb13-557"><a href="#cb13-557"></a>                  AÑO,</span>
<span id="cb13-558"><a href="#cb13-558"></a>                  General,</span>
<span id="cb13-559"><a href="#cb13-559"></a>                  <span class="at">color =</span> COMUNIDAD)) <span class="sc">+</span></span>
<span id="cb13-560"><a href="#cb13-560"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.95</span>) <span class="sc">+</span></span>
<span id="cb13-561"><a href="#cb13-561"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> coloresg2) <span class="sc">+</span> </span>
<span id="cb13-562"><a href="#cb13-562"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-563"><a href="#cb13-563"></a>    <span class="at">color =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-564"><a href="#cb13-564"></a>    <span class="at">y =</span> <span class="st">"IPC"</span>) <span class="sc">+</span></span>
<span id="cb13-565"><a href="#cb13-565"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>()</span>
<span id="cb13-566"><a href="#cb13-566"></a></span>
<span id="cb13-567"><a href="#cb13-567"></a>CCAAg3<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_cca3,</span>
<span id="cb13-568"><a href="#cb13-568"></a>                <span class="fu">aes</span>(</span>
<span id="cb13-569"><a href="#cb13-569"></a>                  AÑO,</span>
<span id="cb13-570"><a href="#cb13-570"></a>                  General,</span>
<span id="cb13-571"><a href="#cb13-571"></a>                  <span class="at">color =</span> COMUNIDAD)) <span class="sc">+</span></span>
<span id="cb13-572"><a href="#cb13-572"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.95</span>) <span class="sc">+</span></span>
<span id="cb13-573"><a href="#cb13-573"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> coloresg3) <span class="sc">+</span> </span>
<span id="cb13-574"><a href="#cb13-574"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-575"><a href="#cb13-575"></a>  <span class="at">color =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-576"><a href="#cb13-576"></a>  <span class="at">y =</span> <span class="st">"IPC"</span>) <span class="sc">+</span></span>
<span id="cb13-577"><a href="#cb13-577"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() </span>
<span id="cb13-578"><a href="#cb13-578"></a></span>
<span id="cb13-579"><a href="#cb13-579"></a>CCAAg4<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_cca4,</span>
<span id="cb13-580"><a href="#cb13-580"></a>                <span class="fu">aes</span>(</span>
<span id="cb13-581"><a href="#cb13-581"></a>                  AÑO,</span>
<span id="cb13-582"><a href="#cb13-582"></a>                  General,</span>
<span id="cb13-583"><a href="#cb13-583"></a>                  <span class="at">color =</span> COMUNIDAD)) <span class="sc">+</span></span>
<span id="cb13-584"><a href="#cb13-584"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.95</span>) <span class="sc">+</span></span>
<span id="cb13-585"><a href="#cb13-585"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> coloresg4) <span class="sc">+</span> </span>
<span id="cb13-586"><a href="#cb13-586"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-587"><a href="#cb13-587"></a>  <span class="at">color =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-588"><a href="#cb13-588"></a>  <span class="at">y =</span> <span class="st">"IPC"</span>) <span class="sc">+</span></span>
<span id="cb13-589"><a href="#cb13-589"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() </span>
<span id="cb13-590"><a href="#cb13-590"></a></span>
<span id="cb13-591"><a href="#cb13-591"></a>PLOT_CONJUNTO <span class="ot">&lt;-</span> ((CCAAg1 <span class="sc">+</span> CCAAg2) <span class="sc">/</span> (CCAAg3 <span class="sc">+</span> CCAAg4)) <span class="sc">+</span></span>
<span id="cb13-592"><a href="#cb13-592"></a>  <span class="fu">plot_layout</span>(<span class="at">guides =</span> <span class="st">"collect"</span>) <span class="sc">+</span></span>
<span id="cb13-593"><a href="#cb13-593"></a>  <span class="fu">theme</span>(</span>
<span id="cb13-594"><a href="#cb13-594"></a>    <span class="at">plot.title.position =</span> <span class="st">"collect"</span>)  <span class="sc">+</span></span>
<span id="cb13-595"><a href="#cb13-595"></a>  <span class="fu">plot_annotation</span>(</span>
<span id="cb13-596"><a href="#cb13-596"></a>    <span class="at">title =</span> <span class="st">"Evolución del IPC general de </span><span class="sc">\n</span><span class="st"> precios de alquiler por CCAA agrupadas (2015 = 100)"</span>,</span>
<span id="cb13-597"><a href="#cb13-597"></a>    <span class="at">caption =</span> <span class="st">"Fuente: INE"</span>) <span class="sc">&amp;</span> ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() <span class="sc">&amp;</span> <span class="fu">theme</span>(</span>
<span id="cb13-598"><a href="#cb13-598"></a>      <span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb13-599"><a href="#cb13-599"></a>      <span class="at">legend.direction =</span> <span class="st">"vertical"</span>,</span>
<span id="cb13-600"><a href="#cb13-600"></a>      <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">5</span>) ,</span>
<span id="cb13-601"><a href="#cb13-601"></a>      <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>,<span class="st">"cm"</span>),</span>
<span id="cb13-602"><a href="#cb13-602"></a>      <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">5</span>),</span>
<span id="cb13-603"><a href="#cb13-603"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="fl">0.05</span>))</span>
<span id="cb13-604"><a href="#cb13-604"></a></span>
<span id="cb13-605"><a href="#cb13-605"></a>PLOT_CONJUNTO</span>
<span id="cb13-606"><a href="#cb13-606"></a></span>
<span id="cb13-607"><a href="#cb13-607"></a><span class="in">```</span></span>
<span id="cb13-608"><a href="#cb13-608"></a></span>
<span id="cb13-609"><a href="#cb13-609"></a>En esta otra gráfica se nos presenta una forma distinta de observar los datos sobre la evolución del IPC general de precios del alquiler, hemos distinguido entre 4 grupos:</span>
<span id="cb13-610"><a href="#cb13-610"></a></span>
<span id="cb13-611"><a href="#cb13-611"></a><span class="ss">- </span>El primero, que trata de reunir regiones más ubicadas al norte incluyendo Aragón. Siendo esta última comunidad la que ha presentado mayor crecimiento en su índice, hecho que podría atribuirse a la contribución en los precios agregados del alquiler de Aragón por parte de Zaragoza, una de las ciudades principales del país. El resto de CCAA que integran el grupo muestran un patrón similar pero con un crecimiento menor.</span>
<span id="cb13-612"><a href="#cb13-612"></a></span>
<span id="cb13-613"><a href="#cb13-613"></a><span class="ss">- </span>El segundo grupo reúne las CCAA más orientadas al centro de la península, destaca como la evolución para Extremadura y Castilla y León ha sido prácticamente igual.</span>
<span id="cb13-614"><a href="#cb13-614"></a></span>
<span id="cb13-615"><a href="#cb13-615"></a><span class="ss">- </span>El tercero reúne las CCAA que consideramos más relevantes. No nos esperábamos que la Comunidad Valenciana fuera la región cuyos alquileres fueran más elevados al final del periodo superando a Cataluña y Madrid.</span>
<span id="cb13-616"><a href="#cb13-616"></a></span>
<span id="cb13-617"><a href="#cb13-617"></a><span class="ss">- </span>Finalmente el último grupo contiene las islas y las ciudades autónomas. podemos destacar como el comportamiento tanto en Baleares como en Canarias es similar, pero los alquileres son más elevados en la primera debido probablemente a que percibe turistas de mayor poder adquisitivo en las temporadas de verano. Los alquileres en Ceuta y Melilla presentan los índices más bajos de todos.</span>
<span id="cb13-618"><a href="#cb13-618"></a></span>
<span id="cb13-619"><a href="#cb13-619"></a><span class="fu">### Evolución de los precios de la vivienda.</span></span>
<span id="cb13-620"><a href="#cb13-620"></a></span>
<span id="cb13-623"><a href="#cb13-623"></a><span class="in">```{r}</span></span>
<span id="cb13-624"><a href="#cb13-624"></a><span class="do">#######MAPA</span></span>
<span id="cb13-625"><a href="#cb13-625"></a><span class="fu">library</span>(sf)</span>
<span id="cb13-626"><a href="#cb13-626"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb13-627"><a href="#cb13-627"></a><span class="fu">library</span>(pjpv.curso.R<span class="fl">.2022</span>)</span>
<span id="cb13-628"><a href="#cb13-628"></a></span>
<span id="cb13-629"><a href="#cb13-629"></a></span>
<span id="cb13-630"><a href="#cb13-630"></a><span class="do">###cargamos los datos </span></span>
<span id="cb13-631"><a href="#cb13-631"></a>datos_c<span class="ot">&lt;-</span> <span class="st">"./datos/prueba.csv"</span></span>
<span id="cb13-632"><a href="#cb13-632"></a>datos_c<span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(datos_c)</span>
<span id="cb13-633"><a href="#cb13-633"></a></span>
<span id="cb13-634"><a href="#cb13-634"></a><span class="do">### En la columna Total queremos poner un punto en vez de una coma </span></span>
<span id="cb13-635"><a href="#cb13-635"></a></span>
<span id="cb13-636"><a href="#cb13-636"></a>datos_c <span class="ot">&lt;-</span> datos_c<span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Total =</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(Total, <span class="st">","</span> , <span class="st">"."</span> ))</span>
<span id="cb13-637"><a href="#cb13-637"></a></span>
<span id="cb13-638"><a href="#cb13-638"></a><span class="co">#- Cambiamos el nombre de las columnas </span></span>
<span id="cb13-639"><a href="#cb13-639"></a></span>
<span id="cb13-640"><a href="#cb13-640"></a>df_c<span class="ot">&lt;-</span> datos_c <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">Indice_precio =</span> Total) <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">CCAA =</span> Comunidades_Autonomas)</span>
<span id="cb13-641"><a href="#cb13-641"></a></span>
<span id="cb13-642"><a href="#cb13-642"></a><span class="do">###Separamos la columna de CCAA en dos Columnas, una que muestre el código y otra el nombre de la Comunidad Autonoma  </span></span>
<span id="cb13-643"><a href="#cb13-643"></a></span>
<span id="cb13-644"><a href="#cb13-644"></a>df_c <span class="ot">&lt;-</span> df_c <span class="sc">%&gt;%</span></span>
<span id="cb13-645"><a href="#cb13-645"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(CCAA, <span class="at">sep =</span> <span class="st">" "</span>,</span>
<span id="cb13-646"><a href="#cb13-646"></a>                  <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"ine_ccaa"</span>, <span class="st">"ine_ccaa.n"</span>), <span class="at">extra =</span> <span class="st">"merge"</span>)</span>
<span id="cb13-647"><a href="#cb13-647"></a>df_c<span class="ot">&lt;-</span>  <span class="fu">drop_na</span>(df_c) <span class="co">#quitamos el total nacional, ya que no se van a utilizar</span></span>
<span id="cb13-648"><a href="#cb13-648"></a></span>
<span id="cb13-649"><a href="#cb13-649"></a>df_c<span class="ot">&lt;-</span> df_c <span class="sc">%&gt;%</span> <span class="fu">filter</span>(General <span class="sc">==</span> <span class="st">"General"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>( Índices_tasas <span class="sc">==</span><span class="st">"Media anual"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Periodo <span class="sc">==</span> <span class="st">"2022"</span>) <span class="do">##cogemos las viviendas generales, la media anual y elegimos el año más reciente que es 2022</span></span>
<span id="cb13-650"><a href="#cb13-650"></a></span>
<span id="cb13-651"><a href="#cb13-651"></a></span>
<span id="cb13-652"><a href="#cb13-652"></a><span class="do">###Cargamos las geometrías y elegimos las variables que nos interesan</span></span>
<span id="cb13-653"><a href="#cb13-653"></a>df_geo_prov <span class="ot">&lt;-</span> pjpv.curso.R<span class="fl">.2022</span><span class="sc">::</span>LAU2_prov_2020_canarias</span>
<span id="cb13-654"><a href="#cb13-654"></a>df_geo_prov <span class="ot">&lt;-</span> df_geo_prov <span class="sc">%&gt;%</span> <span class="fu">select</span>(ine_prov, ine_prov.n, ine_ccaa, ine_ccaa.n)</span>
<span id="cb13-655"><a href="#cb13-655"></a></span>
<span id="cb13-656"><a href="#cb13-656"></a><span class="do">##Agregamos geometrías de las Comunidades Autonomas </span></span>
<span id="cb13-657"><a href="#cb13-657"></a></span>
<span id="cb13-658"><a href="#cb13-658"></a>df_geo_ccaa <span class="ot">&lt;-</span> df_geo_prov <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(ine_ccaa, ine_ccaa.n) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>()</span>
<span id="cb13-659"><a href="#cb13-659"></a>df_ok <span class="ot">&lt;-</span> <span class="fu">left_join</span>(df_geo_ccaa, df_c, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ine_ccaa"</span> <span class="ot">=</span> <span class="st">"ine_ccaa"</span>))</span>
<span id="cb13-660"><a href="#cb13-660"></a><span class="fu">names</span>(df_ok)</span>
<span id="cb13-661"><a href="#cb13-661"></a></span>
<span id="cb13-662"><a href="#cb13-662"></a><span class="do">##Calculamos los Centroides</span></span>
<span id="cb13-663"><a href="#cb13-663"></a><span class="fu">library</span>(sf)</span>
<span id="cb13-664"><a href="#cb13-664"></a>df_geo_ccaa <span class="ot">&lt;-</span> <span class="fu">cbind</span>(df_geo_ccaa, <span class="fu">st_coordinates</span>(<span class="fu">st_centroid</span>(df_geo_ccaa<span class="sc">$</span>geometry)))</span>
<span id="cb13-665"><a href="#cb13-665"></a></span>
<span id="cb13-666"><a href="#cb13-666"></a><span class="do">##Juntamos los datos de los precios de los alquileres con las geometrías </span></span>
<span id="cb13-667"><a href="#cb13-667"></a>df_ok <span class="ot">&lt;-</span> <span class="fu">left_join</span>(df_geo_ccaa, df_c, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ine_ccaa"</span> <span class="ot">=</span> <span class="st">"ine_ccaa"</span>))</span>
<span id="cb13-668"><a href="#cb13-668"></a>df_ok<span class="sc">$</span>Indice_precio <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(df_ok<span class="sc">$</span>Indice_precio)</span>
<span id="cb13-669"><a href="#cb13-669"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb13-670"><a href="#cb13-670"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> df_ok, </span>
<span id="cb13-671"><a href="#cb13-671"></a>          <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> Indice_precio), </span>
<span id="cb13-672"><a href="#cb13-672"></a>          <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.09</span>) <span class="sc">+</span> </span>
<span id="cb13-673"><a href="#cb13-673"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">10.00</span>, <span class="fl">5.00</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">35</span>, <span class="cn">NA</span>), <span class="at">expand =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb13-674"><a href="#cb13-674"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">low=</span><span class="st">"white"</span>,</span>
<span id="cb13-675"><a href="#cb13-675"></a>                        <span class="at">high=</span><span class="st">"navyblue"</span>,</span>
<span id="cb13-676"><a href="#cb13-676"></a>                        <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">100</span>,<span class="dv">160</span>)) <span class="sc">+</span></span>
<span id="cb13-677"><a href="#cb13-677"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb13-678"><a href="#cb13-678"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb13-679"><a href="#cb13-679"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb13-680"><a href="#cb13-680"></a>  <span class="fu">theme</span>(<span class="at">axis.title.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb13-681"><a href="#cb13-681"></a>        <span class="at">axis.text.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb13-682"><a href="#cb13-682"></a>        <span class="at">axis.ticks.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb13-683"><a href="#cb13-683"></a>        <span class="at">axis.title.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb13-684"><a href="#cb13-684"></a>        <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb13-685"><a href="#cb13-685"></a>        <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>()) <span class="sc">+</span> </span>
<span id="cb13-686"><a href="#cb13-686"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Índice de Precios de la Vivienda por Comunidades Autónomas"</span>, </span>
<span id="cb13-687"><a href="#cb13-687"></a>       <span class="at">subtitle =</span> <span class="st">"(2022)"</span>,</span>
<span id="cb13-688"><a href="#cb13-688"></a>       <span class="at">fill =</span> <span class="st">"Índice"</span>,</span>
<span id="cb13-689"><a href="#cb13-689"></a>       <span class="at">caption =</span> <span class="st">"Fuente: INE"</span>)</span>
<span id="cb13-690"><a href="#cb13-690"></a>p</span>
<span id="cb13-691"><a href="#cb13-691"></a><span class="in">```</span></span>
<span id="cb13-692"><a href="#cb13-692"></a></span>
<span id="cb13-693"><a href="#cb13-693"></a>En el análisis gráfico previo (evolución de los regímenes de tenencia), hemos observado una marcada tendencia a lo largo de los años: La proporción de viviendas en propiedad ha disminuido a la par que las viviendas en alquiler han experimentado un aumento significativo. Esta transformación puede atribuirse principalmente al vertiginoso incremento de los precios de la vivienda, que ha afectado negativamente nuestro poder adquisitivo. La consecuencia directa de este fenómeno es la dificultad creciente para adquirir una vivienda propia, obligando a un número cada vez mayor de personas a optar por la alternativa del alquiler. Con el objetivo de profundizar en estas disparidades, hemos confeccionado un mapa que ilustra el Índice de Precios de la Vivienda por Comunidades para el año 2022. Este enfoque nos brinda la oportunidad de examinar las divergencias en los precios de la vivienda a nivel regional. En la observación detallada del mapa, se destaca que las Comunidades Autónomas con los precios de vivienda más elevados son la Comunidad de Madrid, Islas Baleares y Cataluña, las. Por otro lado, aquellas regiones donde el coste de la vivienda es más bajo incluyen Extremadura, Castilla-La Mancha y Navarra. Este análisis geográfico proporciona una visión más completa de las disparidades en los precios de la vivienda, destacando las áreas donde la propiedad se presenta como una inversión más onerosa y aquellas donde la adquisición de una vivienda podría ser más accesible. La información recopilada sugiere una correlación entre el aumento de los precios de la vivienda y el cambio en la tendencia hacia el alquiler, reflejando las complejidades económicas y sociales que inciden en las decisiones de vivienda de la población.</span>
<span id="cb13-694"><a href="#cb13-694"></a></span>
<span id="cb13-697"><a href="#cb13-697"></a><span class="in">```{r}</span></span>
<span id="cb13-698"><a href="#cb13-698"></a><span class="do">##Otro Mapa pero ahora del Indice de Precios de Alquiler </span></span>
<span id="cb13-699"><a href="#cb13-699"></a>datos_alquiler<span class="ot">&lt;-</span> <span class="st">"./datos/59057.csv"</span></span>
<span id="cb13-700"><a href="#cb13-700"></a>datos_alquiler<span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(datos_alquiler)</span>
<span id="cb13-701"><a href="#cb13-701"></a></span>
<span id="cb13-702"><a href="#cb13-702"></a><span class="do">##Cambiamos la coma por el punto en la columna Total</span></span>
<span id="cb13-703"><a href="#cb13-703"></a>datos_alquiler<span class="ot">&lt;-</span> datos_alquiler<span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Total =</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(Total, <span class="st">","</span> , <span class="st">"."</span> ))</span>
<span id="cb13-704"><a href="#cb13-704"></a></span>
<span id="cb13-705"><a href="#cb13-705"></a><span class="do">##Separamos la columna de CCAA en dos Columnas, una que muestre el código y otra el nombre de la Comunidad Autonoma  </span></span>
<span id="cb13-706"><a href="#cb13-706"></a></span>
<span id="cb13-707"><a href="#cb13-707"></a>datos_alquiler <span class="ot">&lt;-</span> datos_alquiler <span class="sc">%&gt;%</span></span>
<span id="cb13-708"><a href="#cb13-708"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(CCAA, <span class="at">sep =</span> <span class="st">" "</span>,</span>
<span id="cb13-709"><a href="#cb13-709"></a>                  <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"ine_ccaa"</span>, <span class="st">"ine_ccaa.n"</span>), <span class="at">extra =</span> <span class="st">"merge"</span>) </span>
<span id="cb13-710"><a href="#cb13-710"></a></span>
<span id="cb13-711"><a href="#cb13-711"></a><span class="do">##Quitamos Total Nacional (que no lo necesitamos)</span></span>
<span id="cb13-712"><a href="#cb13-712"></a></span>
<span id="cb13-713"><a href="#cb13-713"></a>datos_alquiler<span class="ot">&lt;-</span> <span class="fu">drop_na</span>(datos_alquiler)</span>
<span id="cb13-714"><a href="#cb13-714"></a></span>
<span id="cb13-715"><a href="#cb13-715"></a><span class="do">##Cogemos las variables que nos interesan, filtramos por Indice y filtramos por el año 2021(es el más reciente)</span></span>
<span id="cb13-716"><a href="#cb13-716"></a></span>
<span id="cb13-717"><a href="#cb13-717"></a>datos_alquiler<span class="ot">&lt;-</span> datos_alquiler <span class="sc">%&gt;%</span></span>
<span id="cb13-718"><a href="#cb13-718"></a>  <span class="fu">filter</span>(Tamaño <span class="sc">==</span> <span class="st">"Total"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-719"><a href="#cb13-719"></a>  <span class="fu">filter</span>(Dato <span class="sc">==</span><span class="st">"Índice"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-720"><a href="#cb13-720"></a>  <span class="fu">filter</span>(Periodo <span class="sc">==</span> <span class="dv">2021</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-721"><a href="#cb13-721"></a>  <span class="fu">select</span>(ine_ccaa, ine_ccaa.n, Total)</span>
<span id="cb13-722"><a href="#cb13-722"></a></span>
<span id="cb13-723"><a href="#cb13-723"></a><span class="do">###Cargamos las geometrías y elegimos las variables que nos interesan</span></span>
<span id="cb13-724"><a href="#cb13-724"></a>df_geo_prov <span class="ot">&lt;-</span> pjpv.curso.R<span class="fl">.2022</span><span class="sc">::</span>LAU2_prov_2020_canarias</span>
<span id="cb13-725"><a href="#cb13-725"></a>df_geo_prov <span class="ot">&lt;-</span> df_geo_prov <span class="sc">%&gt;%</span> <span class="fu">select</span>(ine_prov, ine_prov.n, ine_ccaa, ine_ccaa.n)</span>
<span id="cb13-726"><a href="#cb13-726"></a></span>
<span id="cb13-727"><a href="#cb13-727"></a><span class="do">##Agregamos geometrías de las Comunidades Autonomas </span></span>
<span id="cb13-728"><a href="#cb13-728"></a></span>
<span id="cb13-729"><a href="#cb13-729"></a>df_geo_ccaa <span class="ot">&lt;-</span> df_geo_prov <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(ine_ccaa, ine_ccaa.n) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>() </span>
<span id="cb13-730"><a href="#cb13-730"></a>df_ok <span class="ot">&lt;-</span> <span class="fu">left_join</span>(df_geo_ccaa, datos_alquiler, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ine_ccaa"</span> <span class="ot">=</span> <span class="st">"ine_ccaa"</span>))</span>
<span id="cb13-731"><a href="#cb13-731"></a><span class="fu">names</span>(df_ok)</span>
<span id="cb13-732"><a href="#cb13-732"></a></span>
<span id="cb13-733"><a href="#cb13-733"></a><span class="do">##Calculamos los Centroides</span></span>
<span id="cb13-734"><a href="#cb13-734"></a><span class="fu">library</span>(sf)</span>
<span id="cb13-735"><a href="#cb13-735"></a>df_geo_ccaa <span class="ot">&lt;-</span> <span class="fu">cbind</span>(df_geo_ccaa, <span class="fu">st_coordinates</span>(<span class="fu">st_centroid</span>(df_geo_ccaa<span class="sc">$</span>geometry)))</span>
<span id="cb13-736"><a href="#cb13-736"></a></span>
<span id="cb13-737"><a href="#cb13-737"></a><span class="do">##Juntamos los datos de los precios de los alquileres con las geometrías </span></span>
<span id="cb13-738"><a href="#cb13-738"></a>df_ok <span class="ot">&lt;-</span> <span class="fu">left_join</span>(df_geo_ccaa, datos_alquiler, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ine_ccaa"</span> <span class="ot">=</span> <span class="st">"ine_ccaa"</span>))</span>
<span id="cb13-739"><a href="#cb13-739"></a></span>
<span id="cb13-740"><a href="#cb13-740"></a><span class="do">##Gráfico</span></span>
<span id="cb13-741"><a href="#cb13-741"></a>df_ok<span class="sc">$</span>Total <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(df_ok<span class="sc">$</span>Total)</span>
<span id="cb13-742"><a href="#cb13-742"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb13-743"><a href="#cb13-743"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> df_ok, </span>
<span id="cb13-744"><a href="#cb13-744"></a>          <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> Total), </span>
<span id="cb13-745"><a href="#cb13-745"></a>          <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.09</span>) <span class="sc">+</span> </span>
<span id="cb13-746"><a href="#cb13-746"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">10.00</span>, <span class="fl">5.00</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">35</span>, <span class="cn">NA</span>), <span class="at">expand =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb13-747"><a href="#cb13-747"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">low=</span><span class="st">"white"</span>,<span class="at">high=</span><span class="st">"orange"</span>) <span class="sc">+</span></span>
<span id="cb13-748"><a href="#cb13-748"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb13-749"><a href="#cb13-749"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb13-750"><a href="#cb13-750"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb13-751"><a href="#cb13-751"></a>  <span class="fu">theme</span>(<span class="at">axis.title.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb13-752"><a href="#cb13-752"></a>        <span class="at">axis.text.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb13-753"><a href="#cb13-753"></a>        <span class="at">axis.ticks.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb13-754"><a href="#cb13-754"></a>        <span class="at">axis.title.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb13-755"><a href="#cb13-755"></a>        <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb13-756"><a href="#cb13-756"></a>        <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>()) <span class="sc">+</span> </span>
<span id="cb13-757"><a href="#cb13-757"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Índice de Precios del Alquiler  por Comunidades Autónomas"</span>, </span>
<span id="cb13-758"><a href="#cb13-758"></a>       <span class="at">subtitle =</span> <span class="st">"(2021)"</span>,</span>
<span id="cb13-759"><a href="#cb13-759"></a>       <span class="at">fill =</span> <span class="st">"Índice"</span>,</span>
<span id="cb13-760"><a href="#cb13-760"></a>       <span class="at">caption =</span> <span class="st">"Fuente: INE"</span>)</span>
<span id="cb13-761"><a href="#cb13-761"></a>p</span>
<span id="cb13-762"><a href="#cb13-762"></a></span>
<span id="cb13-763"><a href="#cb13-763"></a><span class="in">```</span></span>
<span id="cb13-764"><a href="#cb13-764"></a></span>
<span id="cb13-765"><a href="#cb13-765"></a>En la actualidad, la disparidad en los precios de alquiler entre distintas Comunidades Autónomas ha emergido como un tema de gran controversia. Con el objetivo de visualizar y comprender estas divergencias, hemos desarrollado un mapa interactivo que exhibe el Índice de Precio de Alquiler por Comunidades Autónomas durante el año 2021. Los resultados del análisis revelan que existen notables variaciones en los costes de alquiler a lo largo y ancho de España. En particular, Comunidades Autónomas como Asturias, Castilla y León, Galicia y Extremadura destacan por presentar precios de alquiler más accesibles. Este fenómeno podría estar vinculado a factores como una menor demanda relativa, una oferta más abundante o características socioeconómicas específicas de estas regiones. Contrastando con esta tendencia, las Comunidades Autónomas de las Islas Baleares, la Comunidad Valenciana, Cataluña, las Islas Canarias, Castilla La Mancha y la Comunidad Madrid se posicionan como las zonas con precios de alquiler más elevados. En estos casos, factores como la alta demanda derivada de zonas turísticas, una robusta actividad económica, y la concentración de empleo y servicios urbanos podrían estar contribuyendo a esta tendencia al alza en los precios.</span>
<span id="cb13-766"><a href="#cb13-766"></a></span>
<span id="cb13-767"><a href="#cb13-767"></a></span>
<span id="cb13-768"><a href="#cb13-768"></a><span class="fu">## CONCLUSIÓN</span></span>
<span id="cb13-769"><a href="#cb13-769"></a></span>
<span id="cb13-770"><a href="#cb13-770"></a>En conclusión, la dificultad para acceder a una vivienda independiente se ha convertido en un problema creciente, evidenciado por el aumento de adultos jóvenes que optan por quedarse en casa de sus padres a pesar de tener un salario.</span>
<span id="cb13-771"><a href="#cb13-771"></a></span>
<span id="cb13-772"><a href="#cb13-772"></a>Al analizar la evolución del salario promedio en España a lo largo de las últimas dos décadas, se observa que, aunque ha experimentado periodos de crecimiento, este crecimiento no ha sido suficiente para mantener el ritmo de los aumentos en los precios de bienes y servicios esenciales. En particular, los precios de la vivienda y otros elementos importantes, como la educación, han experimentado aumentos notables superando el crecimiento de los salarios.</span>
<span id="cb13-773"><a href="#cb13-773"></a></span>
<span id="cb13-774"><a href="#cb13-774"></a>En cuanto al tema de la vivienda destaca la preferencia generalizada por la propiedad en España, pero se observa una tendencia al alza en la proporción de personas que optan por el alquiler. Esta transformación se atribuye en gran medida al aumento vertiginoso de los precios de la vivienda, lo que ha afectado negativamente el poder adquisitivo y ha llevado a un número creciente de personas a elegir la opción del alquiler.</span>
<span id="cb13-775"><a href="#cb13-775"></a></span>
<span id="cb13-776"><a href="#cb13-776"></a>El análisis de la evolución de los precios de alquiler por regiones revela disparidades significativas, con ciertas Comunidades Autónomas presentando precios mucho más elevados que otras. Este fenómeno puede estar relacionado con factores como la demanda relativa, la oferta de viviendas y características socioeconómicas específicas de cada región.</span>
<span id="cb13-777"><a href="#cb13-777"></a></span>
<span id="cb13-778"><a href="#cb13-778"></a>En resumen, la dificultad para acceder a una vivienda independiente en España se ve exacerbada por el desajuste entre el crecimiento de los salarios y el aumento de los precios de la vivienda y otros servicios esenciales. La preferencia por la propiedad persiste, pero el alquiler se ha vuelto más relevante, especialmente en ciertas regiones con precios elevados. Este panorama presenta desafíos significativos para la emancipación de los jóvenes y plantea interrogantes sobre la eficiencia del mercado de viviendas en el país.</span>
</code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">© 2023 4º GEco</div>   
    <div class="nav-footer-center">Hecho con <a href="https://quarto.org">Quarto</a></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/<tu-usuario-github>">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:pucer@alumni.uv.es">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>